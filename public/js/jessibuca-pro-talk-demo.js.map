{"version":3,"file":"jessibuca-pro-talk-demo.js","sources":["../../../src/utils/emitter.js","../../../src/constant/index.js","../../../node_modules/screenfull/dist/screenfull.js","../../../src/utils/index.js","../../../src/utils/resampler.js","../../../src/utils/arraybuffer.js","../../../src/utils/g711.js","../../../src/utils/debug.js","../../../src/utils/events.js","../../../src/talk/index.js","../../../src/jessibuca-talk.js"],"sourcesContent":["export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({fn, ctx});\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n\n        if (!name) {\n            Object.keys(e).forEach((key) => {\n                delete e[key];\n            })\n            delete this.e\n            return;\n        }\n\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 1,\n    fetch: 2,\n    hls: 3,\n    webrtc: 4,\n    webTransport: 5,\n    aliyunRtc: 6,\n}\n\nexport const PLAYER_PLAY_PROTOCOL_LIST = [\n    '', \"websocket\", \"fetch\", \"hls\", \"webrtc\", \"webTransport\", \"aliyunRtc\"\n]\n\nexport const PLAYER_STREAM_TYPE = {\n    fetch: 'fetch',\n    hls: 'hls',\n    websocket: 'websocket',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    worker: 'worker',\n    aliyunRtc: 'aliyunRtc',\n}\n\n// 播放\nexport const PLAY_TYPE = {\n    player: \"player\",\n    playerAudio: 'playerAudio',\n    playbackTF: 'playbackTF',\n}\n\nexport const FILE_SUFFIX = {\n    mp4: 'mp4',\n    webm: 'webm',\n    flv: 'flv',\n    mov: 'mov'\n};\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s',\n    hls: 'hls',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    nakedFlow: 'nakedFlow',\n    fmp4: 'fmp4',\n    mpeg4: 'mpeg4',\n    aliyunRtc: 'aliyunRtc',\n}\n\nexport const DEMUX_TYPE_SHOW = {\n    flv: 'FLV',\n    m7s: 'm7s',\n    hls: 'HLS',\n    fmp4: 'FMP4',\n    mpeg4: 'MPEG4',\n    webrtc: 'Webrtc',\n    webTransport: 'WebTransport',\n    nakedFlow: '裸流',\n    aliyunRtc: 'aliyunRtc',\n}\n\nexport const DECODE_TYPE = {\n    mse: 'mse',\n    wcs: 'wcs',\n    offscreen: 'offscreen',\n    wasm: 'wasm',\n    simd: 'simd',\n    mt: 'mt',\n    webrtc: 'webrtc',\n    hls: 'hls',\n    aliyunRtc: 'aliyunRtc',\n}\n\nexport const RENDER_TYPE = {\n    canvas: 'canvas',\n    video: 'video'\n}\n\nexport const DEBUG_LEVEL = {\n    debug: 'debug',\n    warn: 'warn',\n}\n\nexport const PTZ_ACTIVE_EVENT_TYPE = {\n    click: 'click',\n    mouseDownAndUp: 'mouseDownAndUp',\n}\n\nexport const PLAYBACK_CONTROL_TYPE = {\n    normal: 'normal', // default normal 24H\n    simple: 'simple',\n}\n\n\nexport const PLAYER_NAME = 'JessibucaPro'\n\nexport const DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME = 4; // default playback forward max rate decode iframe\n\nexport const MEDIA_SOURCE_UPDATE_END_TIMEOUT = 10 * 1000\n\nexport const DOCUMENT_ONE_SECOND_BUFFER_LENGTH = 60; // default one second buffer length (fps is 25 - 30)\n\nexport const MSE_MAX_DELAY_TIME = 5;// 单位 秒\n\nexport const MSE_DELAY_INCREASE_TIME = 3;// 单位 秒\n\nexport const PLAYER_RESIZE_TIME = 500;\n\nexport const PLAYER_SCROLL_TIME = 200;\n\nexport const FLV_BUFFER_LARGE_SIZE = 1024 * 1024; // 1024kb = 1mb\n\nexport const WASM_DECODE_MAX_DIFF_TIMESTAMP = 1100; // 1s\n\nexport const AUDIO_CHANNEL_MAX = 2; // max support 2 channel\n\nexport const FRAME_TS_MAX_DIFF = 1000 * 60 * 60; // 1 hour\n\nexport const SIMD_H264_DECODE_MAX_WIDTH = 4080;\n\nexport const VIDEO_PAYLOAD_MIN_SIZE = 12; // video payload min size: 12 byte\n\nexport const CRYPTO_KEY_URL_PATH = '/crypto/'\n\nexport const CONTAINER_DATA_SET_KEY = 'jbprov'\n\nexport const VIDEO_ELEMENT_RETRY_PLAY_MAX_TIME = 3 // video element retry play max time\n\nexport const URL_OBJECT_CLEAR_TIME = 10 * 1000; // url object clear time\n\nexport const DEMUX_LOOP_INTERVAL_TIMES = 20; // 20ms\n\nexport const ERROR_MESSAGE_TIPS = {\n    webglAlignmentError: 'Webgl 渲染失败',\n    webglContextLostError: 'webgl 上下文丢失',\n    mediaSourceH265NotSupport: '不支持硬解码H265',\n    mediaSourceFull: '缓冲区已满',\n    mediaSourceAppendBufferError: '初始化解码器失败',\n    mseSourceBufferError: '解码失败',\n    mseAddSourceBufferError: '初始化解码器失败',\n    mediaSourceDecoderConfigurationError: '初始化解码器失败',\n    mediaSourceTsIsMaxDiff: '流异常',\n    mseWidthOrHeightChange: '流异常',\n    mediaSourceAudioG711NotSupport: '硬解码不支持G711a/u音频格式',\n    mediaSourceUseCanvasRenderPlayFailed: 'MediaSource解码使用canvas渲染失败',\n    webcodecsH265NotSupport: '不支持硬解码H265',\n    webcodecsUnsupportedConfigurationError: '初始化解码器失败',\n    webcodecsDecodeConfigureError: '初始化解码器失败',\n    webcodecsDecodeError: '解码失败',\n    wcsWidthOrHeightChange: '解码失败',\n    wasmDecodeError: '解码失败',\n    simdDecodeError: '解码失败',\n    wasmWidthOrHeightChange: '流异常',\n    wasmUseVideoRenderError: 'video自动渲染失败',\n    videoElementPlayingFailed: 'video自动渲染失败',\n    simdH264DecodeVideoWidthIsTooLarge: '不支持该分辨率的视频',\n    networkDelayTimeout: '网络超时重播失败',\n    fetchError: '请求失败',\n    streamEnd: '请求结束',\n    websocketError: '请求失败',\n    webrtcError: '请求失败',\n    hlsError: '请求失败',\n    decoderWorkerInitError: '初始化worker失败',\n    videoElementPlayingFailedForWebrtc: 'video自动渲染失败',\n    videoInfoError: '解析视频分辨率失败',\n    webrtcStreamH265: 'webrtc不支持H265',\n    hlsV2Mp4NotSupport: 'Hls解码器不支持解码',\n    delayTimeout: '播放超时重播失败',\n    loadingTimeout: '加载超时重播失败',\n    loadingTimeoutRetryEnd: '加载超时重播失败',\n    delayTimeoutRetryEnd: '播放超时重播失败',\n}\n\n\nexport const DEFAULT_JESSIBUCA_OPTIONS = {\n    url: '',\n    playbackConfig: {},\n    fullscreenWatermarkConfig: {}, // 全屏水印设置。\n    playType: PLAY_TYPE.player,\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,\n    playOptions: {},\n    isLive: true,\n    isMulti: true, // 默认就是显示uuid\n    isM7sCrypto: false,\n    // todo:template 里面不设置为true，只有dev 设置为true，方便官网测试使用。\n    supportHls265: true,\n    playFailedUseLastFrameShow: true, // 播放失败(异常原因)后，使用最后一帧显示。等同于 pause(isClear) isClear = true\n    // todo:template 里面不设置为true，只有dev 设置为true，方便官网测试使用。\n    playFailedAndPausedShowMessage: true, // 播放失败并暂停，是否显示提示信息。\n    pauseAndNextPlayUseLastFrameShow: false,\n    widthOrHeightChangeReplayDelayTime: 0,// 单位秒，宽高变化重新播放延迟时间\n}\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    playType: PLAY_TYPE.player, // inner\n    container: '',//\n    videoBuffer: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferDelay: 1 * 1000,// 1 * 1000ms\n    networkDelay: 10 * 1000, //  10 * 1000ms\n    isResize: true, //\n    isFullResize: false, // full resize\n    isFlv: false, // flv\n    isHls: false, // hls（inner）\n    isFmp4: false, // fmp4,\n    isFmp4Private: false,// 是否是fmp4私有协议\n    isWebrtc: false,// webrtc (inner)\n    isWebrtcForZLM: false,// webrtc for ZLM\n    isWebrtcForSRS: false,// webrtc for SRS\n    isWebrtcForOthers: false, // webrtc for others\n    isNakedFlow: false,// 是否是裸流（264、265）\n    isMpeg4: false,// 是否是mpeg4\n    isAliyunRtc: false,// 是否是阿里云rtc\n    debug: false, // debug log\n    debugLevel: DEBUG_LEVEL.warn, // log level\n    debugUuid: '', // debug uuid (inner)\n    isMulti: true,// 是否多实例播放(配置log用的)\n    multiIndex: -1,// 多实例播放的index\n    hotKey: false, // 快捷键\n    loadingTimeout: 10, // loading timeout 单位秒\n    heartTimeout: 10,  // heart timeout 单位秒\n    timeout: 10, // timeout 单位秒\n    pageVisibilityHiddenTimeout: 5 * 60, //   5 * 60  = 5 minute\n    loadingTimeoutReplay: true, // loading timeout replay\n    heartTimeoutReplay: true,// heart timeout replay。\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    heartTimeoutReplayUseLastFrameShow: true, // heart timeout replay use last frame\n    replayUseLastFrameShow: true,// replay use last frame\n    replayShowLoadingIcon: false,// replay show loading icon\n    supportDblclickFullscreen: false,\n    showBandwidth: false, //\n    showPerformance: false, // 是否显示性能面板\n    mseCorrectTimeDuration: 20,// mse correct time duration 20ms\n    keepScreenOn: true, // keep screen on\n    isNotMute: false,\n    hasAudio: true,\n    hasVideo: true,\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        record: false,\n        ptz: false,\n        quality: false,\n        zoom: false,\n        close: false,\n        scale: false,\n        performance: false,\n        logSave: false,\n        aiFace: false,\n        aiObject: false,\n        aiOcclusion: false,\n        fullscreenFn: null,\n        fullscreenExitFn: null,\n        screenshotFn: null,\n        playFn: null,\n        pauseFn: null,\n        recordFn: null,\n        recordStopFn: null,\n    },\n    extendOperateBtns: [],\n    contextmenuBtns: [],\n    watermarkConfig: {}, // 局部水印设置\n    controlAutoHide: false,\n    hasControl: false, // inner params\n    loadingIcon: true, // is show loading icon\n    loadingIconStyle: {},// loading icon style\n    loadingText: '',\n    background: '',\n    backgroundLoadingShow: false, // 加载过程中是否显示背景\n    loadingBackground: '', // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据。\n    loadingBackgroundWidth: 0, // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据 width。\n    loadingBackgroundHeight: 0, // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据 height。\n    decoder: 'decoder-pro.js',\n    decoderAudio: 'decoder-pro-audio.js',\n    decoderHard: 'decoder-pro-hard.js',  // 硬解码\n    wasmMp4RecorderDecoder: 'jessibuca-pro-mp4-recorder-decoder.js', // wasm mp4 recorder decoder\n    decoderWASM: '',\n    isDecoderUseCDN: false,\n    url: '',// inner\n    rotate: 0,\n    mirrorRotate: 'none', // 镜像xx\n    aspectRatio: 'default', // 比例支持 4:3, 16:9,\n    playbackConfig: {\n        playList: [], // {start:xx,end:xx,more:xx}\n        fps: '', // fps值\n        showControl: true,\n        controlType: PLAYBACK_CONTROL_TYPE.normal, //\n        duration: 0, // duration 持续时间。\n        startTime: '', // 开始时间\n        showRateBtn: false,\n        rateConfig: [],// 播放倍率切换，支持[{label:'正常',value:1},{label:'2倍',value:2}]\n        showPrecision: '',// 初始化显示精度 'oneHour', 'halfHour', 'tenMin', 'fiveMin'。\n        showPrecisionBtn: true,// 是否显示精度切换按钮\n        isCacheBeforeDecodeForFpsRender: false, // rfs渲染时，是否在解码前缓存数据\n        uiUsePlaybackPause: false, // ui上面是否使用 playbackPause 方法\n        isPlaybackPauseClearCache: true,// playbackPause是否清除缓存数据\n        isUseFpsRender: false, // 是否使用固定的fps渲染，播放器会动态计算流的fps\n        isUseLocalCalculateTime: false, // 是否使用本地时间来计算playback时间\n        localOneFrameTimestamp: 40, // 一帧 40ms, isUseLocalCalculateTime 为 true 生效。\n        supportWheel: false,// 是否支持滚动轴切换精度。\n        useWCS: false,// 是否使用wcs解码\n        useMSE: false,// 是否使用mse解码\n    },\n    qualityConfig: [], // 支持 ['高清','超清','4K']\n    defaultStreamQuality: '',\n    scaleConfig: ['拉伸', '缩放', '正常'],\n    // text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false,\n    protocol: PLAYER_PLAY_PROTOCOL.fetch, // 内部参数\n    demuxType: DEMUX_TYPE.flv, // 内部参数\n    useWasm: false,//wasm 解码 （inner）默认\n    useMSE: false, // mse 解码\n    useWCS: false, // wcs 解码\n    useSIMD: true, // pro 默认优先使用wasm simd解码，不支持则使用wasm解码\n    useMThreading: false,// 是否使用多线程解码\n    wcsUseVideoRender: true, // wcs 是否使用 video 渲染\n    wcsUseWebgl2Render: true,// canvas 模式下 wcs 是否使用webgl2渲染\n    wasmUseVideoRender: true, // wasm 用video标签渲染\n    mseUseCanvasRender: false,//mse 用canvas标签渲染\n    hlsUseCanvasRender: false,// hls 用canvas标签渲染\n    webrtcUseCanvasRender: false,// webrtc 用canvas标签渲染 待定\n\n    useOffscreen: false, //  内部参数（废弃）\n    useWebGPU: false, //  是否使用webgpu引擎\n    mseDecodeErrorReplay: true,// mse 解码失败重新播放\n    wcsDecodeErrorReplay: true,// wcs 解码失败重新播放\n    wasmDecodeErrorReplay: true, // 解码失败重新播放。\n    simdDecodeErrorReplay: true,// simd 解码失败重新播放。\n    simdDecodeErrorReplayType: DECODE_TYPE.wasm, // simd 解码失败重新播放类型: wasm 或者 simd\n    autoWasm: true, // 自动降级到 wasm 模式\n    decoderErrorAutoWasm: true, // 解码失败自动降级到 wasm 模式\n    hardDecodingNotSupportAutoWasm: true, // 硬解码不支持自动降级到 wasm 模式\n    webglAlignmentErrorReplay: true, // webgl对齐失败重新播放。\n    webglContextLostErrorReplay: true, // webgl context lost 重新播放。\n    openWebglAlignment: false,//  https://github.com/langhuihui/jessibuca/issues/152\n    // todo:template 里面不设置为true，只有dev 设置为true，方便官网测试使用。\n    syncAudioAndVideo: true,// 音视频同步\n    syncAudioAndVideoDiff: 400, // ms 时间戳超过之后会触发强制同步\n    // playback config\n    playbackDelayTime: 1000, // TF卡流播放延迟时间  Inner\n    playbackFps: 25, // Inner\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,// max rate render i frame , Inner\n    playbackCurrentTimeMove: true, // Inner 录像流数据的当前时间是否跟着播放时长移动\n\n    useVideoRender: true, // 使用video标签渲染\n    useCanvasRender: false, // 使用canvas渲染\n    networkDelayTimeoutReplay: false, // 网络延迟重连\n    recordType: FILE_SUFFIX.mp4,\n    checkFirstIFrame: true, // 检查第一帧是否是I帧\n    nakedFlowFps: 25, // 裸流fps\n    audioEngine: null, // 音频引擎\n    isShowRecordingUI: true, // 是否显示录制中UI\n    isShowZoomingUI: true, // 是否显示缩放中\n    useFaceDetector: false, // 使用人脸检测\n    useObjectDetector: false, // 使用物体检测\n    useImageDetector: false,// 使用图片检测\n    useOcclusionDetector: false,// 使用遮挡检测\n    ptzClickType: PTZ_ACTIVE_EVENT_TYPE.click, // PTZ 点击类型\n    ptzStopEmitDelay: 0.3,// ptz停止后，停止发送指令的延迟时间(秒)\n    ptzZoomShow: false,// ptz操作是否显示放大缩小操作\n    ptzApertureShow: false, // ptz操作是否显示光圈操作\n    ptzFocusShow: false, // ptz操作是否显示聚焦操作\n    ptzMoreArrowShow: false,// ptz操作是否显示更多箭头\n    // 微信安卓音频播放块大小\n    // 计算规则 48000 * ms / 1000 = size,\n    // 48000 * 200 /1000 = 9600  播放时长200ms\n    // 48000 * 175 /1000 = 8400  播放时长175ms\n    // 48000 * 150 /1000 = 7200  播放时长150ms\n    // 48000 * 125 /1000 = 6000  播放时长125ms\n    // 48000 * 100 /1000 = 4800  播放时长100ms default\n    // 48000 * 50 /1000 = 2400  播放时长50ms\n    // 48000 * 25 /1000 = 1200  播放时长25ms\n    // 48000 * 10 /1000 = 480  播放时长10ms\n    weiXinInAndroidAudioBufferSize: 4800,\n    isM7sCrypto: false,// 是否是m7s加密,\n    m7sCryptoAudio: false,// m7s音频是否加密\n    isSm4Crypto: false,// 是否是sm4加密\n    isXorCrypto: false,// 是否是xor加密\n    sm4CryptoKey: '',// sm4加密key\n    m7sCryptoKey: '',\n    xorCryptoKey: '', // xor加密key\n    cryptoKey: '',// 加密key\n    cryptoIV: '',// 加密iv\n    cryptoKeyUrl: '',// 加密key获取域名(for m7s)\n    autoResize: false,// 自动调整大小 inner\n    useWebFullScreen: false,// 使用web全屏(旋转播放器90度)(只会在移动端生效)\n    ptsMaxDiff: 60 * 60, //单位(秒)，默认值是1H\n    aiFaceDetectLevel: 2,// 人脸检测等级(1-5)\n    aiFaceDetectWidth: 240, // 人脸检测宽度（inner）\n    aiFaceDetectShowRect: true, // 人脸检测显示框子\n    aiFaceDetectInterval: 1000, // 人脸检测时间间隔 ms\n    aiFaceDetectRectConfig: {},// 人脸检测框子配置\n    aiObjectDetectLevel: 2,// 物体检测等级(1-5)\n    aiObjectDetectWidth: 240, // 物体检测宽度（inner）\n    aiObjectDetectShowRect: true,// 物体检测显示框子\n    aiObjectDetectInterval: 1000, // 物品检测时间间隔 ms\n    aiObjectDetectRectConfig: {},// 物体检测框子配置\n    aiOcclusionDetectInterval: 1000,// 遮挡检测时间间隔 ms\n    aiImageDetectDrop: false,// 图片检测是否丢弃不渲染\n    aiImageDetectActive: false,// 图片检测是否激活\n    videoRenderSupportScale: true, // video渲染支持Scale\n    mediaSourceTsIsMaxDiffReplay: true, // 当ts间隔超过最大值之后，重新播放\n    controlHtml: '',// 自定义控制栏Html\n    isH265: false,// 是否是h265,\n    isWebrtcH265: false,// 是否是webrtc h265\n    supportLockScreenPlayAudio: true,// 是否支持锁屏播放音频（mobile,ipad 端）\n    // todo:template 里面不设置为true，只有dev 设置为true，方便官网测试使用。\n    supportHls265: true,// 是否支持hls265\n    isEmitSEI: false,// 是否发送sei\n    pauseAndNextPlayUseLastFrameShow: false, // pause->play 使用最后一帧显示\n    demuxUseWorker: true,// demux 使用worker 解析 其中，\n    playFailedAndReplay: true, // 播放失败(异常原因)后，重新播放。(统一配置参数)\n    showMessageConfig: ERROR_MESSAGE_TIPS, // 播放失败提示信息配置\n    videoElementPlayingFailedReplay: true,// video 播放失败，主要是自动播放的时候，video不允许播放的情况下，降级会canvas。\n    mp4RecordUseWasm: true, // mp4 record 使用 wasm\n    //  for mse\n    mseAutoCleanupSourceBuffer: true, // 是否自动清理sourceBuffer（inner）\n    mseAutoCleanupMaxBackwardDuration: 30, // 30s （inner）\n    mseAutoCleanupMinBackwardDuration: 10, // 10s（inner）\n\n    // replay\n    widthOrHeightChangeReplay: true, // 宽高变化重新播放\n    simdH264DecodeVideoWidthIsTooLargeReplay: true, // simd h264 解码视频宽度过大重新播放\n    mediaSourceAudioG711NotSupportReplay: true, // mediaSource audio g711 not support replay (inner)\n    mediaSourceAudioInitTimeoutReplay: true, // mediaSource audio init timeout replay  (inner)\n    mediaSourceUseCanvasRenderPlayFailedReplay: true, // mediaSource 解码使用canvas渲染失败重新播放\n    mediaSourceUseCanvasRenderPlayFailedReplayType: RENDER_TYPE.video, // mediaSource 解码使用canvas渲染失败重新播放类型:mse+video,或者wasm+canvas\n    widthOrHeightChangeReplayDelayTime: 0,// 单位秒，宽高变化重新播放延迟时间\n    // 幽灵水印设置\n    ghostWatermarkConfig: {\n        on: 5, // 幽灵模式开启时间\n        off: 5, // 幽灵模式关闭时间\n        content: '', // 幽灵水印内容\n        fontSize: 12, // 幽灵水印字体大小\n        color: 'white', // 幽灵水印颜色\n        opacity: 0.15, // 幽灵水印透明度\n        speed: 0.2, // 幽灵水印速度\n    },\n\n    //  动态水印设置\n    dynamicWatermarkConfig: {\n        content: '', // 动态水印内容\n        speed: 0.2, // 动态水印速度\n        fontSize: 12, // 动态水印字体大小\n        color: 'white', // 动态水印颜色\n        opacity: 0.15, // 动态水印透明度\n    },\n\n    // 遇上时间戳相同的流，直接扔掉整个gop数据。\n    isDropSameTimestampGop: false,\n    // todo:template 里面不设置为true，只有dev 设置为true，方便官网测试使用。\n    mseDecodeAudio: true, //  mse 解码音频数据(支持aac/mp3)\n\n    nakedFlowH265DemuxUseNew: true,// 裸流h265解封装用new的\n\n    //自定义扩展dom\n    extendDomConfig: {\n        html: '',\n        showBeforePlay: false,//是否在播放前显示\n        showAfterLoading: true,//是否在加载后显示\n    },\n\n    disableContextmenu: false, // 是否禁用右键菜单\n}\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    audioNalu: 'audioNalu',\n    audioAACSequenceHeader: 'audioAACSequenceHeader',\n    videoCode: 'videoCode',\n    videoCodec: 'videoCodec',\n    videoNalu: 'videoNalu',\n    videoPayload: 'videoPayload',\n    audioPayload: 'audioPayload',\n    wasmError: 'wasmError',\n    workerFetch: 'workerFetch',\n    iframeIntervalTs: 'iframeIntervalTs',\n    isDropping: 'isDropping',\n    workerEnd: 'workerEnd',\n    networkDelay: 'networkDelay',\n    playbackStreamVideoFps: 'playbackStreamVideoFps',\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    wasmWidthOrHeightChange: 'wasmWidthOrHeightChange',\n    simdDecodeError: 'simdDecodeError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n    websocketOpen: 'websocketOpen',\n    closeEnd: 'closeEnd',\n    tempStream: 'tempStream',\n    videoSEI: 'videoSEI',\n    //  for flv recorder\n    flvScriptData: 'flvScriptData',\n    aacSequenceHeader: 'aacSequenceHeader',\n    videoSequenceHeader: 'videoSequenceHeader',\n    flvBufferData: 'flvBufferData',\n    checkFirstIFrame: 'checkFirstIFrame',\n}\n\nexport const WASM_ERROR = {\n    invalidNalUnitSize: 'Invalid NAL unit size',\n    // errorSplittingTheInputIntoNALUnits: 'Error splitting the input into NAL units'\n}\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2\n}\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9,\n    scriptData: 18\n}\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    initAudioCodec: 'initAudioCodec',\n    initVideoCodec: 'initVideoCodec',\n    close: 'close',\n    updateConfig: 'updateConfig',\n    resetDecode: 'resetDecode',\n    clearBuffer: 'clearBuffer',\n    resetAudioDecode: 'resetAudioDecode',\n    resetVideoDecode: 'resetVideoDecode',\n    fetchStream: 'fetchStream',\n    sendWsMessage: 'sendWsMessage',\n}\n\n\nexport const WORKER_FETCH_CMD_TYPE = {\n    fetch: 'fetch',\n    destroy: 'destroy',\n    buffer: 'buffer',\n    fetchError: 'fetchError',\n    fetchClose: 'fetchClose',\n    fetchSuccess: 'fetchSuccess',\n}\n\n// inner events\nexport const EVENTS = {\n    fullscreen: 'fullscreen$2',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    zooming: 'zooming',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: \"audioInfo\",\n    log: 'log',\n    error: \"error\",\n    kBps: 'kBps',\n    timeout: 'timeout',\n    delayTimeout: 'delayTimeout',\n    delayTimeoutRetryEnd: 'delayTimeoutRetryEnd',\n    loadingTimeout: 'loadingTimeout',\n    loadingTimeoutRetryEnd: 'loadingTimeoutRetryEnd',\n    stats: 'stats',\n    performance: \"performance\",\n    videoSmooth: 'videoSmooth',\n    faceDetectActive: 'faceDetectActive',\n    objectDetectActive: 'objectDetectActive',\n    occlusionDetectActive: 'occlusionDetectActive',\n    imageDetectActive: 'imageDetectActive',\n    // record\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    recordStart: 'recordStart',\n    recordEnd: 'recordEnd',\n    recordCreateError: 'recordCreateError',\n    recordBlob: 'recordBlob',\n\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    videoSEI: 'videoSEI',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    volumechange: 'volumechange',\n    destroy: 'destroy',\n    beforeDestroy: 'beforeDestroy',\n\n    // stream\n    streamEnd: 'streamEnd',\n    streamRate: 'streamRate',\n    streamAbps: 'streamAbps',\n    streamVbps: 'streamVbps',\n    streamDts: 'streamDts',\n    streamSuccess: 'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    streamStats: 'streamStats',\n\n    // MSE\n    mseSourceOpen: 'mseSourceOpen',\n    mseSourceClose: 'mseSourceClose',\n    mseSourceended: 'mseSourceended',\n    mseSourceBufferError: 'mseSourceBufferError',\n    mseAddSourceBufferError: 'mseAddSourceBufferError',\n    mseSourceBufferBusy: 'mseSourceBufferBusy',\n    mseSourceBufferFull: 'mseSourceBufferFull',\n    // VIDEO\n    videoWaiting: 'videoWaiting',\n    videoTimeUpdate: 'videoTimeUpdate',\n    videoSyncAudio: 'videoSyncAudio',\n    //\n    playToRenderTimes: 'playToRenderTimes',\n    playbackTime: 'playbackTime',\n    playbackTimestamp: 'playbackTimestamp',\n    playbackTimeScroll: 'playbackTimeScroll',\n    playbackPrecision: 'playbackPrecision',// inner\n    playbackShowPrecisionChange: 'playbackShowPrecisionChange',\n    playbackJustTime: 'playbackJustTime',\n    playbackStats: 'playbackStats',\n    playbackSeek: 'playbackSeek',\n    playbackPause: 'playbackPause',\n    playbackPauseOrResume: 'playbackPauseOrResume',\n    playbackRateChange: 'playbackRateChange',\n    playbackPreRateChange: 'playbackPreRateChange',\n\n    ptz: 'ptz',\n    streamQualityChange: 'streamQualityChange',\n    visibilityChange: \"visibilityChange\",\n    netBuf: 'netBuf',\n    close: 'close',\n    networkDelayTimeout: 'networkDelayTimeout',\n    togglePerformancePanel: 'togglePerformancePanel',\n    viewResizeChange: 'viewResizeChange',\n    flvDemuxBufferSizeTooLarge: 'flvDemuxBufferSizeTooLarge',\n    // talk\n    talkGetUserMediaSuccess: 'talkGetUserMediaSuccess',\n    talkGetUserMediaFail: 'talkGetUserMediaFail',\n    talkGetUserMediaTimeout: 'talkGetUserMediaTimeout',\n    talkStreamStart: 'talkStreamStart',\n    talkStreamOpen: 'talkStreamOpen',\n    talkStreamClose: 'talkStreamClose',\n    talkStreamError: 'talkStreamError',\n    talkStreamInactive: 'talkStreamInactive',\n\n    webrtcDisconnect: 'webrtcDisconnect',\n    webrtcFailed: 'webrtcFailed',\n    webrtcClosed: 'webrtcClosed',\n    webrtcOnConnectionStateChange: 'webrtcOnConnectionStateChange',\n    webrtcOnIceConnectionStateChange: 'webrtcOnIceConnectionStateChange',\n    // crash\n    crashLog: 'crashLog',\n\n    // dom\n    focus: 'focus',\n    blur: 'blur',\n    visibilityHiddenTimeout: 'visibilityHiddenTimeout',\n\n    // websocket\n    websocketOpen: 'websocketOpen',\n    websocketClose: 'websocketClose',\n    websocketError: 'websocketError',\n    websocketMessage: 'websocketMessage',\n\n    // ai\n    aiObjectDetectorInfo: 'aiObjectDetectorInfo',\n    aiFaceDetectorInfo: 'aiFaceDetectorInfo',\n    aiOcclusionDetectResult: 'aiOcclusionDetectResult',\n    aiImageDetectResult: 'aiImageDetectResult',\n\n    // 异常暂停\n    playFailedAndPaused: 'playFailedAndPaused',\n\n    // audio\n    audioResumeState: 'audioResumeState',\n\n    // webrtc\n    webrtcStreamH265: 'webrtcStreamH265',\n\n    // flv\n    flvMetaData: 'flvMetaData',\n\n    // talk\n    talkFailedAndStop: 'talkFailedAndStop',\n\n    removeLoadingBgImage: 'removeLoadingBgImage',\n\n    memoryLog: 'memoryLog',\n\n    downloadMemoryLog: 'downloadMemoryLog',\n\n    pressureObserverCpu: 'pressureObserverCpu',\n\n    currentPts: 'currentPts',\n}\n\n// jessibuca events\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    loadingTimeoutRetryEnd: EVENTS.loadingTimeoutRetryEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    delayTimeoutRetryEnd: EVENTS.delayTimeoutRetryEnd,\n    fullscreen: 'fullscreen',\n    multiFullscreen: 'multiFullscreen',\n    webFullscreen: EVENTS.webFullscreen,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    performance: EVENTS.performance,\n    //  record\n    recordingTimestamp: EVENTS.recordingTimestamp,\n    recordStart: EVENTS.recordStart,\n    recordCreateError: EVENTS.recordCreateError,\n    recordEnd: EVENTS.recordEnd,\n    recordBlob: EVENTS.recordBlob,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n\n    // playback\n    playbackSeek: EVENTS.playbackSeek,\n    playbackStats: EVENTS.playbackStats,\n    playbackTimestamp: EVENTS.playbackTimestamp,\n    playbackPauseOrResume: EVENTS.playbackPauseOrResume,\n    playbackPreRateChange: EVENTS.playbackPreRateChange,\n    playbackRateChange: EVENTS.playbackRateChange,\n    playbackShowPrecisionChange: EVENTS.playbackShowPrecisionChange,\n\n    ptz: EVENTS.ptz,\n    streamQualityChange: EVENTS.streamQualityChange,\n    zooming: EVENTS.zooming,\n    crashLog: EVENTS.crashLog,\n\n    focus: EVENTS.focus,\n    blur: EVENTS.blur,\n    visibilityHiddenTimeout: EVENTS.visibilityHiddenTimeout,\n    visibilityChange: EVENTS.visibilityChange,\n\n    // websocket\n    websocketOpen: EVENTS.websocketOpen,\n    websocketClose: EVENTS.websocketClose,\n    //\n    networkDelayTimeout: EVENTS.networkDelayTimeout,\n    //\n    aiObjectDetectorInfo: EVENTS.aiObjectDetectorInfo,\n    aiFaceDetectorInfo: EVENTS.aiFaceDetectorInfo,\n    aiOcclusionDetectResult: EVENTS.aiOcclusionDetectResult,\n    aiImageDetectResult: EVENTS.aiImageDetectResult,\n\n    playFailedAndPaused: EVENTS.playFailedAndPaused,\n\n    streamEnd: EVENTS.streamEnd,\n\n    // audio\n    audioResumeState: EVENTS.audioResumeState,\n\n    // video\n    videoSEI: EVENTS.videoSEI,\n\n    //  flv\n    flvMetaData: EVENTS.flvMetaData,\n\n    // webrtc\n    webrtcOnConnectionStateChange: EVENTS.webrtcOnConnectionStateChange,\n    webrtcOnIceConnectionStateChange: EVENTS.webrtcOnIceConnectionStateChange,\n\n    currentPts: EVENTS.currentPts,\n\n    videoSmooth: EVENTS.videoSmooth,\n}\n\nexport const TALK_EVENTS = {\n    talkStreamClose: EVENTS.talkStreamClose,\n    talkStreamError: EVENTS.talkStreamError,\n    talkStreamInactive: EVENTS.talkStreamInactive,\n    talkGetUserMediaTimeout: EVENTS.talkGetUserMediaTimeout,\n    talkFailedAndStop: EVENTS.talkFailedAndStop,\n}\n\nexport const JESSIBUCA_AUDIO_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    loadingTimeoutRetryEnd: EVENTS.loadingTimeoutRetryEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    delayTimeoutRetryEnd: EVENTS.delayTimeoutRetryEnd,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n    crashLog: EVENTS.crashLog,\n\n    // websocket\n    websocketOpen: EVENTS.websocketOpen,\n    websocketClose: EVENTS.websocketClose,\n    //\n    playFailedAndPaused: EVENTS.playFailedAndPaused,\n\n    // audio\n    audioResumeState: EVENTS.audioResumeState,\n}\n\nexport const TALK_EVENTS_ERROR = {\n    talkStreamError: EVENTS.talkStreamError,\n    talkStreamClose: EVENTS.talkStreamClose,\n}\n\nexport const EVENTS_ERROR = {\n    playError: 'playIsNotPauseOrUrlIsNull',\n    fetchError: \"fetchError\",\n    websocketError: 'websocketError',\n    webcodecsH265NotSupport: 'webcodecsH265NotSupport',\n    webcodecsDecodeError: 'webcodecsDecodeError',\n    webcodecsUnsupportedConfigurationError: 'webcodecsUnsupportedConfigurationError',\n    webcodecsDecodeConfigureError: 'webcodecsDecodeConfigureError',\n    mediaSourceH265NotSupport: 'mediaSourceH265NotSupport',\n    mediaSourceAudioG711NotSupport: 'mediaSourceAudioG711NotSupport',\n    mediaSourceAudioInitTimeout: 'mediaSourceAudioInitTimeout',\n    mediaSourceDecoderConfigurationError: 'mediaSourceDecoderConfigurationError',\n    mediaSourceFull: EVENTS.mseSourceBufferFull,\n    mseSourceBufferError: EVENTS.mseSourceBufferError,\n    mseAddSourceBufferError: EVENTS.mseAddSourceBufferError,\n    mediaSourceAppendBufferError: 'mediaSourceAppendBufferError',\n    mediaSourceTsIsMaxDiff: 'mediaSourceTsIsMaxDiff',\n    mediaSourceUseCanvasRenderPlayFailed: 'mediaSourceUseCanvasRenderPlayFailed',\n    mediaSourceBufferedIsZeroError: 'mediaSourceBufferedIsZeroError',\n    wasmDecodeError: 'wasmDecodeError',\n    wasmUseVideoRenderError: 'wasmUseVideoRenderError',\n    hlsError: 'hlsError',\n    hlsV2Mp4NotSupport: 'hlsV2Mp4NotSupport',\n    webrtcError: 'webrtcError',\n    webrtcClosed: EVENTS.webrtcClosed,\n    webrtcIceCandidateError: 'webrtcIceCandidateError',\n    webglAlignmentError: 'webglAlignmentError',\n    wasmWidthOrHeightChange: 'wasmWidthOrHeightChange',\n    mseWidthOrHeightChange: 'mseWidthOrHeightChange',\n    wcsWidthOrHeightChange: 'wcsWidthOrHeightChange',\n    widthOrHeightChange: 'widthOrHeightChange',\n    tallWebsocketClosedByError: 'tallWebsocketClosedByError',\n    flvDemuxBufferSizeTooLarge: EVENTS.flvDemuxBufferSizeTooLarge,\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    audioChannelError: 'audioChannelError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n    simdDecodeError: 'simdDecodeError',\n    webglContextLostError: 'webglContextLostError',\n    videoElementPlayingFailed: 'videoElementPlayingFailed',\n    videoElementPlayingFailedForWebrtc: 'videoElementPlayingFailedForWebrtc',\n    decoderWorkerInitError: 'decoderWorkerInitError',\n    videoInfoError: 'videoInfoError',\n    videoCodecIdError: 'videoCodecIdError',\n    streamEnd: EVENTS.streamEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    networkDelayTimeout: EVENTS.networkDelayTimeout,\n\n    aliyunRtcError: 'aliyunRtcError',\n\n    ...TALK_EVENTS_ERROR,\n}\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error'\n}\n\nexport const WEBSOCKET_STATUS_CODE = {\n    connecting: 0,\n    open: 1,\n    closing: 2,\n    closed: 3\n}\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full'\n}\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob'\n}\n\n\nexport const RECORDING_TYPE = {\n    download: 'download',\n    blob: 'blob'\n}\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264(AVC)', //\n    12: 'H265(HEVC)', //\n    99: 'MPEG4'\n}\n\nexport const VIDEO_ENC_CODE = {\n    h264: 7,\n    h265: 12,\n    mpeg4: 99\n}\n\nexport const VIDEO_ENC_TYPE_SHOW = {\n    h264: 'H264(AVC)',\n    h265: 'H265(HEVC)'\n}\n\nexport const AUDIO_ENC_CODE = {\n    AAC: 10,\n    ALAW: 7,\n    MULAW: 8,\n    MP3: 2\n}\n\nexport const AUDIO_ENC_CODE_SHOW = {\n    AAC: 'AAC',\n    ALAW: 'ALAW(g711a)',\n    MULAW: 'MULAW(g711u)',\n    MP3: 'MP3'\n}\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW',\n    2: 'MP3'\n}\n\n\nexport const H264_NAL_TYPE = {\n    sps: 7,\n    pps: 8,\n    iFrame: 5, //\n    kUnspecified: 0,\n    kSliceNonIDR: 1,\n    kSliceDPA: 2,\n    kSliceDPB: 3,\n    kSliceDPC: 4,\n    kSliceIDR: 5, //  iFrame\n    kSliceSEI: 6, // sei 辅助增强信息\n    kSliceSPS: 7, // sps\n    kSlicePPS: 8, // pps\n    kSliceAUD: 9,\n    kEndOfSequence: 10,\n    kEndOfStream: 11,\n    kFiller: 12,\n    kSPSExt: 13,\n    kReserved0: 14,\n}\n\nexport const H265_NAL_TYPE = {\n    pFrame: 1, //  语义为被参考的后置图像，且非TSA、非STSA的SS编码数据\n    iFrame: 19, // IDR_W_RADL 语义为可能有RADL图像的IDR图像的SS编码数据 IDR\n    nLp: 20, // kSliceIDR_N_LP\n    vps: 32, // 语义为视频参数集\n    sps: 33, // 语义为序列参数集\n    pps: 34, // 语义为图像参数集\n    sei: 39, //SEI 语义为补充增强信息\n    prefixSei: 39,//\n    suffixSei: 40,//\n}\n\n\nexport const CONTROL_HEIGHT = 38\nexport const CONTROL_PLAYBACK_HEIGHT = 48\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2 // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n}\n\n\nexport const CANVAS_RENDER_TYPE = {\n    webcodecs: 'webcodecs',\n    webgl: 'webgl',\n    webgl2: 'webgl2',\n    webgpu: 'webgpu',\n    offscreen: 'offscreen',\n    mse: 'mse',\n    hls: 'hls',\n    webrtc: 'webrtc'\n}\n\nexport const ENCODED_VIDEO_TYPE = {\n    key: 'key',\n    delta: 'delta'\n}\n\n\nexport const MP4_CODECS = {\n    avc: 'video/mp4; codecs=\"avc1.64002A\"',\n    hev: 'video/mp4; codecs=\"hev1.1.6.L123.b0\"',\n}\n\n\nexport const MEDIA_SOURCE_STATE = {\n    ended: 'ended',\n    open: 'open',\n    closed: 'closed'\n}\n\n\n// frag duration\nexport const FRAG_DURATION = Math.ceil(1000 / 25)\n\nexport const AIDIO_MAX_VIDEO_DIFF = 2000; // ms\n// renderTimeDay once length\nexport const PLAYBACK_RENDER_ONCE_LENGTH = 2000;\n\nexport const HOT_KEY = {\n    esc: 27, //\n    arrowUp: 38, //\n    arrowDown: 40, //\n}\n\n// playback control time precision\nexport const PLAYBACK_CONTROL_TIME_PRECISION = {\n    oneHour: 'oneHour', // 60min\n    halfHour: 'halfHour', // 30min\n    tenMin: 'tenMin', // 10min\n    fiveMin: 'fiveMin', // 5min\n    // oneMin: \"oneMin\" // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_CLASS = {\n    oneHour: 'one-hour', // 60min\n    halfHour: 'half-hour', // 30min\n    tenMin: 'ten-min', // 10min\n    fiveMin: 'five-min', // 5min\n    // oneMin: 'one-min' // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_TEXT = {\n    oneHour: '1h', // 60min\n    halfHour: '30min', // 30min\n    tenMin: '10min', // 10min\n    fiveMin: '5min', // 5min\n    // oneMin: '1min' // 1min\n}\n\n//\nexport const PLAYBACK_CONTROL_TIME_PRECISION_ARRAY = [\n    'oneHour', 'halfHour', 'tenMin', 'fiveMin'\n]\n\nexport const PTZ_ARROW = ['up', 'right', 'down', 'left', 'left-up', 'right-up', 'left-down', 'right-down'];\n\nexport const PTZ_OBJ = {\n    up: \"up\",\n    right: 'right',\n    down: 'down',\n    left: 'left',\n    leftUp: 'leftUp',\n    leftDown: 'leftDown',\n    rightUp: 'rightUp',\n    rightDown: 'rightDown',\n    // stop\n    stop: 'stop',\n    fiStop: 'fiStop', // just for 聚焦，光圈\n    // 镜头\n    zoomExpand: 'zoomExpand',\n    zoomNarrow: 'zoomNarrow',\n    // 聚焦\n    apertureFar: 'apertureFar',\n    apertureNear: 'apertureNear',\n    // 光圈\n    focusFar: 'focusFar',\n    focusNear: 'focusNear',\n}\n\nexport const TALK_ENC_TYPE = {\n    g711a: 'g711a',\n    g711u: 'g711u',\n    pcm: 'pcm',\n    opus: 'opus',\n}\n\nexport const SCREENSHOT_FORMAT_TYPE = {\n    png: 'image/png',\n    jpeg: 'image/jpeg',\n    webp: 'image/webp'\n};\n\nexport const PLAYBACK_VIDEO_MAX_BUFFER_SIZE = 50;\n\n\nexport const MEDIA_SOURCE_EVENTS = {\n    sourceClose: 'sourceclose',\n    sourceOpen: 'sourceopen',\n    sourceended: 'sourceended'\n}\n\nexport const VIDEO_ELEMENT_EVENTS = {\n    canplay: 'canplay',\n    waiting: \"waiting\",\n    timeUpdate: 'timeupdate',\n    ratechange: 'ratechange'\n}\n\n\nexport const VIDEO_ENCODE_TYPE = {\n    h264: 'avc',\n    h265: 'hevc'\n}\n\n\nexport const AVCPacketType = {\n    AVCSequenceHeader: 0,\n    AVCNalu: 1,\n}\n\n\nexport const WCS_ERROR = {\n    keyframeIsRequiredError: 'A key frame is required after configure() or flush()',\n    canNotDecodeClosedCodec: \"Cannot call 'decode' on a closed codec\",\n    unsupportedConfiguration: 'Unsupported configuration',\n    decoderFailure: 'Decoder failure',\n    decodingError: 'Decoding error',\n    decoderError: 'Decoder error',\n    hevcDecodingIsNotSupported: 'HEVC decoding is not supported',\n}\nexport const FETCH_ERROR = {\n    abortError: 'The user aborted a request',\n    abortError2: 'AbortError',\n    abort: 'AbortError'\n}\n\nexport const PLAYER_STATUS = {\n    loading: 'loading',\n    playing: 'playing',\n    paused: 'paused',\n    destroy: 'destroy'\n}\n\n\nexport const AVC_PACKET_TYPE = {\n    sequenceHeader: 0,\n    nalu: 1\n}\n\nexport const FRAME_TYPE = {\n    keyFrame: 1,\n    interFrame: 2\n}\n\n//     RTP_PAYLOAD_TYPE_PCMU    = 0,   // g711u\n//     RTP_PAYLOAD_TYPE_PCMA    = 8,   // g711a\n//     RTP_PAYLOAD_TYPE_JPEG    = 26,\n//     RTP_PAYLOAD_TYPE_H264    = 96,\n//     RTP_PAYLOAD_TYPE_H265    = 97,\n//     RTP_PAYLOAD_TYPE_OPUS    = 98,\n//     RTP_PAYLOAD_TYPE_AAC     = 99,\n//     RTP_PAYLOAD_TYPE_G726    = 100,\n//     RTP_PAYLOAD_TYPE_G726_16 = 101,\n//     RTP_PAYLOAD_TYPE_G726_24 = 102,\n//     RTP_PAYLOAD_TYPE_G726_32 = 103,\n//     RTP_PAYLOAD_TYPE_G726_40 = 104,\n//     RTP_PAYLOAD_TYPE_SPEEX   = 105,\nexport const RTP_PAYLOAD_TYPE = {\n    pcma: 8,\n    g711a: 8,\n    pcmu: 0,\n    g711u: 0,\n    jpeg: 26,\n    h264: 96,\n    h265: 97,\n    opus: 98,\n    aac: 99,\n}\n\n\nexport const TALK_PACKET_TYPE = {\n    empty: 'empty', // 裸的协议\n    rtp: 'rtp',\n}\n\nexport const TALK_PACKAGE_TCP_SEND_TYPE = {\n    tcp: 'tcp',\n    udp: 'udp'\n}\n\n\nexport const RECORD_STREAM_TYPE = {\n    stream: 'stream',\n    playback: 'playback'\n}\n\n\nexport const WEBSOCKET_EVENTS = {\n    open: 'open',\n    close: 'close',\n    error: 'error',\n    message: 'message'\n}\n\nexport const TALK_ENGINE = {\n    worklet: 'worklet',\n    script: 'script'\n}\n\n// default talk options\nexport const DEFAULT_TALK_OPTIONS = {\n    encType: TALK_ENC_TYPE.g711a,\n    packetType: TALK_PACKET_TYPE.rtp, // 默认的包个格式化\n    packetTcpSendType: TALK_PACKAGE_TCP_SEND_TYPE.tcp, // 默认的包个格式化\n    rtpSsrc: '0000000000', // 10 位\n    numberChannels: 1, // 采样通道\n    sampleRate: 8000, // 采样率\n    sampleBitsWidth: 16, // 采样精度\n    sendInterval: 20, // 发送间隔(ms)\n    debug: false,\n    debugLevel: DEBUG_LEVEL.warn, // debug level\n    testMicrophone: false, // 测试麦克风获取\n    saveRtpToFile: false, // 保存 rtp 到文件\n    audioBufferLength: 160, // 默认走的是 20ms 8000 采样率 16 位精度\n    engine: TALK_ENGINE.worklet, //\n    checkGetUserMediaTimeout: false, // 检测 getUserMedia 超时\n    getUserMediaTimeout: 10 * 1000, // getUserMedia 超时时间 10s\n    audioConstraints: {\n        // deviceId: '', // 设备 id\n        latency: true,//\n        noiseSuppression: true, // 降噪\n        autoGainControl: true,\n        echoCancellation: true, // 回声消除\n        sampleRate: 48000,\n        channelCount: 1\n    },\n}\n\n\nexport const AUDIO_ENGINE_TYPE = {\n    worklet: 'worklet',\n    script: 'script', // default\n    active: 'active' //\n}\n\n\nexport const CONTROL_BUTTON_OPTIONS = {\n    name: '',\n    index: 0,\n    icon: '',\n    iconHover: '',\n    iconTitle: '',\n    activeIcon: '',\n    activeIconHover: '',\n    activeIconTitle: '',\n    click: null,\n    activeClick: null,\n}\n\nexport const MENU_ITEM_OPTIONS = {\n    content: '',\n    click: null,\n    index: 0\n}\n\n\n// multi options\nexport const DEFAULT_MULTI_OPTIONS = {\n    container: '',\n    maxSplit: 4, // 最大分屏数\n    split: 1, // 默认分屏数\n    draggable: false,// 是否支持拖拽\n    showSelectedBorder: true, // 是否显示选中边框\n    supportDblclickContainerFullscreen: false, // 是否支持双击全屏\n    supportMousemoveEvent: false,\n    style: {\n        border: \"#343434\",\n        borderSelect: \"#FFCC00\",\n        background: \"#000\",\n    }\n}\n\n//\nexport const MULTI_EVENTS = {\n    multiFullscreen: 'multiFullscreen',\n    dblSelected: 'multiDblSelected', // 双击选中窗口\n    selected: 'multiSelected', // 选中窗口\n    mouseover: 'multiMouseover', // 鼠标移入\n    mouseout: 'multiMouseout', // 鼠标移出\n    mouseup: 'multiMouseup', // 鼠标mouseUp事件\n    mousedown: 'multiMousedown', // 鼠标mouseDown事件\n    mousemove: 'multiMousemove', // 鼠标mouseMove事件\n    dragstart: 'multiDragstart', // 拖拽开始\n    dragenter: 'multiDragenter', // 拖拽进入\n    dragleave: 'multiDragleave', // 拖拽离开\n    drop: 'multiDrop', // 拖拽放下\n}\n\nexport const MULTI_SHOW_SPECIAL_TYPE = {\n    special1: '3-1', // 九宫格- 左上合并了四个。\n    special2: '4-1', // 十六宫格- 左上合并了九个。\n    special3: '1-1',// 两宫格- 左边一个，右边一个。\n    special4: '3-4',// 十二宫格\n    special5: '' // 十宫格,左上四个合并，右下四个合并\n}\n\n\nexport const WATERMARK_REFERENCE = {\n    container: 'container',\n    video: 'video'\n}\n\n\nexport const VIDEO_FRAME_TYPE = {\n    keyFrame: 1,//\n    interFrame: 2,//\n}\n\nexport const VIDEO_PACKET_TYPE = {\n    sequenceHeader: 0, //\n    nalu: 1, //\n}\n\n//  default audio player options\nexport const DEFAULT_AUDIO_PLAYER_OPTIONS = {\n    playType: PLAY_TYPE.playerAudio, // inner\n    timeout: 10, // timeout\n    loadingTimeout: 10, // loading timeout\n    heartTimeout: 10,  // heart timeout\n    debug: false, // debug log\n    debugLevel: DEBUG_LEVEL.warn, // debug level\n    protocol: PLAYER_PLAY_PROTOCOL.fetch, // 内部参数\n    demuxType: DEMUX_TYPE.flv, // 内部参数\n    isFlv: false, // is flv\n    isNotMute: false, // is not mute\n    videoBuffer: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferDelay: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferMax: 5 * 1000, // 5* 1000ms == 5 second\n    loadingTimeoutReplay: true, // loading timeout replay\n    heartTimeoutReplay: true,// heart timeout replay。\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    decoder: 'decoder-pro-audio-player.js', // default pcm\n    isDecoderUseCDN: false,\n    weiXinInAndroidAudioBufferSize: 4800,\n    audioEngine: null, // 音频引擎\n    supportLockScreenPlayAudio: true,// 是否支持锁屏播放音频（mobile,ipad 端）\n}\n\n\nexport const HLS_EVENTS = {\n    SUBTITLE_SEGMENTS: 'subtitle-segments',\n    HLS_MANIFEST_LOADED: 'hls-manifest-loaded', // 主从m3u8格式时，master m3u8文件加载并解析完成后\n    HLS_LEVEL_LOADED: 'hls-level-loaded', // 二级m3u8加载并解析完成后，抛出解析后的结构\n    DEMUXED_TRACK: 'demuxed-track',\n    FLV_SCRIPT_DATA: 'flv-script-data',\n    METADATA_PARSED: 'metadata-parsed', // 视频元数据被第一次解析到时触发参数被分为两种类型 video 和 audio\n    TTFB: 'ttfb', // 分片请求开始到接收到请求响应\n\n    LOAD_RETRY: 'load-retry', // 请求发生重试时触发\n    LOAD_START: 'load-start', // 分片在发送请求之前触发\n    SPEED: 'speed', // 当收集到网络速度统计时触发\n    LOAD_COMPLETE: 'load-complete', // 在请求完成后触发\n    LOAD_RESPONSE_HEADERS: 'load-response-headers', // 接收到请求响应头时触发\n\n    SEI: 'sei', // 当解析到视频 sei 时触发\n    SEI_IN_TIME: 'sei-in-time', // 根据当前视频播放时间抛出 sei，触发该事件表示该 sei 将在当前时间点展示。\n\n    NO_AUDIO_TRACK: 'no-audio-track',\n\n    REMOVE_BUFFER: 'remove-buffer',\n\n    BUFFEREOS: 'buffereos',\n\n    SOURCEBUFFER_CREATED: 'sourcebuffer-created',\n\n    SWITCH_URL_FAILED: 'switch-url-failed', // switchURL 方法调用后，切换 url 失败后触发。\n\n    SWITCH_URL_SUCCESS: 'switch-url-success', // switchURL 方法调用后，切换 url 成功后触发。\n\n    SUBTITLE_PLAYLIST: 'subtitle-playlist',\n\n    STREAM_PARSED: 'stream-parsed',\n\n    ERROR: 'error',\n}\n\nexport const AI_FACE_DETECTOR_LEVEL = [0, 160, 240, 320, 480, 640];\n\nexport const AI_OBJECT_DETECTOR_LEVEL = [0, 160, 240, 320, 480, 640];\n\nexport const CPU_LEVEL = ['轻松', '正常', '较高', '高'];\n\n\nexport const LOADER_STATUS = {\n    idle: 'idle', //\n    connecting: 'connecting', //\n    buffering: 'buffering', //\n    error: 'error', //\n    complete: 'complete', //\n}\n\n\nexport const VIDEO_ERROR_CODE_DESC = {\n    1: 'MEDIA_ERR_ABORTED', // media err aborted 取回过程被用户中止\n    2: 'MEDIA_ERR_NETWORK', // media err network 当下载时发生错误\n    3: 'MEDIA_ERR_DECODE', // media err decode 当解码时发生错误\n    4: 'MEDIA_ERR_SRC_NOT_SUPPORTED', // media err src not supported 不支持音频/视频\n}\n\n\nexport const AV_TRACK_ID = {\n    video: 1,\n    audio: 2,\n}\n\n//  rtmp 2023 spec\nexport const FRAME_HEADER_EX = 0x80\n\n\nexport const PACKET_TYPE_EX = {\n    PACKET_TYPE_SEQ_START: 0,\n    PACKET_TYPE_FRAMES: 1,\n    PACKET_TYPE_SEQ_END: 2,\n    PACKET_TYPE_FRAMESX: 3, // PACKETTYPE_FRAMESX is an optimization to avoid sending composition time offsets of 0. See Enhanced RTMP spec.\n    PACKET_TYPE_METADATA: 4,\n};\n\nexport const FRAME_TYPE_EX = {\n    FT_KEY: 0x10,\n    FT_INTER: 0x20\n};\n\n","/*!\n* screenfull\n* v5.1.0 - 2020-12-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import {\n    MP4_CODECS,\n    FILE_SUFFIX,\n    H264_NAL_TYPE,\n    VIDEO_ENC_TYPE_SHOW,\n    H265_NAL_TYPE,\n    AUDIO_ENC_TYPE,\n    AUDIO_ENC_CODE_SHOW,\n    AUDIO_ENC_CODE,\n    DEFAULT_JESSIBUCA_OPTIONS,\n    DEFAULT_PLAYER_OPTIONS,\n    DEFAULT_TALK_OPTIONS,\n    CONTROL_BUTTON_OPTIONS,\n    MENU_ITEM_OPTIONS,\n    DEFAULT_MULTI_OPTIONS,\n    FRAME_TYPE,\n    AVC_PACKET_TYPE,\n    WATERMARK_REFERENCE,\n    DEFAULT_AUDIO_PLAYER_OPTIONS\n} from \"../constant\";\nimport screenfull from \"screenfull\";\nimport {isAacCodecPacket} from \"./aac\";\n\nexport function noop() {\n}\n\n\nexport function supportOffscreen($canvas) {\n    return typeof $canvas.transferControlToOffscreen === 'function';\n}\n\n\nexport function supportOffscreenV2() {\n    return typeof OffscreenCanvas !== \"undefined\";\n}\n\n\nexport function createContextGL($canvas) {\n    let gl = null;\n\n    const validContextNames = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n        const contextName = validContextNames[nameIndex];\n\n        try {\n            let contextOptions = {preserveDrawingBuffer: true};\n            gl = $canvas.getContext(contextName, contextOptions);\n        } catch (e) {\n            console.error(e);\n            gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== \"function\") {\n            gl = null;\n        }\n\n        ++nameIndex;\n    }\n\n\n    return gl;\n}\n\n\nexport function createContextGL2($canvas) {\n    let gl2 = null;\n    gl2 = $canvas.getContext(\"webgl2\");\n    return gl2;\n}\n\nexport function audioContextUnlock(context) {\n    context.resume();\n    const source = context.createBufferSource();\n    source.buffer = context.createBuffer(1, 1, 22050);\n    source.connect(context.destination);\n    if (source.noteOn) {\n        source.noteOn(0);\n    } else {\n        source.start(0);\n    }\n}\n\nexport function dataURLToFile(dataURL = '') {\n    const arr = dataURL.split(\",\");\n    const bstr = atob(arr[1]);\n    const type = arr[0].replace(\"data:\", \"\").replace(\";base64\", \"\")\n    let n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], 'file', {type});\n}\n\nexport function downloadFile(file, fileName) {\n    if (file instanceof Blob || file instanceof File) {\n        file = new Blob([file]);\n    }\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = file;\n    aLink.click();\n}\n\n\nexport function downloadImg(content, fileName) {\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    const href = URL.createObjectURL(content);\n    aLink.href = href;\n    aLink.click();\n    setTimeout(() => {\n        URL.revokeObjectURL(href);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function checkFull() {\n    let isFull = document.fullscreenElement || window.webkitFullscreenElement || document.msFullscreenElement;\n    if (isFull === undefined) isFull = false;\n    return !!isFull;\n}\n\nexport function now() {\n    return new Date().getTime();\n}\n\nexport const supportedWasm = (() => {\n    try {\n        if (typeof WebAssembly === \"object\"\n            && typeof WebAssembly.instantiate === \"function\") {\n            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module)\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n    } catch (e) {\n    }\n    return false;\n})();\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (!element) {\n        return\n    }\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\n\nexport function getStyle(element, key, numberType = true) {\n    if (!element) {\n        return 0\n    }\n\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        if (!isNumber(size)) {\n            return;\n        }\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n\nexport function downloadRecord(blob, name, suffix) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = (name || now()) + '.' + (suffix || FILE_SUFFIX.webm);\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport const env = '__ENV__';\nexport const version = '__VERSION__'\nexport const proVersionTime = '__BUILD_DAY__'\nexport const isDev = env === '\"development\"';\nexport const isProd = env === '\"production\"';\nexport const isRelease = env === '\"release\"';\nexport const experienceTimeout = '__TIMEOUT__';\n\nexport function isMobile() {\n    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isNoSleepMobile() {\n    return /(iphone|ipad|ipod|ios|android)/i.test(window.navigator.userAgent.toLowerCase())\n}\n\nexport function isPad() {\n    return (/ipad|android(?!.*mobile)|tablet|kindle|silk/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isPc() {\n    return !(isMobile() || isPad())\n}\n\nexport function isAndroid() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/android/i.test(UA));\n}\n\nexport function isFirefox() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/firefox/i.test(UA));\n}\n\nexport function getBrowser() {\n    const UserAgent = window.navigator.userAgent.toLowerCase() || '';\n    const browserInfo = {\n        type: '',\n        version: ''\n    };\n    const browserArray = {\n        IE: window.ActiveXObject || \"ActiveXObject\" in window, // IE\n        Chrome: UserAgent.indexOf('chrome') > -1 && UserAgent.indexOf('safari') > -1, // Chrome浏览器\n        Firefox: UserAgent.indexOf('firefox') > -1, // 火狐浏览器\n        Opera: UserAgent.indexOf('opera') > -1, // Opera浏览器\n        Safari: UserAgent.indexOf('safari') > -1 && UserAgent.indexOf('chrome') == -1, // safari浏览器\n        Edge: UserAgent.indexOf('edge') > -1, // Edge浏览器\n        QQBrowser: /qqbrowser/.test(UserAgent), // qq浏览器\n        WeixinBrowser: /MicroMessenger/i.test(UserAgent) // 微信浏览器\n    };\n    // console.log(browserArray)\n    for (let i in browserArray) {\n        if (browserArray[i]) {\n            let versions = '';\n            if (i === 'IE') {\n                const versionArray = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)\n                if (versionArray && versionArray.length > 2) {\n                    versions = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)[2];\n                }\n            } else if (i === 'Chrome') {\n                for (let mt in navigator.mimeTypes) {\n                    //检测是否是360浏览器(测试只有pc端的360才起作用)\n                    if (navigator.mimeTypes[mt]['type'] === 'application/360softmgrplugin') {\n                        i = '360';\n                    }\n                }\n                const versionArray = UserAgent.match(/chrome\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Firefox') {\n                const versionArray = UserAgent.match(/firefox\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Opera') {\n                const versionArray = UserAgent.match(/opera\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Safari') {\n                const versionArray = UserAgent.match(/version\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Edge') {\n                const versionArray = UserAgent.match(/edge\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'QQBrowser') {\n                const versionArray = UserAgent.match(/qqbrowser\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            }\n            browserInfo.type = i;\n            browserInfo.version = parseInt(versions);\n        }\n    }\n    return browserInfo;\n}\n\nexport function isIOS() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nexport function isSafari() {\n    const ua = window.navigator.userAgent;\n    return !ua.match(/Chrome/gi) && !!ua.match(/Safari/gi);\n}\n\nexport function isEdge() {\n    // new edge ua is like\n    // 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62'\n    const ua = window.navigator.userAgent;\n    return ua.indexOf('Edg') !== -1;\n}\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null\n    }\n    var format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n    var date;\n    if (typeof time === 'object') {\n        date = time\n    } else {\n        if (('' + time).length === 10) time = parseInt(time) * 1000;\n        time = +time; // 转成int 型\n        date = new Date(time)\n    }\n    var formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    var time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        var value = formatObj[key]\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]\n        if (result.length > 0 && value < 10) {\n            value = '0' + value\n        }\n        return value || 0\n    });\n    return time_str\n}\n\n// 是否支持 webcodecs\nexport function supportWCS() {\n    return \"VideoEncoder\" in window;\n}\n\nexport function wcsIsConfigSupported(config) {\n    return new Promise((resolve, reject) => {\n        if (!supportWCS()) {\n            return reject('VideoEncoder is not supported')\n        }\n\n        if (!VideoEncoder.isConfigSupported) {\n            return reject('VideoEncoder.isConfigSupported is not a function')\n        }\n\n        VideoEncoder.isConfigSupported(config).then((result) => {\n            if (result.supported) {\n                resolve()\n            } else {\n                reject('VideoEncoder.isConfigSupported() result is not supported');\n            }\n        })\n    })\n\n}\n\nexport function supportWasmUseVideoRender() {\n    return 'VideoFrame' in window;\n}\n\nexport function toNumber(value) {\n    if (typeof value !== 'string') {\n        return value;\n    } else {\n        // 转换成 number 类型\n        var parsed = Number(value);\n        return isNaN(parsed) ? value : parsed;\n    }\n}\n\nexport function uuid16() {\n    return 'xxxxxxxxxxxx4xxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\n\nexport function isDef(v) {\n    return v !== undefined && v !== null;\n}\n\nexport function formatVideoDecoderConfigure(avcC) {\n\n}\n\nexport function formatAvcVideoDecoderConfigure(avcC) {\n    let codecArray = avcC.subarray(1, 4);\n    let codecString = \"avc1.\";\n    for (let j = 0; j < 3; j++) {\n        let h = codecArray[j].toString(16);\n        if (h.length < 2) {\n            h = \"0\" + h\n        }\n        codecString += h\n    }\n    return {\n        codec: codecString,\n        description: avcC\n    }\n}\n\nexport function formatHevcVideoDecoderConfigure(hecvC) {\n    // The codec string begins with the prefix \"hev1.\" or \"hvc1.\", with a suffix of four dot-separated fields as described\n    // 'hvc1.2.4.L93.B0', //'hev1.1.6.H120.B0'\n    let codecArray = hecvC.subarray(1, 4);\n    //\n    // let codecString = \"hvc1.2.4.L93.B0\";\n    // hvc1.1.6.L120.90 这个是hls.js 用的编码格式。\n    let codecString = 'hev1.1.6.L120.90';\n    // for (let j = 0; j < 3; j++) {\n    //     let h = codecArray[j].toString(16);\n    //     if (h.length < 2) {\n    //         h = \"0\" + h\n    //     }\n    //     codecString += h\n    // }\n\n    return {\n        codec: codecString,\n        description: hecvC\n    }\n}\n\n\nexport function isFullScreen() {\n    // return document.isFullScreen || document.mozIsFullScreen || document.webkitIsFullScreen;\n    return screenfull.isFullscreen\n}\n\n//\nexport function bpsSize(value) {\n    if (null == value || value === '') {\n        return \"0 KB/s\";\n    }\n    let size = parseFloat(value);\n    size = size.toFixed(2);\n    return size + 'KB/s';\n}\n\nexport function bpsSize$2(value) {\n    if (null == value || value === '' || parseFloat(value) === 0 || value === 'NaN') {\n        return \"0 KB/s\";\n    }\n    const unitArr = [\"KB/s\", \"MB/s\", \"GB/s\", \"TB/s\", \"PB/s\", \"EB/s\", \"ZB/s\", \"YB/s\"];\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    let size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//\n    return size + (unitArr[index] || unitArr[0]);\n}\n\nexport function formatFileSize(value) {\n    if (null == value || value == '') {\n        return \"0 Bytes\";\n    }\n    const unitArr = new Array(\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\");\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    var size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//保留的小数位数\n    return size + unitArr[index];\n}\n\nexport function isNumber(value) {\n    const toString = Object.prototype.toString;\n    return toString.call(value) === \"[object Number]\";\n}\n\n\nexport function fpsStatus(fps, metaDataFps) {\n    let result = 3; // 流畅\n    const baseFps = metaDataFps || 25;\n    if (fps < (baseFps * 0.33)) {\n        result = 0;// 非常卡顿\n    } else if (fps < baseFps * 0.5) {\n        result = 1; // 卡顿\n    } else if (fps < baseFps * 0.83) {\n        result = 2; // 稍微卡顿\n    }\n\n    return result;\n}\n\nexport function createEmptyImageBitmap(width, height) {\n    const $canvasElement = document.createElement(\"canvas\");\n    $canvasElement.width = width;\n    $canvasElement.height = height;\n    const imageBitmap = window.createImageBitmap($canvasElement, 0, 0, width, height);\n    // release canvas\n    $canvasElement.width = 0;\n    $canvasElement.height = 0;\n    return imageBitmap;\n}\n\n\nexport function supportMSE() {\n    let result = false;\n    if ('MediaSource' in window && window.MediaSource.isTypeSupported(MP4_CODECS.avc)) {\n        result = true;\n    }\n    return result;\n}\n\n//\nexport function supportMSEDecodeHevc() {\n    let result = false;\n    if ('MediaSource' in window && window.MediaSource.isTypeSupported(MP4_CODECS.hev)) {\n        result = true;\n    }\n    return result;\n}\n\n// 查看是否webcodecs 支持 hevc解码\n// chrome 107\nexport function supportWCSDecodeHevc() {\n    const browserInfo = getBrowser();\n    return browserInfo.type.toLowerCase() === 'chrome' && browserInfo.version >= 107;\n}\n\nexport function supportMediaStreamTrack() {\n    let result = false;\n    if ('MediaStreamTrackGenerator' in window) {\n        result = true;\n    }\n    return result\n}\n\nexport function supportMediaStream() {\n    let result = false;\n    if ('MediaStream' in window) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function formatMp4VideoCodec(codec) {\n    return `video/mp4; codecs=\"${codec}\"`\n}\n\n\nexport function saveBlobToFile(fileName, blob) {\n    let url = window.URL.createObjectURL(blob);\n    let aLink = window.document.createElement('a');\n    aLink.download = fileName;\n    aLink.href = url;\n    //创建内置事件并触发\n    let evt = window.document.createEvent('MouseEvents');\n    evt.initEvent(\"click\", true, true); //initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为\n    aLink.dispatchEvent(evt);\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function isEmpty(value) {\n    return value === null || value === undefined\n}\n\nexport function isBoolean(value) {\n    return value === true || value === false;\n}\n\nexport function isNotEmpty(value) {\n    return !isEmpty(value)\n}\n\nexport function isUndefined(value) {\n    return value === undefined;\n}\n\nexport function initPlayTimes() {\n    return {\n        playInitStart: '', //1\n        playStart: '', // 2\n        streamStart: '', //3\n        streamResponse: '', // 4\n        demuxStart: '', // 5\n        decodeStart: '', // 6\n        videoStart: '', // 7\n        playTimestamp: '',// playStart- playInitStart\n        streamTimestamp: '',// streamStart - playStart\n        streamResponseTimestamp: '',// streamResponse - streamStart\n        demuxTimestamp: '', // demuxStart - streamResponse\n        decodeTimestamp: '', // decodeStart - demuxStart\n        videoTimestamp: '',// videoStart - decodeStart\n        allTimestamp: '' // videoStart - playInitStart\n    }\n}\n\nexport function formatWatermarkOptions(options) {\n    let defaultConfig = {\n        left: '',\n        right: '',\n        top: '',\n        bottom: '',\n        opacity: 1,\n        backgroundColor: '',\n        image: {\n            src: '',\n            width: '100',\n            height: '60'\n        },\n        text: {\n            content: '',\n            fontSize: '14',\n            color: '#000',\n            width: '',\n            height: ''\n        },\n        rect: {\n            color: 'green', // border color\n            lineWidth: 2,\n            width: '',\n            height: '',\n            fill: '', // fill color\n            fillOpacity: 0.2, // fill opacity\n        },\n        line: {\n            x1: '',\n            y1: '',\n            x2: '',\n            y2: '',\n            color: 'green',\n            lineWidth: 2\n        },\n        // 多边形\n        polygon: {\n            color: 'green',\n            lineWidth: 2,\n            list:[],\n            fill: '', // fill color\n            fillOpacity: 0.2, // fill opacity\n        },\n        html: ''\n    }\n    const imageConfig = Object.assign(defaultConfig.image, options.image || {})\n    const textConfig = Object.assign(defaultConfig.text, options.text || {})\n    const rectConfig = Object.assign(defaultConfig.rect, options.rect || {})\n    const lineConfig = Object.assign(defaultConfig.line, options.line || {})\n    defaultConfig = Object.assign(defaultConfig, options, {\n        image: imageConfig,\n        text: textConfig,\n        rect: rectConfig,\n        line: lineConfig\n    })\n\n    return defaultConfig;\n}\n\n\nexport function formatFullscreenWatermarkOptions(container, options) {\n    let defaultConfig = {\n        container: container || '',\n        text: '', // 文本\n        opacity: '',// 透明度\n        angle: '',// 倾斜角度\n        color: '',// 字体颜色\n        fontSize: '',// 字体大小\n        fontFamily: '',// 字体\n    }\n    defaultConfig = Object.assign(defaultConfig, options)\n    return {\n        watermark_parent_node: defaultConfig.container,\n        watermark_alpha: defaultConfig.opacity,\n        watermark_angle: defaultConfig.angle,\n        watermark_fontsize: defaultConfig.fontSize,\n        watermark_color: defaultConfig.color,\n        watermark_font: defaultConfig.fontFamily,\n        watermark_txt: defaultConfig.text,\n    }\n}\n\n// create watermark\nexport function createWatermark(watermarkList, container) {\n    let defaultConfigList = watermarkList.map((itemOptions) => {\n        return formatWatermarkOptions(itemOptions);\n    })\n    const $container = container;\n\n    if (!$container) {\n        return\n    }\n\n\n    let shadowRoot = null;\n    const otDiv = document.createElement('div');\n    otDiv.setAttribute('style', 'pointer-events: none !important; display: block !important');\n\n    if (typeof otDiv.attachShadow === \"function\") {\n        shadowRoot = otDiv.attachShadow({mode: 'open'});\n    } else if (otDiv.shadowRoot) {\n        shadowRoot = otDiv.shadowRoot;\n    } else {\n        shadowRoot = otDiv;\n    }\n\n    const nodeList = $container.children;\n    const index = Math.floor(Math.random() * (nodeList.length - 1));\n\n    if (nodeList[index]) {\n        $container.insertBefore(otDiv, nodeList[index]);\n    } else {\n        $container.appendChild(otDiv);\n    }\n    // foreach\n    defaultConfigList.forEach((defaultConfig) => {\n        const maskDiv = document.createElement('div');\n        let innerDom = null;\n        if (defaultConfig.image && defaultConfig.image.src) {\n            innerDom = document.createElement('img');\n            innerDom.style.height = '100%';\n            innerDom.style.width = '100%';\n            innerDom.style.objectFit = 'contain';\n            innerDom.src = defaultConfig.image.src;\n        } else if (defaultConfig.text && defaultConfig.text.content) {\n            innerDom = document.createTextNode(defaultConfig.text.content);\n        } else if (defaultConfig.rect && defaultConfig.rect.color && defaultConfig.rect.width) {\n            innerDom = document.createElement('div');\n        } else if (defaultConfig.html) {\n            innerDom = document.createElement('div');\n        }\n\n        if (innerDom) {\n            maskDiv.appendChild(innerDom);\n\n            maskDiv.style.visibility = '';\n            maskDiv.style.position = \"absolute\";\n            maskDiv.style.display = 'block'\n            maskDiv.style['-ms-user-select'] = \"none\";\n            maskDiv.style['-moz-user-select'] = \"none\";\n            maskDiv.style['-webkit-user-select'] = \"none\";\n            maskDiv.style['-o-user-select'] = \"none\";\n            maskDiv.style['user-select'] = \"none\";\n            maskDiv.style['-webkit-touch-callout'] = \"none\";\n            maskDiv.style['-webkit-tap-highlight-color'] = \"rgba(0,0,0,0)\";\n            maskDiv.style['-webkit-text-size-adjust'] = \"none\";\n            maskDiv.style['-webkit-touch-callout'] = \"none\";\n            maskDiv.style.opacity = defaultConfig.opacity;\n            if (isNumber(defaultConfig.left)) {\n                maskDiv.style.left = defaultConfig.left + 'px';\n            }\n            if (isNumber(defaultConfig.right)) {\n                maskDiv.style.right = defaultConfig.right + 'px';\n            }\n            if (isNumber(defaultConfig.top)) {\n                maskDiv.style.top = defaultConfig.top + 'px';\n            }\n            if (isNumber(defaultConfig.bottom)) {\n                maskDiv.style.bottom = defaultConfig.bottom + 'px';\n            }\n            if (defaultConfig.backgroundColor) {\n                maskDiv.style.backgroundColor = defaultConfig.backgroundColor;\n            }\n            maskDiv.style.overflow = 'hidden';\n            maskDiv.style.zIndex = \"9999999\";\n            if (defaultConfig.image && defaultConfig.image.src) {\n                maskDiv.style.width = defaultConfig.image.width + 'px';\n                maskDiv.style.height = defaultConfig.image.height + 'px';\n            } else if (defaultConfig.text && defaultConfig.text.content) {\n                maskDiv.style.fontSize = defaultConfig.text.fontSize + 'px';\n                maskDiv.style.color = defaultConfig.text.color;\n            } else if (defaultConfig.rect && defaultConfig.rect.color && defaultConfig.rect.width) {\n                maskDiv.style.width = defaultConfig.rect.width + 'px';\n                maskDiv.style.height = defaultConfig.rect.height + 'px';\n                maskDiv.style.borderWidth = defaultConfig.rect.lineWidth + 'px';\n                maskDiv.style.borderStyle = 'solid';\n                maskDiv.style.borderColor = defaultConfig.rect.color;\n            } else if (defaultConfig.html) {\n                maskDiv.innerHTML = defaultConfig.html;\n                maskDiv.style.width = defaultConfig.width + 'px';\n                maskDiv.style.height = defaultConfig.height + 'px';\n            }\n\n            shadowRoot.appendChild(maskDiv)\n        }\n    })\n\n\n    // remove function\n    return () => {\n        $container.removeChild(otDiv);\n    }\n}\n\n// create image watermark\nexport function createImageWatermark(dataUrl, options) {\n    return new Promise((resolve, reject) => {\n        let defaultConfig = formatWatermarkOptions(options);\n\n        if (!defaultConfig.image.src && !defaultConfig.text.content) {\n            return resolve(dataUrl);\n        }\n\n\n        let canvas = document.createElement('canvas')\n        canvas.width = options.width;\n        canvas.height = options.height;\n        let ctx = canvas.getContext('2d')\n        let x = 0;\n        let y = 0;\n        if (isNumber(defaultConfig.left)) {\n            x = defaultConfig.left;\n        } else if (isNumber(defaultConfig.right)) {\n            x = canvas.width - defaultConfig.right\n        }\n\n        if (isNumber(defaultConfig.top)) {\n            y = defaultConfig.top;\n        } else if (isNumber(defaultConfig.bottom)) {\n            y = canvas.height - defaultConfig.bottom;\n        }\n        const imag = new Image();\n        imag.src = dataUrl;\n        imag.onload = () => {\n            ctx.drawImage(imag, 0, 0);\n            if (defaultConfig.image && defaultConfig.image.src) {\n                const tempImage = new Image();\n                tempImage.src = defaultConfig.image.src;\n                tempImage.setAttribute(\"crossOrigin\", 'Anonymous')\n                tempImage.onload = () => {\n                    x -= defaultConfig.image.width;\n                    // y -= defaultConfig.image.height;\n                    ctx.drawImage(tempImage, x, y, defaultConfig.image.width, defaultConfig.image.height);\n                    resolve(canvas.toDataURL(options.format, options.quality));\n                }\n                tempImage.onerror = (e) => {\n                    reject();\n                }\n            } else if (defaultConfig.text && defaultConfig.text.content) {\n                // 设置填充字号和字体，样式\n                ctx.font = defaultConfig.text.fontSize + \"px 宋体\";\n                // color\n                ctx.fillStyle = defaultConfig.text.color;\n                // 设置右对齐\n                ctx.textAlign = 'right';\n                // 在指定位置绘制文字，这里指定距离右下角20坐标的地方\n                ctx.fillText(defaultConfig.text.content, x, y)\n                resolve(canvas.toDataURL(options.format, options.quality))\n            }\n        }\n\n        imag.onerror = (e) => {\n            reject(e)\n        }\n    })\n}\n\nexport function formatTimeTips(time) {\n    var result;\n\n    //\n    if (time > -1) {\n        var hour = Math.floor(time / 3600);\n        var min = Math.floor(time / 60) % 60;\n        var sec = time % 60;\n\n        sec = Math.round(sec);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + \":\";\n        if (sec < 10) {\n            result += \"0\";\n        }\n        result += sec.toFixed(0);\n    }\n\n    return result;\n}\n\n\n//\nexport function createVideoFrame(arrayBuffer, init) {\n    return new VideoFrame(arrayBuffer, init)\n}\n\n\nexport function getLocationSearch() {\n    var url = window.location.search; //获取url中\"?\"符后的字串\n    var theRequest = {};\n    if (url.indexOf(\"?\") != -1) {\n        var str = url.substr(1);\n        var strs = str.split(\"&\");\n        for (var i = 0; i < strs.length; i++) {\n            theRequest[strs[i].split(\"=\")[0]] = unescape(strs[i].split(\"=\")[1]);\n        }\n    }\n    return theRequest;\n};\n\n// min timestamp\nexport function formatMinTimeTips(time, second) {\n    let result = '';\n\n    //\n    if (time > -1) {\n        const hour = Math.floor(time / 60) % 60;\n        let min = time % 60;\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min;\n\n        if (!isEmpty(second)) {\n            if (second < 10) {\n                second = '0' + second;\n            }\n            result += (':' + second);\n        }\n    }\n\n    return result;\n}\n\n// second timestamp\nexport function formatSecondTimeTips(time) {\n    let result = '';\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + ':';\n\n        if (second < 10) {\n            result += '0'\n        }\n        result += second\n    }\n\n    return result;\n}\n\n\nexport function formatSecondTime(time) {\n    let result = {};\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n        result = {\n            hour,\n            min,\n            second\n        }\n    }\n\n    return result;\n}\n\n/**\n *\n * @param time\n */\nexport function formatMinuteTimestamp(day, time) {\n    const hour = Math.floor(time / 60) % 60;\n    const min = Math.floor(time % 60);\n    const nowMinuteTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        0,\n        0\n    );\n    return nowMinuteTimestamp;\n}\n\nexport function formatSecondTimestamp(day, time) {\n    const hour = Math.floor(time / 60 / 60) % 60;\n    const min = Math.floor(time / 60) % 60;\n    const second = time % 60\n    const nowSecondTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        second,\n        0\n    );\n    return nowSecondTimestamp;\n}\n\nexport function getStrLength(value) {\n    return ('' + value).length\n}\n\n\nexport function isEmptyObject(obj) {\n    return (obj && Object.keys(obj).length === 0)\n}\n\nexport function isNotEmptyObject(obj) {\n    return !isEmptyObject(obj);\n}\n\n\nexport function isString(value) {\n    return typeof value === \"string\";\n}\n\n\nexport function isSupportSIMD() {\n    return WebAssembly.validate(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 5, 1, 96, 0, 1, 123, 3, 2, 1, 0, 10, 10, 1, 8, 0, 65, 0, 253, 15, 253, 98, 11]));\n}\n\nexport function isSupportSharedArrayBuffer() {\n    return typeof SharedArrayBuffer !== 'undefined';\n}\n\n\nexport const isWeChat = () => {\n    const userAgent = window.navigator.userAgent;\n    return /MicroMessenger/i.test(userAgent)\n};\n\nexport const isChrome = () => {\n    const userAgent = window.navigator.userAgent;\n    return /Chrome/i.test(userAgent)\n}\n\n//\nexport const isWeChatInAndroid = () => {\n    return isWeChat() && isAndroid();\n}\n\nexport function isChromeInIOS() {\n    return isChrome() && isIOS();\n}\n\nexport const isWeChatInIOS = () => {\n    return isWeChat() && isIOS();\n}\n\nexport const isMobileOrPad = () => {\n    return isMobile() || isPad();\n}\n\n\nexport function getTarget(e) {\n    const event = e || window.event;\n    const target = event.target || event.srcElement;\n    return target;\n}\n\nconst _mime = function (option, value) {\n    const mimeTypes = navigator.mimeTypes;\n    for (let mt in mimeTypes) {\n        if (mimeTypes[mt][option] == value) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport function isWindow() {\n    let isWindows = false;\n    const agent = navigator.userAgent.toLowerCase();\n    const isMac = /macintosh|mac os x/i.test(agent);\n    if (agent.indexOf(\"win32\") >= 0 || agent.indexOf(\"wow32\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (agent.indexOf(\"win64\") >= 0 || agent.indexOf(\"wow64\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (isMac) {\n        //your code\n        isWindows = false;\n    }\n\n    return isWindows;\n}\n\nexport function isMacOs() {\n    const userAgent = navigator.userAgent.toLowerCase();\n    return /macintosh|mac os x/i.test(userAgent);\n}\n\nexport function isMacOsFirefox() {\n    return isFirefox() && isMacOs();\n}\n\nexport function isWindow360() {\n    const userAgent = window.navigator.userAgent;\n    let is360 = userAgent.indexOf('QihooBrowser') > -1 ||\n        userAgent.indexOf('QHBrowser') > -1 ||\n        userAgent.indexOf('360EE') > -1 ||\n        userAgent.indexOf('360SE') > -1;\n\n    if (!is360) {\n        if (window.chrome) {\n            const chrome_version = userAgent.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\n            if (_mime(\"type\", \"application/360softmgrplugin\") || _mime(\"type\", \"application/mozilla-npqihooquicklogin\")) {\n                is360 = true;\n            } else if (chrome_version > 36 && window.showModalDialog) {\n                is360 = true;\n            } else if (chrome_version > 45) {\n                is360 = _mime(\"type\", \"application/vnd.chromium.remoting-viewer\");\n                if (!is360 && chrome_version >= 69) {\n                    is360 = _mime(\"type\", \"application/hwepass2001.installepass2001\") || _mime(\"type\", \"application/asx\");\n                }\n            }\n        }\n    }\n\n    return is360 && isWindow();\n}\n\n\nexport function isFunction(fn) {\n    return typeof fn === \"function\"\n}\n\n\nexport function isSupportOfflineAudioContext() {\n    let offlineAudioContext = new OfflineAudioContext(1, 1, 44100);\n    return Boolean(offlineAudioContext.audioWorklet && typeof offlineAudioContext.audioWorklet.addModule == \"function\")\n}\n\n\nexport function isWebglRenderSupport(width) {\n    return (width / 2) % 4 === 0\n}\n\n/**\n * is green yuv\n * @param arrayBuffer\n * @returns {boolean}\n */\nexport function isGreenYUV(arrayBuffer) {\n    let zeroNum = 0;\n    for (let i = 0; i < arrayBuffer.length; i++) {\n        let temp = arrayBuffer[i];\n        if (temp === 0) {\n            zeroNum += 1\n        }\n    }\n    const isGreen = zeroNum === arrayBuffer.length;\n    if (isGreen) {\n        console.log('green yuv', arrayBuffer)\n    }\n    return isGreen\n}\n\n/**\n *\n * @param event\n * @returns {{posX: number, posY: number}}\n */\nexport function getMousePosition(event) {\n    if (isMobile()) {\n        let clientX = 0;\n        let clientY = 0;\n        if (event.touches.length === 1) {\n            let clientObject = event.touches[0];\n            clientX = clientObject.clientX;\n            clientY = clientObject.clientY;\n        }\n        return {\n            posX: clientX,\n            posY: clientY\n        }\n    }\n    let posX = 0;\n    let posY = 0;\n    const e = event || window.event;  //标准化事件对象\n    if (e.pageX || e.pageY) {  //获取鼠标指针的当前坐标值\n        posX = e.pageX;\n        posY = e.pageY;\n    } else if (e.clientX || e.clientY) {\n        posX = event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;\n        posY = event.clientY + document.documentElement.scrollTop + document.body.scrollTop;\n    }\n    return {\n        posX,\n        posY\n    }\n}\n\nexport function canPlayAppleMpegurl() {\n    let video = document.createElement('video');\n    let result = video.canPlayType('application/vnd.apple.mpegurl')\n    video = null;\n    return result;\n}\n\n\nexport function isSupportGetUserMedia() {\n    let result = false;\n    const navigator = window.navigator;\n\n    if (navigator) {\n        result = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)\n\n        if (!result) {\n            result = !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)\n        }\n    }\n\n    return result;\n}\n\nexport function onlyMseOrWcsVideo(opt) {\n    let result = (isFalse(opt.hasAudio) &&\n            (opt.useMSE || (opt.useWCS && !opt.useOffscreen))) &&\n        isFalse(opt.demuxUseWorker)\n\n    if (isFalse(result) &&\n        (opt.useMSE && opt.mseDecodeAudio && isFalse(opt.demuxUseWorker))) {\n        return true\n    }\n\n    return result\n}\n\nexport function checkNaluType(naluBuffer) {\n    let result = null;\n    let type = naluBuffer[0] & 0b0001_1111;\n    if (type === H264_NAL_TYPE.sps || type === H264_NAL_TYPE.pps) {\n        result = VIDEO_ENC_TYPE_SHOW.h264;\n    }\n    if (!result) {\n        type = (naluBuffer[0] & 0x7E) >> 1;\n        if (type === H265_NAL_TYPE.vps || type === H265_NAL_TYPE.sps || type === H265_NAL_TYPE.pps) {\n            result = VIDEO_ENC_TYPE_SHOW.h265;\n        }\n    }\n\n    return result;\n}\n\n\nexport function checkAudioNaluType(naluBuffer) {\n    let result = null;\n    const codecId = naluBuffer[0] >> 4;\n\n    if (isAacCodecPacket(naluBuffer)) {\n        result = AUDIO_ENC_CODE_SHOW.AAC\n    } else if (codecId === AUDIO_ENC_CODE.ALAW) {\n        result = AUDIO_ENC_CODE_SHOW.ALAW\n    } else if (codecId === AUDIO_ENC_CODE.MULAW) {\n        result = AUDIO_ENC_CODE_SHOW.MULAW\n    }\n\n    return result;\n}\n\n\nexport function createWorkletModuleUrl(func) {\n\n    function functionToString(str) {\n        return str.trim().match(/^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/)[1]\n    }\n\n    const funcStr = functionToString(func.toString());\n    const blob = new Blob([funcStr], {type: 'application/javascript'});\n    return URL.createObjectURL(blob);\n}\n\nexport function supportWritableStream() {\n    return typeof WritableStream !== 'undefined';\n}\n\n\nexport function closeVideoFrame(videoFrame) {\n    videoFrame.close()\n}\n\nexport function isInHttps() {\n    return window.location.protocol === 'https:' || window.location.hostname === 'localhost';\n}\n\nexport function errorToString(error) {\n    const nativeToString = Object.prototype.toString;\n\n    function isErrorLike(error) {\n        switch (nativeToString.call(error)) {\n            case '[object Error]':\n                return true;\n            case '[object Exception]':\n                return true;\n            case '[object DOMException]':\n                return true;\n            default:\n                try {\n                    return error instanceof Error;\n                } catch (e) {\n                    return false;\n                }\n        }\n    }\n\n    if (isErrorLike(error)) {\n        return error.message;\n    } else {\n        return error == null\n            ? '' :\n            typeof error === 'object'\n                ? JSON.stringify(error, null, 2)\n                : String(error)\n    }\n}\n\n\nexport function isInSampleHost(url) {\n    let result = false;\n\n\n    return result;\n}\n\n\nexport function calcStreamFpsByBufferList(bufferList, type) {\n\n    if (type) {\n        bufferList = bufferList.filter(item => item.type && item.type === type)\n    }\n\n    let firstItem = bufferList[0];\n    let oneSecondLength = null;\n    let nextIndex = 1;\n    if (bufferList.length > 0) {\n        let nextItem = bufferList[1];\n        if (nextItem && nextItem.ts - firstItem.ts > 100000) {\n            firstItem = nextItem;\n            nextIndex = 2;\n        }\n    }\n\n    if (firstItem) {\n        // next start\n        for (let i = nextIndex; i < bufferList.length; i++) {\n            let tempItem = bufferList[i];\n            if (type && tempItem.type && tempItem.type !== type) {\n                tempItem = null;\n            }\n            if (tempItem) {\n                const diff = tempItem.ts - firstItem.ts;\n                if (diff >= 1000) {\n                    const prevTempItem = bufferList[i - 1];\n                    const diff2 = prevTempItem.ts - firstItem.ts;\n                    if (diff2 < 1000) {\n                        oneSecondLength = i + 1;\n                    }\n                }\n            }\n        }\n    }\n\n    return oneSecondLength;\n}\n\n\nexport function isFetchSuccess(res) {\n    return (res.ok && (res.status >= 200 && res.status <= 299))\n}\n\n// stroke rect or text in canvas\nexport function strokeRectOrTextInCanvas({ctx, list}) {\n    ctx.save();\n    (list || []).forEach(item => {\n        if (item.type === 'text') {\n            ctx.font = `${item.fontSize || 12}px Arial`;\n            ctx.fillStyle = item.color || 'green';\n            ctx.fillText(item.text, item.x, item.y);\n        } else if (item.type === 'rect') {\n            ctx.strokeStyle = item.color || 'green';\n            ctx.lineWidth = item.lineWidth || 2;\n            ctx.strokeRect(item.x, item.y, item.width, item.height);\n        }\n    })\n    ctx.restore();\n}\n\nexport function hexToRgba(hex) {\n    const r = parseInt(hex.substring(1, 3), 16) / 255;\n    const g = parseInt(hex.substring(3, 5), 16) / 255;\n    const b = parseInt(hex.substring(5, 7), 16) / 255;\n    return [r, g, b, 1.0];\n}\n\nexport function createTransformMatrix(width, height) {\n    return [\n        2 / width, 0, 0,\n        0, -2 / height, 0,\n        -1, 1, 1\n    ];\n}\n\n\n// stroke text in canvas\nexport function strokeTextInCanvas({ctx, color, fontSize, text, x, y}) {\n    ctx.save();\n    ctx.font = `${fontSize || 12}px Arial`;\n    ctx.fillStyle = color || 'green';\n    ctx.fillText(text, x, y);\n    ctx.restore();\n}\n\n\nexport function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n\nexport function getUrlRelativePath(href) {\n    const url = href || document.location.toString();\n    const arrUrl = url.split(\"//\");\n\n    const start = arrUrl[1].indexOf(\"/\");\n    let relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符\n\n    if (relUrl.indexOf(\"?\") != -1) {\n        relUrl = relUrl.split(\"?\")[0];\n    }\n    return relUrl;\n}\n\nexport function base64Decode(data) {\n    const utf8Decode = function (str_data) {\n        var tmp_arr = [], i = 0, ac = 0, c1 = 0, c2 = 0, c3 = 0;\n        // 变成string类型\n        str_data += '';\n\n        while (i < str_data.length) {\n            c1 = str_data.charCodeAt(i);\n            if (c1 < 128) {\n                tmp_arr[ac++] = String.fromCharCode(c1);\n                i++;\n            } else if (c1 > 191 && c1 < 224) {\n                c2 = str_data.charCodeAt(i + 1);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n                i += 2;\n            } else {\n                c2 = str_data.charCodeAt(i + 1);\n                c3 = str_data.charCodeAt(i + 2);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                i += 3;\n            }\n        }\n\n        return tmp_arr.join('');\n    };\n\n    const b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = \"\", tmp_arr = [];\n    if (!data) {\n        return data;\n    }\n    data += '';\n    do {\n        h1 = b64.indexOf(data.charAt(i++));\n        h2 = b64.indexOf(data.charAt(i++));\n        h3 = b64.indexOf(data.charAt(i++));\n        h4 = b64.indexOf(data.charAt(i++));\n        bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n        o1 = bits >> 16 & 0xff;\n        o2 = bits >> 8 & 0xff;\n        o3 = bits & 0xff;\n        if (h3 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1);\n        } else if (h4 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2);\n        } else {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n        }\n    } while (i < data.length);\n    dec = tmp_arr.join('');\n    dec = utf8Decode(dec);\n    return dec;\n}\n\nexport function b64toUin8(base64String) {\n    var padding = '='.repeat((4 - base64String.length % 4) % 4);\n    var base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    var rawData = window.atob(base64);\n    var outputArray = new Uint8Array(rawData.length);\n\n    for (var i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n}\n\nexport function base64ToString(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    let result = '';\n\n    for (let i = 0; i < rawData.length; ++i) {\n        result += rawData.charCodeAt(i);\n    }\n    return result;\n}\n\n\nexport function resolveUrl(url) {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let href = url;\n\n    if (msie) {\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n    }\n\n    urlParsingNode.setAttribute('href', href);\n\n\n    return {\n        origin: urlParsingNode.origin,\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n    };\n}\n\n\nexport function uuid4() {\n    return 'xxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function clone(obj) {\n    let result = '';\n    //\n    if (typeof obj === 'object') {\n        try {\n            result = JSON.stringify(obj);\n            result = JSON.parse(result);\n        } catch (e) {\n            result = obj;\n        }\n    } else {\n        result = obj;\n    }\n\n    return result;\n}\n\n/**\n *\n * @returns {object:DEFAULT_JESSIBUCA_OPTIONS}\n */\nexport function getDefaultJessibucaOptions() {\n    return clone(DEFAULT_JESSIBUCA_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_PLAYER_OPTIONS}\n */\nexport function getDefaultPlayerOptions() {\n    return clone(DEFAULT_PLAYER_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_TALK_OPTIONS}\n */\nexport function getDefaultTalkOptions() {\n    return clone(DEFAULT_TALK_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:CONTROL_BUTTON_OPTIONS}\n */\nexport function getDefaultButtonOptions() {\n    return clone(CONTROL_BUTTON_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:MENU_ITEM_OPTIONS}\n */\nexport function getDefaultMenuOptions() {\n    return clone(MENU_ITEM_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:DEFAULT_MULTI_OPTIONS}\n */\nexport function getDefaultMultiOptions() {\n    return clone(DEFAULT_MULTI_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_AUDIO_PLAYER_OPTIONS}\n */\nexport function getDefaultAudioPlayerOptions() {\n    return clone(DEFAULT_AUDIO_PLAYER_OPTIONS);\n}\n\n\nexport function base64ToBlob(base64Data) {\n    const byteString = atob(base64Data.split(\",\")[1]);\n    const mimeType = base64Data.match(/:(.*?);/)[1];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], {type: mimeType});\n}\n\nexport function createCanvasImage(base64Data) {\n    return new Promise((resolve, reject) => {\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n\n        const image = new Image();\n        image.onload = () => {\n            canvas.width = image.width;\n            canvas.height = image.height;\n            context.drawImage(image, 0, 0);\n            const posterUrl = canvas.toDataURL(\"image/png\");\n            // clear\n            context.clearRect(0, 0, canvas.width, canvas.height);\n            canvas.width = 0;\n            canvas.height = 0;\n            //\n            resolve(posterUrl);\n        };\n        image.onerror = (e) => {\n            reject(e)\n        }\n        image.src = base64Data;\n    })\n}\n\n\nexport function isVideoSequenceHeader(payload) {\n    return (payload[0] >> 4) === FRAME_TYPE.keyFrame && payload[1] === AVC_PACKET_TYPE.sequenceHeader;\n}\n\n\nexport function isTrue(value) {\n    return value === true || value === 'true';\n}\n\nexport function isFalse(value) {\n    return value !== true && value !== 'true';\n}\n\nexport function isWebGpuSupport() {\n    let result = false;\n    if ('gpu' in navigator) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function toString(value) {\n    return value == null ? '' : '' + value;\n\n}\n\nexport function sleep(t = 0) {\n    return new Promise((resolve) => setTimeout(resolve, t))\n}\n\n\nexport function setElementDataset(element, key, value) {\n    if (!element) {\n        return;\n    }\n\n    if (element.dataset) {\n        element.dataset[key] = value;\n    } else {\n        element.setAttribute('data-' + key, value);\n    }\n}\n\nexport function getElementDataset(element, key) {\n    if (!element) {\n        return '';\n    }\n\n    if (element.dataset) {\n        return element.dataset[key];\n    }\n    return element.getAttribute('data-' + key);\n}\n\nexport function removeElementDataset(element, key) {\n    if (!element) {\n        return;\n    }\n\n    if (element.dataset) {\n        delete element.dataset[key];\n    } else {\n        element.removeAttribute('data-' + key);\n    }\n}\n\nexport function convertToCamelCase(str) {\n    return str.replace(/-([a-z])/g, function (match, letter) {\n        return letter.toUpperCase();\n    });\n}\n\n\nexport function isHlsSupported() {\n\n}\n\n//  是否iphone 手机端\nexport function isIphone() {\n    return /iphone/i.test(navigator.userAgent);\n}\n\n//\nexport function getPerformanceMemory() {\n    if (window.performance && window.performance.memory) {\n        return window.performance.memory;\n    }\n    return null;\n}\n\n\nexport function arraysEqual(array1, array2) {\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (let i = 0; i < array1.length; i++) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function getArrayBufferBytes(arrayBuffer, start, end) {\n    const result = [];\n    for (let i = start; i < end; i++) {\n        result.push(arrayBuffer[i]);\n    }\n    return result;\n}\n\n\nexport function dropSpecialMp4Box(arrayBuffer) {\n    const newBuffer = new Uint8Array(32);\n    newBuffer.set(arrayBuffer.slice(arrayBuffer.byteLength - 32));\n    const tempBuffer = getArrayBufferBytes(newBuffer, 4, 8);\n    if (arraysEqual([101, 103, 119, 99], tempBuffer)) {\n        return arrayBuffer.slice(0, arrayBuffer.byteLength - 32);\n    }\n\n    return arrayBuffer;\n}\n\n\nexport function isWebGL2Supported() {\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(\n            window.WebGL2RenderingContext &&\n            canvas.getContext('webgl2')\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\n\nexport function isWebGLSupported() {\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(\n            window.WebGLRenderingContext &&\n            (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\nexport function function2String(fun) {\n    return fun.trim().match(/^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/)[1]\n}\n\n\nexport function supportVideoFrameCallback() {\n    let result = false;\n    if (\"requestVideoFrameCallback\" in HTMLVideoElement.prototype) {\n        result = true;\n    }\n\n    return result;\n}\n\n//\nexport function blobToArrayBuffer(blob) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = function (e) {\n            resolve(e.target.result);\n        }\n        reader.onerror = function (e) {\n            reject(e);\n        }\n        reader.readAsArrayBuffer(blob);\n    })\n}\n\n\n/**\n * 将一帧图像划分为两部分，上下各一半；然后在其中一般随机选择10*10的部分进行检测，如果检测到绿色像素点超过200个，则认为是绿屏\n * @param arraybuffer\n * @param width\n * @param height\n * @returns {boolean}\n */\nexport function checkGreenScreen(arraybuffer, width, height) {\n    if (!arraybuffer || width <= 0 || height <= 0) {\n        return true;\n    }\n    const x1 = Math.random() % (width - 9);\n    const y1 = Math.random() % (height / 2 - 9);\n\n    const x2 = Math.random() % (width - 9);\n    const y2 = Math.random() % (height / 2 - 9) + height / 2;\n\n    let zeroCount = 0;\n    for (let j = y1; j < y1 + 10; j++) {\n        for (let i = x1; i < x1 + 10; i++) {\n            const index = j * width + i;\n            if (arraybuffer[index] === 0) {\n                zeroCount += 1;\n            }\n        }\n    }\n\n    for (let j = y2; j < y2 + 10; j++) {\n        for (let i = x2; i < x2 + 10; i++) {\n            const index = j * width + i;\n            if (arraybuffer[index] === 0) {\n                zeroCount += 1;\n            }\n        }\n    }\n\n    if (zeroCount > 200) {\n        return true;\n    }\n\n    return false;\n}\n\n\nexport function supportPressureObserver() {\n    let result = false;\n    //  or use 'globalThis' support\n    if ('PressureObserver' in window) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function removeMaxAndMin(arr) {\n    // 寻找最大值和最小值\n    const max = Math.max(...arr);\n    const min = Math.min(...arr);\n\n    // 使用filter过滤掉最大值和最小值\n    // 注意：这将仅删除第一个遇到的最大值和最小值\n    return arr.filter(value => value !== max && value !== min);\n}\n","export default class Resampler {\n    constructor(options) {\n        const {fromSampleRate, toSampleRate, channels, inputBufferSize} = options;\n\n        if (!fromSampleRate || !toSampleRate || !channels) {\n            throw(new Error(\"Invalid settings specified for the resampler.\"));\n        }\n        this.resampler = null;\n        this.fromSampleRate = fromSampleRate;\n        this.toSampleRate = toSampleRate;\n        this.channels = channels || 0;\n        this.inputBufferSize = inputBufferSize;\n        this.initialize()\n    }\n\n    initialize() {\n        if (this.fromSampleRate == this.toSampleRate) {\n\n            // Setup resampler bypass - Resampler just returns what was passed through\n            this.resampler = (buffer) => {\n                return buffer\n            };\n            this.ratioWeight = 1;\n\n        } else {\n\n            if (this.fromSampleRate < this.toSampleRate) {\n\n                // Use generic linear interpolation if upsampling,\n                // as linear interpolation produces a gradient that we want\n                // and works fine with two input sample points per output in this case.\n                this.linearInterpolation();\n                this.lastWeight = 1;\n\n            } else {\n\n                // Custom resampler I wrote that doesn't skip samples\n                // like standard linear interpolation in high downsampling.\n                // This is more accurate than linear interpolation on downsampling.\n                this.multiTap();\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n\n            // Initialize the internal buffer:\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n    }\n\n    bufferSlice(sliceAmount) {\n\n        //Typed array and normal array buffer section referencing:\n        try {\n            return this.outputBuffer.subarray(0, sliceAmount);\n        } catch (error) {\n            try {\n                //Regular array pass:\n                this.outputBuffer.length = sliceAmount;\n                return this.outputBuffer;\n            } catch (error) {\n                //Nightly Firefox 4 used to have the subarray function named as slice:\n                return this.outputBuffer.slice(0, sliceAmount);\n            }\n        }\n    }\n\n    initializeBuffers() {\n        this.outputBufferSize = (Math.ceil(this.inputBufferSize * this.toSampleRate / this.fromSampleRate / this.channels * 1.000000476837158203125) + this.channels) + this.channels;\n        try {\n            this.outputBuffer = new Float32Array(this.outputBufferSize);\n            this.lastOutput = new Float32Array(this.channels);\n        } catch (error) {\n            this.outputBuffer = [];\n            this.lastOutput = [];\n        }\n    }\n\n    linearInterpolation() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                channels = this.channels,\n                outLength,\n                ratioWeight,\n                weight,\n                firstWeight,\n                secondWeight,\n                sourceOffset,\n                outputOffset,\n                outputBuffer,\n                channel;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            ratioWeight = this.ratioWeight;\n            weight = this.lastWeight;\n            firstWeight = 0;\n            secondWeight = 0;\n            sourceOffset = 0;\n            outputOffset = 0;\n            outputBuffer = this.outputBuffer;\n\n            for (; weight < 1; weight += ratioWeight) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                this.lastWeight = weight % 1;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (this.lastOutput[channel] * firstWeight) + (buffer[channel] * secondWeight);\n                }\n            }\n            weight -= 1;\n            for (bufferLength -= channels, sourceOffset = Math.floor(weight) * channels; outputOffset < outLength && sourceOffset < bufferLength;) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (buffer[sourceOffset + ((channel > 0) ? (channel) : 0)] * firstWeight) + (buffer[sourceOffset + (channels + channel)] * secondWeight);\n                }\n                weight += ratioWeight;\n                sourceOffset = Math.floor(weight) * channels;\n            }\n            for (channel = 0; channel < channels; ++channel) {\n                this.lastOutput[channel] = buffer[sourceOffset++];\n            }\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    multiTap() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                outLength,\n                output_variable_list,\n                channels = this.channels,\n                ratioWeight,\n                weight,\n                channel,\n                actualPosition,\n                amountToNext,\n                alreadyProcessedTail,\n                outputBuffer,\n                outputOffset,\n                currentPosition;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            output_variable_list = [];\n            ratioWeight = this.ratioWeight;\n            weight = 0;\n            actualPosition = 0;\n            amountToNext = 0;\n            alreadyProcessedTail = !this.tailExists;\n            this.tailExists = false;\n            outputBuffer = this.outputBuffer;\n            outputOffset = 0;\n            currentPosition = 0;\n\n            for (channel = 0; channel < channels; ++channel) {\n                output_variable_list[channel] = 0;\n            }\n\n            do {\n                if (alreadyProcessedTail) {\n                    weight = ratioWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = 0;\n                    }\n                } else {\n                    weight = this.lastWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = this.lastOutput[channel];\n                    }\n                    alreadyProcessedTail = true;\n                }\n                while (weight > 0 && actualPosition < bufferLength) {\n                    amountToNext = 1 + actualPosition - currentPosition;\n                    if (weight >= amountToNext) {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition++] * amountToNext;\n                        }\n                        currentPosition = actualPosition;\n                        weight -= amountToNext;\n                    } else {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition + ((channel > 0) ? channel : 0)] * weight;\n                        }\n                        currentPosition += weight;\n                        weight = 0;\n                        break;\n                    }\n                }\n\n                if (weight === 0) {\n                    for (channel = 0; channel < channels; ++channel) {\n                        outputBuffer[outputOffset++] = output_variable_list[channel] / ratioWeight;\n                    }\n                } else {\n                    this.lastWeight = weight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        this.lastOutput[channel] = output_variable_list[channel];\n                    }\n                    this.tailExists = true;\n                    break;\n                }\n            } while (actualPosition < bufferLength && outputOffset < outLength);\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    resample(buffer) {\n        if (this.fromSampleRate == this.toSampleRate) {\n            this.ratioWeight = 1;\n        } else {\n            if (this.fromSampleRate < this.toSampleRate) {\n                this.lastWeight = 1;\n            } else {\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n        return this.resampler(buffer)\n    }\n}\n","/**\n * 将无符号Float32Array数组转化成有符号的Int16Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int16Array} singed int16\n */\nexport function floatTo16BitPCM(input) {\n    let i = input.length;\n    let output = new Int16Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int16Array数组转化成无符号Float32Array数组\n * @param {Int16Array} input singed int16\n * @return {Float32Array}  // unsinged float32\n */\nexport function int16ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n    while (i--) {\n        let int = input[i];\n        output[i] = (int >= 0x8000) ? -(0x10000 - int) / 0x8000 : int / 0x7FFF;\n    }\n    return output;\n}\n\n/**\n * 将无符号Float32Array数组转化成有符号的Int8Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int8Array} singed int8\n */\nexport function floatTo8BitPCM(input) {\n    let i = input.length;\n    let output = new Int8Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        const temp = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n        output[i] = parseInt(255 / (65535 / (32768 + temp)), 10)\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int8Array数组转化成无符号Float32Array数组\n * @param {Int8Array} singed int8\n * @return {Float32Array}  // unsinged float32\n */\nexport function int8ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n\n    return output;\n}\n\n/**\n * 将24位PCM转换为8位PCM：\n * @param input\n * @returns {Uint8Array}\n */\nexport function int24ToUnit8BitPCM(input) {\n    let pcm8Data = new Uint8Array(input.length / 3);\n\n    for (let i = 0, j = 0; i < input.length; i += 3, j++) {\n        // 只取每个24位样本的最高8位\n        pcm8Data[j] = input[i + 2];\n    }\n\n    return pcm8Data;\n}\n\n/**\n * 将24位PCM转换为8位PCM：v2 版本\n * @param input\n * @returns {Uint8Array}\n */\nexport function int24ToUnit8BitPCM$2(input) {\n    const pcm8 = new Uint8Array(input.length / 3);\n    for (let i = 0, j = 0; j < input.length; i++) {\n        //24bit pcm转成浮点数\n        let n = ((input[j++] | (input[j++] << 8) | (input[j++] << 16)) << 8) >> 8;\n        n = n / 16777216;\n        //浮点数转成8位\n        pcm8[i] = ((n * 0x7FFF) >> 8) + 128;\n    }\n\n    return pcm8;\n}\n\n/**\n * 将24位PCM转换为16位PCM：\n *\n * @param input\n * @returns {Uint16Array}\n */\nexport function int24ToInt16BitPcm(input) {\n    const pcm16Data = new Uint16Array(input.length / 3 * 2);\n\n    for (let i = 0, j = 0; i < input.length; i += 3, j += 2) {\n        // 取每个24位样本的最高16位，低位在前，高位在后\n        pcm16Data[j] = input[i + 1] | (input[i + 2] << 8);\n    }\n\n    return pcm16Data;\n}\n\n/**\n * 将24位PCM转换为16位PCM v2 版本\n * @param input\n * @returns {Int16Array}\n */\nexport function int24ToInt16BitPcm$2(input) {\n    const pcm16 = new Int16Array(input.length / 3);\n    for (let i = 0, j = 0; j < input.length; i++) {\n        //24bit pcm转成浮点数\n        let n = ((input[j++] | (input[j++] << 8) | (input[j++] << 16)) << 8) >> 8;\n        n = n / 16777216;\n        //浮点数转成16位\n        pcm16[i] = n * 0x7FFF;\n    }\n\n    return pcm16;\n}\n\n\n/**\n *\n * @param input\n */\nexport function int8ToInt24BitPcm(input) {\n    const pcm24 = new Uint8Array(input.length * 3);\n    for (let i = 0, j = 0; i < input.length; i++) {\n        const n = ((input[i] - 128) << 8) / 0x7FFF * 16777216; //8位的多一步先转成16位\n\n        pcm24[j++] = n & 0xff;\n        pcm24[j++] = (n & 0xff00) >> 8;\n        pcm24[j++] = (n & 0xff0000) >> 16;\n    }\n    return pcm24;\n}\n\n/**\n *\n * @param input\n */\nexport function int16ToInt24BitPcm(input) {\n    const pcm24 = new Uint8Array(input.length * 3);\n    for (let i = 0, j = 0; i < input.length; i++) {\n        const n = input[i] / 0x7FFF * 16777216;\n        pcm24[j++] = n & 0xff;\n        pcm24[j++] = (n & 0xff00) >> 8;\n        pcm24[j++] = (n & 0xff0000) >> 16;\n    }\n    return pcm24;\n}\n\n\n\nexport function readBig32 (data, i = 0) {\n    return (data[i] << 24 >>> 0) + (data[i + 1] << 16) + (data[i + 2] << 8) + (data[i + 3] || 0)\n}\n","import {AUDIO_ENC_CODE} from \"../constant\";\n\nconst SIGN_BIT = 0x80;\nconst QUANT_MASK = 0xf;\nconst NSEGS = 8;\nconst SEG_SHIFT = 4;\nconst SEG_MASK = 0x70;\nconst BIAS = 0x84;\nconst segEnd = [0xFF, 0x1FF, 0x3FF, 0x7FF, 0xFFF, 0x1FFF, 0x3FFF, 0x7FFF]\n\n\nfunction _search(val, table, size) {\n    for (let i = 0; i < size; i++) {\n        if (val <= table[i]) {\n            return i;\n        }\n    }\n    return size\n}\n\n// alaw\nfunction _linear2alaw(pcmVal) {\n    let mask;\n    let seg;\n    let aval;\n    if (pcmVal >= 0) {\n        mask = 0xD5\n    } else {\n        mask = 0x55\n\n        // pcmVal = -pcmVal - 8;\n        pcmVal = (-pcmVal - 1)\n        if (pcmVal < 0) {\n            pcmVal = 32767\n        }\n    }\n    /* Convert the scaled magnitude to segment number. */\n    seg = _search(pcmVal, segEnd, 8)\n\n    if (seg >= 8) {\n        return (0x7F ^ mask);\n    } else {\n        aval = (seg << SEG_SHIFT);\n\n        if (seg < 2) {\n            aval |= ((pcmVal >> 4) & QUANT_MASK);\n        } else {\n            aval |= ((pcmVal >> (seg + 3)) & QUANT_MASK);\n        }\n        return (aval ^ mask)\n    }\n}\n\nfunction _alaw2linear(aVal) {\n    let t;\n    let seg;\n\n    aVal ^= 0x55;\n    t = ((aVal & QUANT_MASK) << 4)\n    seg = ((aVal & SEG_MASK) >> SEG_SHIFT);\n    switch (seg) {\n        case 0:\n            t += 8;\n            break;\n        case 1:\n            t += 0x108;\n            break;\n        default:\n            t += 0x108;\n            t <<= seg - 1;\n    }\n    return ((aVal & SIGN_BIT) != 0 ? t : -t);\n}\n\n\n// ulaw\nfunction _linear2ulaw(pcmVal) {\n    let mask = 0;\n    if (pcmVal < 0) {\n        pcmVal = BIAS - pcmVal;\n        mask = 0x7F;\n    } else {\n        pcmVal += BIAS;\n        mask = 0xFF;\n    }\n    let seg = _search(pcmVal, segEnd, 8)\n    if (seg >= 8) {\n        return (0x7F ^ mask)\n    } else {\n        let uval = (seg << 4) | ((pcmVal >> (seg + 3)) & 0xF)\n        return (uval ^ mask)\n    }\n}\n\nfunction _ulaw2linear(uVal) {\n    uVal = ~uVal;\n    let t = ((uVal & QUANT_MASK) << 3) + BIAS;\n    t <<= ((uVal & SEG_MASK) >> SEG_SHIFT)\n    return ((uVal & SIGN_BIT) ? (BIAS - t) : (t - BIAS));\n}\n\n// pcm to g711a\nexport function g711aEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2alaw(i)\n    })\n    return g711Array;\n}\n\n// g711a to pcm(float32Array)\nexport function g711aDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _alaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\n// g711u\nexport function g711uEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2ulaw(i)\n    })\n    return g711Array;\n}\n\n// g711u\nexport function g711uDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _ulaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\nexport function g711EncoderNalePacket(arrayItem) {\n    return arrayItem;\n}\n\nexport function isG711CodecPacket(payload) {\n    const codecId = (payload[0] >> 4)\n    return codecId === AUDIO_ENC_CODE.ALAW || codecId === AUDIO_ENC_CODE.MULAW\n}\n","import {DEBUG_LEVEL} from \"../constant\";\n\nexport default class Debug {\n    constructor(master) {\n        this.log = (name, ...args) => {\n            if (master._opt.debug && master._opt.debugLevel == DEBUG_LEVEL.debug) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JbPro${prefix}[\\u2705\\u2705\\u2705][${name}]`, ...args);\n            }\n        };\n\n        this.warn = (name, ...args) => {\n            if (master._opt.debug && (master._opt.debugLevel == DEBUG_LEVEL.debug || master._opt.debugLevel == DEBUG_LEVEL.warn)) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JbPro${prefix}[\\u2757\\u2757\\u2757][${name}]`, ...args);\n            }\n        };\n\n        this.error = (name, ...args) => {\n            const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n            console.error(`JbPro${prefix}[\\u274C\\u274C\\u274C][${name}]`, ...args);\n\n            // if (master.addMemoryLog) {\n            //     master.addMemoryLog(`[${name}]`, ...args);\n            // }\n        };\n    }\n}\n","import {isFunction} from \"./index\";\n\nexport default class Events {\n    constructor(master) {\n        this.destroys = [];\n        this.proxy = this.proxy.bind(this);\n        this.master = master;\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (!target) {\n            return;\n        }\n        if (Array.isArray(name)) {\n            return name.map(item => this.proxy(target, item, callback, option));\n        }\n        target.addEventListener(name, callback, option);\n        const destroy = () => {\n            if (isFunction(target.removeEventListener)) {\n                target.removeEventListener(name, callback, option)\n            }\n        };\n        this.destroys.push(destroy);\n        return destroy;\n    }\n\n    destroy() {\n        this.master.debug && this.master.debug.log(`Events`, 'destroy');\n        this.destroys.forEach(event => event());\n        this.destroys = [];\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {\n    clamp,\n    createWorkletModuleUrl,\n    getDefaultTalkOptions,\n    isEmpty, isPc,\n    isSupportGetUserMedia, isTrue,\n    now,\n    uuid16\n} from \"../utils\";\nimport {\n    DEFAULT_TALK_OPTIONS,\n    EVENTS,\n    EVENTS_ERROR,\n    RTP_PAYLOAD_TYPE,\n    TALK_ENC_TYPE, TALK_ENGINE, TALK_PACKAGE_TCP_SEND_TYPE,\n    TALK_PACKET_TYPE, URL_OBJECT_CLEAR_TIME,\n    WEBSOCKET_EVENTS,\n    WEBSOCKET_STATUS\n} from \"../constant\";\nimport Resampler from \"../utils/resampler\";\nimport {floatTo16BitPCM, floatTo8BitPCM} from \"../utils/arraybuffer\";\nimport {g711aEncoder, g711uEncoder} from \"../utils/g711\";\nimport Debug from \"../utils/debug\";\nimport Events from \"../utils/events\";\n\n\nexport default class Talk extends Emitter {\n    constructor(player, options = {}) {\n        super()\n        /**@type {import('./constant').DEFAULT_TALK_OPTIONS}*/\n        this._opt = {};\n\n        if (player) {\n            this.player = player;\n        }\n        this.tag = 'talk';\n        const defaultOptions = getDefaultTalkOptions();\n\n        this._opt = Object.assign({}, defaultOptions, options);\n\n        this._opt.sampleRate = parseInt(this._opt.sampleRate, 10);\n        this._opt.sampleBitsWidth = parseInt(this._opt.sampleBitsWidth, 10);\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.workletRecorder = null;\n        this.biquadFilter = null;\n        this.userMediaStream = null;\n        this.clearWorkletUrlTimeout = null;\n        // buffersize\n        this.bufferSize = 512; //\n        this._opt.audioBufferLength = this.calcAudioBufferLength();\n        this.audioBufferList = [];\n        // socket\n        this.socket = null;\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n\n        //\n        this.mediaStreamSource = null;\n        this.heartInterval = null;\n        this.checkGetUserMediaTimeout = null;\n        this.wsUrl = null;\n        this.startTimestamp = 0;\n\n        // 报文数据\n        this.sequenceId = 0;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.events = new Events(this);\n\n        this._initTalk();\n        //\n        if (!this.player) {\n            this.debug = new Debug(this)\n        }\n\n        if ((this._opt.encType === TALK_ENC_TYPE.g711a || this._opt.encType === TALK_ENC_TYPE.g711u) &&\n            !(this._opt.sampleRate === 8000 && this._opt.sampleBitsWidth === 16)) {\n            this.warn(this.tag, `\n            encType is ${this._opt.encType} and sampleBitsWidth is ${this._opt.sampleBitsWidth}, set sampleBitsWidth to ${this._opt.sampleBitsWidth}。\n            ${this._opt.encType} only support sampleRate 8000 and sampleBitsWidth 16`);\n        }\n\n\n        this.log(this.tag, 'init', JSON.stringify(this._opt))\n    }\n\n    destroy() {\n\n        if (this.clearWorkletUrlTimeout) {\n            clearTimeout(this.clearWorkletUrlTimeout);\n            this.clearWorkletUrlTimeout = null;\n        }\n\n        //\n        if (this.userMediaStream) {\n            this.userMediaStream.getTracks && this.userMediaStream.getTracks().forEach((track) => {\n                track.stop()\n            })\n            this.userMediaStream = null;\n        }\n\n        if (this.mediaStreamSource) {\n            this.mediaStreamSource.disconnect();\n            this.mediaStreamSource = null;\n        }\n        if (this.recorder) {\n            this.recorder.disconnect();\n            this.recorder.onaudioprocess = null;\n            this.recorder = null;\n        }\n\n        if (this.biquadFilter) {\n            this.biquadFilter.disconnect();\n            this.biquadFilter = null;\n        }\n\n        if (this.gainNode) {\n            this.gainNode.disconnect();\n            this.gainNode = null;\n        }\n\n        if (this.workletRecorder) {\n            this.workletRecorder.disconnect();\n            this.workletRecorder = null;\n        }\n\n        if (this.socket) {\n            if (this.socketStatus === WEBSOCKET_STATUS.open) {\n                this._sendClose();\n            }\n            this.socket.close();\n            this.socket = null;\n        }\n        this._stopHeartInterval();\n        this._stopCheckGetUserMediaTimeout();\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.audioBufferList = [];\n        this.sequenceId = 0;\n        this.wsUrl = null;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.startTimestamp = 0;\n\n        this.log('talk', 'destroy');\n    }\n\n    addRtpToBuffer(rtp) {\n        const len = rtp.length + this.tempRtpBufferList.length;\n        const buffer = new Uint8Array(len);\n        buffer.set(this.tempRtpBufferList, 0);\n        buffer.set(rtp, this.tempRtpBufferList.length);\n        this.tempRtpBufferList = buffer;\n        //console.log('addRtpToBuffer length and byteLength ', this.tempRtpBufferList.length, this.tempRtpBufferList.byteLength)\n    }\n\n    downloadRtpFile() {\n        const blob = new Blob([this.tempRtpBufferList]);\n        try {\n            const oa = document.createElement('a');\n            oa.href = window.URL.createObjectURL(blob);\n            oa.download = Date.now() + '.rtp';\n            oa.click();\n            window.URL.revokeObjectURL(oa.href);\n        } catch (e) {\n            console.error('downloadRtpFile', e);\n        }\n    }\n\n    calcAudioBufferLength() {\n        const {sampleRate, sampleBitsWidth} = this._opt;\n        //  默认走的是 20ms 8000 采样率 16 位精度\n        return ((sampleRate * 8) * (20 / 1000)) / 8;\n    }\n\n    get socketStatusOpen() {\n        return this.socketStatus === WEBSOCKET_STATUS.open;\n    }\n\n    log(...args) {\n        this._log('log', ...args)\n    }\n\n    warn(...args) {\n        this._log('warn', ...args)\n    }\n\n    error(...args) {\n        this._log('error', ...args)\n    }\n\n    _log(type, ...args) {\n        if (this.player) {\n            this.player.debug[type](...args);\n\n        } else if (this.debug) {\n            this.debug[type](...args);\n        } else {\n            console[type](...args);\n        }\n    }\n\n    _getSequenceId() {\n        return ++this.sequenceId\n    }\n\n    _createWebSocket() {\n        return new Promise((resolve, reject) => {\n            const proxy = this.events.proxy;\n            this.socket = new WebSocket(this.wsUrl);\n            this.socket.binaryType = 'arraybuffer';\n            this.emit(EVENTS.talkStreamStart);\n\n            proxy(this.socket, WEBSOCKET_EVENTS.open, () => {\n                this.socketStatus = WEBSOCKET_STATUS.open;\n                this.log(this.tag, 'websocket open -> do talk');\n                this.emit(EVENTS.talkStreamOpen);\n                resolve();\n                this._doTalk();\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.message, (event) => {\n                this.log(this.tag, 'websocket message', event.data);\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.close, (e) => {\n                this.socketStatus = WEBSOCKET_STATUS.close;\n                this.warn(this.tag, 'websocket close -> reject', e);\n                this.emit(EVENTS.talkStreamClose);\n                reject(e);\n            })\n            proxy(this.socket, WEBSOCKET_EVENTS.error, (error) => {\n                this.socketStatus = WEBSOCKET_STATUS.error;\n                this.error(this.tag, 'websocket error -> reject', error)\n                this.emit(EVENTS.talkStreamError, error);\n                reject(error);\n            })\n        })\n    }\n\n    _sendClose() {\n\n    }\n\n\n    _initTalk() {\n\n        this._initMethods();\n        if (this._opt.engine === TALK_ENGINE.worklet) {\n            this._initWorklet();\n        } else if (this._opt.engine === TALK_ENGINE.script) {\n            this._initScriptProcessor();\n        }\n        this.log(this.tag, 'audioContext samplerate', this.audioContext.sampleRate)\n    }\n\n    _initMethods() {\n        //\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)({sampleRate: 48000})\n        this.gainNode = this.audioContext.createGain();\n        // default 1\n        this.gainNode.gain.value = 1;\n\n        // 消音器\n        this.biquadFilter = this.audioContext.createBiquadFilter();\n        this.biquadFilter.type = \"lowpass\";\n        this.biquadFilter.frequency.value = 3000;\n\n        this.resampler = new Resampler({\n            fromSampleRate: this.audioContext.sampleRate,\n            toSampleRate: this._opt.sampleRate,\n            channels: this._opt.numberChannels,\n            inputBufferSize: this.bufferSize\n        })\n    }\n\n    _initScriptProcessor() {\n        //\n        const createScript = this.audioContext.createScriptProcessor || this.audioContext.createJavaScriptNode;\n        this.recorder = createScript.apply(this.audioContext, [this.bufferSize, this._opt.numberChannels, this._opt.numberChannels])\n        this.recorder.onaudioprocess = (e) => this._onaudioprocess(e);\n    }\n\n    _initWorklet() {\n        function workletProcess() {\n            class TalkProcessor extends AudioWorkletProcessor {\n                constructor(options) {\n                    super();\n                    this._cursor = 0;\n                    this._bufferSize = options.processorOptions.bufferSize;\n                    this._buffer = new Float32Array(this._bufferSize);\n                }\n\n                process(inputs, outputs, parameters) {\n                    if (!inputs.length || !inputs[0].length) {\n                        return true;\n                    }\n                    for (let i = 0; i < inputs[0][0].length; i++) {\n                        this._cursor += 1;\n                        if (this._cursor === this._bufferSize) {\n                            this._cursor = 0;\n                            this.port.postMessage({\n                                eventType: 'data',\n                                buffer: this._buffer\n                            });\n                        }\n                        this._buffer[this._cursor] = inputs[0][0][i];\n                    }\n\n                    return true;\n                }\n            }\n\n            registerProcessor('talk-processor', TalkProcessor)\n        }\n\n        const workletUrl = createWorkletModuleUrl(workletProcess);\n        this.audioContext.audioWorklet && this.audioContext.audioWorklet.addModule(workletUrl).then(() => {\n            const workletNode = new AudioWorkletNode(this.audioContext, 'talk-processor', {\n                processorOptions: {\n                    bufferSize: this.bufferSize\n                }\n            })\n            workletNode.connect(this.gainNode);\n            workletNode.port.onmessage = (e) => {\n                if (e.data.eventType === 'data') {\n                    this._encodeAudioData(e.data.buffer);\n                }\n            }\n            this.workletRecorder = workletNode;\n        })\n\n        this.clearWorkletUrlTimeout = setTimeout(() => {\n            URL.revokeObjectURL(workletUrl);\n            this.clearWorkletUrlTimeout = null;\n        }, URL_OBJECT_CLEAR_TIME)\n    }\n\n\n    _onaudioprocess(e) {\n        // 数组里的每个数字都是32位的单精度浮点数\n        // 默认是单精度\n        const float32Array = e.inputBuffer.getChannelData(0);\n        // send 出去。\n        this._encodeAudioData(new Float32Array(float32Array));\n    }\n\n    _encodeAudioData(float32Array) {\n        // 没有说话\n        if (float32Array[0] === 0 && float32Array[1] === 0) {\n            this.log(this.tag, 'empty audio data')\n            return;\n        }\n\n        const resampleBuffer = this.resampler.resample(float32Array);\n        // default 32Bit\n        let tempArrayBuffer = resampleBuffer;\n        if (this._opt.sampleBitsWidth === 16) {\n            tempArrayBuffer = floatTo16BitPCM(resampleBuffer);\n        } else if (this._opt.sampleBitsWidth === 8) {\n            tempArrayBuffer = floatTo8BitPCM(resampleBuffer);\n        }\n\n        if (tempArrayBuffer.buffer !== null) {\n            let typedArray = null;\n            if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n                typedArray = g711aEncoder(tempArrayBuffer)\n            } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n                typedArray = g711uEncoder(tempArrayBuffer)\n            } else if (this._opt.encType === TALK_ENC_TYPE.pcm) {\n                typedArray = tempArrayBuffer;\n            }\n            // 变成了8位 array 了\n            const unit8Array = new Uint8Array(typedArray);\n            for (let i = 0; i < unit8Array.length; i++) {\n                let audioBufferLength = this.audioBufferList.length;\n                this.audioBufferList[audioBufferLength++] = unit8Array[i];\n                if (this.audioBufferList.length === this._opt.audioBufferLength) {\n                    this._sendTalkMsg(new Uint8Array(this.audioBufferList));\n                    this.audioBufferList = [];\n                }\n            }\n        }\n    }\n\n    _parseAudioMsg(typedArray) {\n        let typeArray2 = null;\n        // rtp reumx just support g711a or g711u or opus\n        if (this._opt.packetType === TALK_PACKET_TYPE.rtp &&\n            (this._opt.encType === TALK_ENC_TYPE.g711a || this._opt.encType === TALK_ENC_TYPE.g711u)) {\n            typeArray2 = this.rtpPacket(typedArray);\n        } else if (this._opt.packetType === TALK_PACKET_TYPE.empty) {\n            // 默认\n            typeArray2 = typedArray;\n        }\n\n        return typeArray2;\n    }\n\n    rtpPacket(typedArray) {\n        const rtpHeader = [];\n        //2 bits RTP的版本，这里统一为2\n        const version = 2;\n        //1 bit 如果置1，在packet的末尾被填充，填充有时是方便一些针对固定长度的算法的封装\n        const padding = 0;\n        //1 bit 如果置1，在RTP Header会跟着一个header extension\n        const extension = 0;\n        //4 bits 表示头部后 特约信源 的个数\n        const csrcCount = 0;\n        //1 bit 不同的有效载荷有不同的含义，marker=1; 对于视频，标记一帧的结束；对于音频，标记会话的开始。\n        const marker = 1;\n        //7 bits 表示所传输的多媒体的类型，\n        let playloadType = 0;\n        //16 bits 每个RTP packet的sequence number会自动加一，以便接收端检测丢包情况\n        let sequenceNumber = 0;\n        //32 bits 时间戳\n        let timestamp = 0;\n        //32 bits 同步源的id，每两个同步源的id不能相同\n        const ssrc = this._opt.rtpSsrc;\n        //\n        const frameLen = typedArray.length;\n\n        if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n            playloadType = RTP_PAYLOAD_TYPE.g711a;\n        } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n            playloadType = RTP_PAYLOAD_TYPE.g711u;\n        } else if (this._opt.encType === TALK_ENC_TYPE.opus) {\n            playloadType = RTP_PAYLOAD_TYPE.opus\n        }\n\n        if (!this.startTimestamp) {\n            this.startTimestamp = now();\n        }\n        timestamp = now() - this.startTimestamp;\n        sequenceNumber = this._getSequenceId();\n\n        // frame length\n        // 需要在rtp头前面加两个字节，表示数据包长度（整个rtp包长度）\n        // 国标流udp不需要两个字节长度\n        // 国标流tcp需要两个字节长度\n        // websocket目前是按照tcp的做法做的\n        let index = 0;\n\n        if (this._opt.packetTcpSendType === TALK_PACKAGE_TCP_SEND_TYPE.tcp) {\n            const rtpFrameLen = frameLen + 12;\n            //  0\n            rtpHeader[index++] = 0xFF & (rtpFrameLen >> 8);\n            //  1\n            rtpHeader[index++] = 0xFF & (rtpFrameLen >> 0);\n        }\n\n        rtpHeader[index++] = ((version << 6) + (padding << 5) + (extension << 4) + csrcCount);\n        rtpHeader[index++] = ((marker << 7) + playloadType);\n        rtpHeader[index++] = (sequenceNumber / (0xff + 1));\n        rtpHeader[index++] = (sequenceNumber % (0xff + 1));\n        rtpHeader[index++] = ((timestamp / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((timestamp / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((timestamp % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((timestamp % (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((ssrc / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((ssrc / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((ssrc % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((ssrc % (0xffff + 1)) % (0xff + 1));\n\n        let typeArray2 = rtpHeader.concat([...typedArray]);\n\n        let binary = new Uint8Array(typeArray2.length);\n        for (let ii = 0; ii < typeArray2.length; ii++) {\n            binary[ii] = typeArray2[ii];\n        }\n\n        return binary;\n    }\n\n\n    opusPacket(typedArray) {\n        //TODO:待完成\n\n        return typedArray;\n    }\n\n    _sendTalkMsg(typedArray) {\n        if (this.tempTimestamp === null) {\n            this.tempTimestamp = now();\n        }\n        const timestamp = now();\n        const diff = timestamp - this.tempTimestamp;\n        const typedArray2 = this._parseAudioMsg(typedArray)\n        this.log(this.tag, `'send talk msg and diff is ${diff} and byteLength is ${typedArray2.byteLength} and length is ${typedArray2.length}, and g711 length is ${typedArray.length}`);\n\n        if (isTrue(this._opt.saveRtpToFile)) {\n            if (this._opt.packetType === TALK_PACKET_TYPE.rtp) {\n                this.addRtpToBuffer(typedArray2);\n            }\n        }\n\n\n        if (typedArray2) {\n            if (this.socketStatusOpen) {\n                this.socket.send(typedArray2.buffer);\n            } else {\n                this.emit(EVENTS_ERROR.tallWebsocketClosedByError);\n            }\n        }\n        this.tempTimestamp = timestamp;\n    }\n\n    _doTalk() {\n        this._getUserMedia();\n        // this._getUserMedia2();\n        // this._getUserMedia3();\n    }\n\n    _getUserMedia() {\n        this.log(this.tag, 'getUserMedia')\n        // 老的浏览器可能根本没有实现 mediaDevices，所以我们可以先设置一个空的对象\n        if (window.navigator.mediaDevices === undefined) {\n            window.navigator.mediaDevices = {};\n        }\n\n        // 一些浏览器部分支持 mediaDevices。我们不能直接给对象设置 getUserMedia\n        // 因为这样可能会覆盖已有的属性。这里我们只会在没有 getUserMedia 属性的时候添加它。\n        if (window.navigator.mediaDevices.getUserMedia === undefined) {\n            this.log(this.tag, 'window.navigator.mediaDevices.getUserMedia is undefined and init function')\n            window.navigator.mediaDevices.getUserMedia = function (constraints) {\n                // 首先，如果有 getUserMedia 的话，就获得它\n                var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n                // 一些浏览器根本没实现它 - 那么就返回一个 error 到 promise 的 reject 来保持一个统一的接口\n                // 由于受浏览器的限制，navigator.mediaDevices.getUserMedia在https协议下是可以正常使用的，\n                // 而在http协议下只允许localhost/127.0.0.1这两个域名访问，\n                // 因此在开发时应做好容灾处理，上线时则需要确认生产环境是否处于https协议下。\n                if (!getUserMedia) {\n                    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                }\n\n                // 否则，为老的 navigator.getUserMedia 方法包裹一个 Promise\n                return new Promise(function (resolve, reject) {\n                    getUserMedia.call(navigator, constraints, resolve, reject);\n                });\n            }\n        }\n\n        if (this._opt.checkGetUserMediaTimeout) {\n            this._startCheckGetUserMediaTimeout();\n        }\n        //  最后经过反复测试，只有noiseSuppression+echoCancellation同时生效时，打开录音后再播放音频，系统音量一定会变小，\n        //  很惨的是getUserMedia只要你没有配置这两个参数，默认就是同时开启的；只要你给这两参数任意一个设为false，或者都设为false，\n        //  就不会影响手机系统音量。\n        window.navigator.mediaDevices.getUserMedia({\n            audio: this._opt.audioConstraints,\n            video: false\n        }).then((stream) => {\n            this.log(this.tag, 'getUserMedia success')\n            this.userMediaStream = stream;\n            this.mediaStreamSource = this.audioContext.createMediaStreamSource(stream)\n            this.mediaStreamSource.connect(this.biquadFilter);\n            if (this.recorder) {\n                this.biquadFilter.connect(this.recorder)\n                this.recorder.connect(this.gainNode);\n            } else if (this.workletRecorder) {\n                this.biquadFilter.connect(this.workletRecorder)\n                this.workletRecorder.connect(this.gainNode);\n            }\n\n            this.gainNode.connect(this.audioContext.destination);\n            this.emit(EVENTS.talkGetUserMediaSuccess);\n\n            // check stream inactive\n            if (stream.oninactive === null) {\n                stream.oninactive = (e) => {\n                    this._handleStreamInactive(e);\n                }\n            }\n        }).catch((e) => {\n            this.error(this.tag, 'getUserMedia error', e.toString());\n            this.emit(EVENTS.talkGetUserMediaFail, e.toString());\n        }).finally(() => {\n            this.log(this.tag, 'getUserMedia finally');\n            this._stopCheckGetUserMediaTimeout();\n        })\n    }\n\n\n    _getUserMedia2() {\n        this.log(this.tag, 'getUserMedia')\n        navigator.mediaDevices ?\n            navigator.mediaDevices.getUserMedia(\n                {audio: true}).then(\n                (stream) => {\n                    this.log(this.tag, 'getUserMedia2 success')\n                }\n            ) :\n            navigator.getUserMedia(\n                {audio: true},\n                this.log(this.tag, 'getUserMedia2 success'),\n                this.log(this.tag, 'getUserMedia2 fail')\n            );\n    }\n\n    async _getUserMedia3() {\n        this.log(this.tag, 'getUserMedia3')\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    latency: true,\n                    noiseSuppression: true,\n                    autoGainControl: true,\n                    echoCancellation: true,\n                    sampleRate: 48000,\n                    channelCount: 1\n                },\n                video: false\n            });\n            console.log('getUserMedia() got stream:', stream);\n            this.log(this.tag, 'getUserMedia3 success')\n        } catch (e) {\n            this.log(this.tag, 'getUserMedia3 fail')\n        }\n    }\n\n    _handleStreamInactive(e) {\n        if (this.userMediaStream) {\n            this.warn(this.tag, 'stream oninactive', e)\n            this.emit(EVENTS.talkStreamInactive);\n        }\n    }\n\n    _startCheckGetUserMediaTimeout() {\n        this._stopCheckGetUserMediaTimeout();\n        this.checkGetUserMediaTimeout = setTimeout(() => {\n            this.log(this.tag, 'check getUserMedia timeout')\n            this.emit(EVENTS.talkGetUserMediaTimeout);\n        }, this._opt.getUserMediaTimeout)\n    }\n\n    _stopCheckGetUserMediaTimeout() {\n        if (this.checkGetUserMediaTimeout) {\n            this.log(this.tag, 'stop checkGetUserMediaTimeout')\n            clearTimeout(this.checkGetUserMediaTimeout);\n            this.checkGetUserMediaTimeout = null;\n        }\n    }\n\n    _startHeartInterval() {\n        // 定时发送心跳，\n        this.heartInterval = setInterval(() => {\n            this.log(this.tag, 'heart interval');\n            let data = [0x23, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00];\n            data = new Uint8Array(data);\n            this.socket.send(data.buffer);\n        }, 15 * 1000);\n    }\n\n    _stopHeartInterval() {\n        if (this.heartInterval) {\n            this.log(this.tag, 'stop heart interval');\n            clearInterval(this.heartInterval);\n            this.heartInterval = null;\n        }\n    }\n\n\n    startTalk(wsUrl) {\n        return new Promise((resolve, reject) => {\n            if (!isSupportGetUserMedia()) {\n                return reject('not support getUserMedia');\n            }\n            this.wsUrl = wsUrl;\n\n            if (this._opt.testMicrophone) {\n                this._doTalk();\n            } else {\n                if (!this.wsUrl) {\n                    return reject('wsUrl is null');\n                }\n\n                this._createWebSocket().catch((e) => {\n                    reject(e)\n                });\n            }\n            // reject\n            this.once(EVENTS.talkGetUserMediaFail, () => {\n                reject('getUserMedia fail');\n            })\n            // only get user media success and resolve\n            this.once(EVENTS.talkGetUserMediaSuccess, () => {\n                resolve()\n            })\n        })\n\n    }\n\n    setVolume(volume) {\n        volume = parseFloat(volume).toFixed(2);\n        if (isNaN(volume)) {\n            return;\n        }\n        volume = clamp(volume, 0, 1);\n        this.gainNode.gain.value = volume;\n    }\n\n    getOption() {\n        return this._opt;\n    }\n\n    get volume() {\n        return this.gainNode ? parseFloat(this.gainNode.gain.value * 100).toFixed(0) : null;\n    }\n}\n","import Emitter from \"./utils/emitter\";\nimport {EVENTS, TALK_EVENTS} from \"./constant\";\nimport Talk from \"./talk\";\nimport Debug from \"./utils/debug\";\nimport {clone, getDefaultTalkOptions} from \"./utils\";\n\n\nclass JessibucaProTalk extends Emitter {\n\n    constructor(options = {}) {\n        super();\n        this.talk = null;\n        /**@type {import('./constant').DEFAULT_TALK_OPTIONS}*/\n        this._opt = options;\n        this.LOG_TAG = 'JessibucaProTalk';\n\n        this.debug = new Debug(this);\n        this.debug.log(this.LOG_TAG, 'init', JSON.stringify(options));\n    }\n\n    destroy() {\n        this.debug.log(this.LOG_TAG, 'destroy()');\n        this.off();\n        if (this.talk) {\n            this.talk.destroy();\n            this.talk = null;\n        }\n        this.debug.log(this.LOG_TAG, 'destroy');\n    }\n\n\n    _initTalk(options = {}) {\n        if (this.talk) {\n            this.debug.log(this.LOG_TAG, '_initTalk this.talk is not null and destroy');\n            this.talk.destroy();\n            this.talk = null;\n        }\n\n        const opt = Object.assign({}, clone(this._opt), options);\n        this.talk = new Talk(null, opt)\n        this.debug.log(this.LOG_TAG, '_initTalk', this.talk.getOption())\n        this._bindTalkEvents();\n    }\n\n    _bindTalkEvents() {\n        // 对外的事件\n        Object.keys(TALK_EVENTS).forEach((key) => {\n            this.talk.on(TALK_EVENTS[key], (value) => {\n                this.emit(key, value)\n            })\n        })\n    }\n\n    /**\n     *\n     * @param wsUrl\n     * @param options\n     * @returns {Promise<unknown>}\n     */\n    startTalk(wsUrl, options = {}) {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'startTalk', wsUrl, JSON.stringify(options));\n            this._initTalk(options)\n\n            this.talk.startTalk(wsUrl).then(() => {\n                resolve()\n\n                this.talk.once(EVENTS.talkStreamClose, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkStreamClose -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamClose stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamClose);\n                    });\n                })\n                this.talk.once(EVENTS.talkStreamError, (e) => {\n                    this.debug.error(this.LOG_TAG, 'talkStreamError -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamError stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamError);\n                    });\n                })\n\n                this.talk.once(EVENTS.talkStreamInactive, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkStreamInactive -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamInactive stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamInactive);\n                    });\n                })\n\n                this.talk.once(EVENTS.talkGetUserMediaTimeout, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkGetUserMediaTimeout -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkGetUserMediaTimeout stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkGetUserMediaTimeout);\n                    });\n                })\n\n            }).catch((e) => {\n                reject(e)\n            })\n        })\n    }\n\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    stopTalk() {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'stopTalk()');\n            if (!this.talk) {\n                reject('talk is not init');\n            }\n            this.talk.destroy();\n            this.talk = null;\n            resolve();\n        })\n    }\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    getTalkVolume() {\n        return new Promise((resolve, reject) => {\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            let result = this.talk.volume;\n            resolve(result);\n        })\n    }\n\n    /**\n     *\n     * @param volume\n     * @returns {Promise<unknown>}\n     */\n    setTalkVolume(volume) {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'setTalkVolume', volume);\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            this.talk.setVolume(volume / 100);\n            resolve();\n        })\n    }\n\n    downloadTempRtpFile() {\n        return new Promise((resolve, reject) => {\n            if (this.talk) {\n                this.talk.downloadRtpFile();\n                resolve();\n            } else {\n                reject('talk is not init')\n            }\n        })\n\n    }\n}\n\nJessibucaProTalk.EVENTS = TALK_EVENTS;\n\nwindow.JessibucaProTalk = JessibucaProTalk;\nwindow.WebPlayerProTalk = JessibucaProTalk;\n"],"names":["Emitter","on","name","fn","ctx","e","push","once","self","listener","off","args","apply","_","emit","evtArr","slice","data","i","length","callback","Object","keys","forEach","key","evts","liveEvents","len","DEBUG_LEVEL","debug","warn","URL_OBJECT_CLEAR_TIME","EVENTS","fullscreen","webFullscreen","decoderWorkerInit","play","playing","pause","mute","load","loading","zooming","videoInfo","timeUpdate","audioInfo","log","error","kBps","timeout","delayTimeout","delayTimeoutRetryEnd","loadingTimeout","loadingTimeoutRetryEnd","stats","performance","videoSmooth","faceDetectActive","objectDetectActive","occlusionDetectActive","imageDetectActive","record","recording","recordingTimestamp","recordStart","recordEnd","recordCreateError","recordBlob","buffer","videoFrame","videoSEI","start","metadata","resize","volumechange","destroy","beforeDestroy","streamEnd","streamRate","streamAbps","streamVbps","streamDts","streamSuccess","streamMessage","streamError","streamStats","mseSourceOpen","mseSourceClose","mseSourceended","mseSourceBufferError","mseAddSourceBufferError","mseSourceBufferBusy","mseSourceBufferFull","videoWaiting","videoTimeUpdate","videoSyncAudio","playToRenderTimes","playbackTime","playbackTimestamp","playbackTimeScroll","playbackPrecision","playbackShowPrecisionChange","playbackJustTime","playbackStats","playbackSeek","playbackPause","playbackPauseOrResume","playbackRateChange","playbackPreRateChange","ptz","streamQualityChange","visibilityChange","netBuf","close","networkDelayTimeout","togglePerformancePanel","viewResizeChange","flvDemuxBufferSizeTooLarge","talkGetUserMediaSuccess","talkGetUserMediaFail","talkGetUserMediaTimeout","talkStreamStart","talkStreamOpen","talkStreamClose","talkStreamError","talkStreamInactive","webrtcDisconnect","webrtcFailed","webrtcClosed","webrtcOnConnectionStateChange","webrtcOnIceConnectionStateChange","crashLog","focus","blur","visibilityHiddenTimeout","websocketOpen","websocketClose","websocketError","websocketMessage","aiObjectDetectorInfo","aiFaceDetectorInfo","aiOcclusionDetectResult","aiImageDetectResult","playFailedAndPaused","audioResumeState","webrtcStreamH265","flvMetaData","talkFailedAndStop","removeLoadingBgImage","memoryLog","downloadMemoryLog","pressureObserverCpu","currentPts","TALK_EVENTS","TALK_EVENTS_ERROR","EVENTS_ERROR","playError","fetchError","webcodecsH265NotSupport","webcodecsDecodeError","webcodecsUnsupportedConfigurationError","webcodecsDecodeConfigureError","mediaSourceH265NotSupport","mediaSourceAudioG711NotSupport","mediaSourceAudioInitTimeout","mediaSourceDecoderConfigurationError","mediaSourceFull","mediaSourceAppendBufferError","mediaSourceTsIsMaxDiff","mediaSourceUseCanvasRenderPlayFailed","mediaSourceBufferedIsZeroError","wasmDecodeError","wasmUseVideoRenderError","hlsError","hlsV2Mp4NotSupport","webrtcError","webrtcIceCandidateError","webglAlignmentError","wasmWidthOrHeightChange","mseWidthOrHeightChange","wcsWidthOrHeightChange","widthOrHeightChange","tallWebsocketClosedByError","wasmDecodeVideoNoResponseError","audioChannelError","simdH264DecodeVideoWidthIsTooLarge","simdDecodeError","webglContextLostError","videoElementPlayingFailed","videoElementPlayingFailedForWebrtc","decoderWorkerInitError","videoInfoError","videoCodecIdError","aliyunRtcError","WEBSOCKET_STATUS","notConnect","open","TALK_ENC_TYPE","g711a","g711u","pcm","opus","RTP_PAYLOAD_TYPE","pcma","pcmu","jpeg","h264","h265","aac","TALK_PACKET_TYPE","empty","rtp","TALK_PACKAGE_TCP_SEND_TYPE","tcp","udp","WEBSOCKET_EVENTS","message","TALK_ENGINE","worklet","script","DEFAULT_TALK_OPTIONS","encType","packetType","packetTcpSendType","rtpSsrc","numberChannels","sampleRate","sampleBitsWidth","sendInterval","debugLevel","testMicrophone","saveRtpToFile","audioBufferLength","engine","checkGetUserMediaTimeout","getUserMediaTimeout","audioConstraints","latency","noiseSuppression","autoGainControl","echoCancellation","channelCount","now","Date","getTime","WebAssembly","instantiate","module","Module","Uint8Array","of","Instance","clamp","num","a","b","Math","max","min","isFunction","isSupportGetUserMedia","result","navigator","window","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","createWorkletModuleUrl","func","functionToString","str","trim","match","funcStr","toString","blob","Blob","type","URL","createObjectURL","clone","obj","JSON","stringify","parse","getDefaultTalkOptions","isTrue","value","Resampler","constructor","options","fromSampleRate","toSampleRate","channels","inputBufferSize","Error","resampler","initialize","ratioWeight","linearInterpolation","lastWeight","multiTap","tailExists","initializeBuffers","bufferSlice","sliceAmount","outputBuffer","subarray","outputBufferSize","ceil","Float32Array","lastOutput","bufferLength","outLength","weight","firstWeight","secondWeight","sourceOffset","outputOffset","channel","floor","output_variable_list","actualPosition","amountToNext","alreadyProcessedTail","currentPosition","resample","floatTo16BitPCM","input","output","Int16Array","s","floatTo8BitPCM","Int8Array","temp","parseInt","QUANT_MASK","SEG_SHIFT","BIAS","segEnd","_search","val","table","size","_linear2alaw","pcmVal","mask","seg","aval","_linear2ulaw","uval","g711aEncoder","typedArray","g711Array","tempArray","Array","prototype","call","index","g711uEncoder","Debug","master","_opt","prefix","debugUuid","console","Events","destroys","proxy","bind","target","option","isArray","map","item","addEventListener","removeEventListener","event","Talk","player","tag","defaultOptions","assign","audioContext","gainNode","recorder","workletRecorder","biquadFilter","userMediaStream","clearWorkletUrlTimeout","bufferSize","calcAudioBufferLength","audioBufferList","socket","socketStatus","mediaStreamSource","heartInterval","wsUrl","startTimestamp","sequenceId","tempTimestamp","tempRtpBufferList","events","_initTalk","clearTimeout","getTracks","track","stop","disconnect","onaudioprocess","_sendClose","_stopHeartInterval","_stopCheckGetUserMediaTimeout","addRtpToBuffer","set","downloadRtpFile","oa","document","createElement","href","download","click","revokeObjectURL","socketStatusOpen","_log","_getSequenceId","_createWebSocket","Promise","resolve","reject","WebSocket","binaryType","_doTalk","_initMethods","_initWorklet","_initScriptProcessor","AudioContext","webkitAudioContext","createGain","gain","createBiquadFilter","frequency","createScript","createScriptProcessor","createJavaScriptNode","_onaudioprocess","workletProcess","TalkProcessor","AudioWorkletProcessor","_cursor","_bufferSize","processorOptions","_buffer","process","inputs","outputs","parameters","port","postMessage","eventType","registerProcessor","workletUrl","audioWorklet","addModule","then","workletNode","AudioWorkletNode","connect","onmessage","_encodeAudioData","setTimeout","float32Array","inputBuffer","getChannelData","resampleBuffer","tempArrayBuffer","unit8Array","_sendTalkMsg","_parseAudioMsg","typeArray2","rtpPacket","rtpHeader","version","padding","extension","csrcCount","marker","playloadType","sequenceNumber","timestamp","ssrc","frameLen","rtpFrameLen","concat","binary","ii","opusPacket","diff","typedArray2","byteLength","send","_getUserMedia","undefined","constraints","_startCheckGetUserMediaTimeout","audio","video","stream","createMediaStreamSource","destination","oninactive","_handleStreamInactive","catch","finally","_getUserMedia2","_getUserMedia3","_startHeartInterval","setInterval","clearInterval","startTalk","setVolume","volume","parseFloat","toFixed","isNaN","getOption","JessibucaProTalk","talk","LOG_TAG","opt","_bindTalkEvents","stopTalk","getTalkVolume","setTalkVolume","downloadTempRtpFile","WebPlayerProTalk"],"mappings":";;;;;IAAe,MAAMA,OAAN,CAAc;IACzBC,EAAAA,EAAE,CAACC,IAAD,EAAOC,EAAP,EAAWC,GAAX,EAAgB;QACd,MAAMC,CAAC,GAAG,IAAKA,CAAAA,CAAL,KAAW,IAAKA,CAAAA,CAAL,GAAS,EAApB,CAAV,CAAA;IACA,IAAA,CAACA,CAAC,CAACH,IAAD,CAAD,KAAYG,CAAC,CAACH,IAAD,CAAD,GAAU,EAAtB,CAAD,EAA4BI,IAA5B,CAAiC;UAACH,EAAD;IAAKC,MAAAA,GAAAA;SAAtC,CAAA,CAAA;IACA,IAAA,OAAO,IAAP,CAAA;IACH,GAAA;;IAEDG,EAAAA,IAAI,CAACL,IAAD,EAAOC,EAAP,EAAWC,GAAX,EAAgB;QAChB,MAAMI,IAAI,GAAG,IAAb,CAAA;;IAEA,IAAA,SAASC,QAAT,GAA2B;IACvBD,MAAAA,IAAI,CAACE,GAAL,CAASR,IAAT,EAAeO,QAAf,CAAA,CAAA;;IADuB,MAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANE,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;YAANA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,OAAA;;IAEvBR,MAAAA,EAAE,CAACS,KAAH,CAASR,GAAT,EAAcO,IAAd,CAAA,CAAA;IACH,KAAA;;QAEDF,QAAQ,CAACI,CAAT,GAAaV,EAAb,CAAA;QACA,OAAO,IAAA,CAAKF,EAAL,CAAQC,IAAR,EAAcO,QAAd,EAAwBL,GAAxB,CAAP,CAAA;IACH,GAAA;;MAEDU,IAAI,CAACZ,IAAD,EAAgB;IAChB,IAAA,MAAMa,MAAM,GAAG,CAAC,CAAC,IAAKV,CAAAA,CAAL,KAAW,IAAKA,CAAAA,CAAL,GAAS,EAApB,CAAD,EAA0BH,IAA1B,KAAmC,EAApC,EAAwCc,KAAxC,EAAf,CAAA;;IADgB,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAANA,IAAM,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;;IAEhB,IAAA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACI,MAA3B,EAAmCD,CAAC,IAAI,CAAxC,EAA2C;IACvCH,MAAAA,MAAM,CAACG,CAAD,CAAN,CAAUf,EAAV,CAAaS,KAAb,CAAmBG,MAAM,CAACG,CAAD,CAAN,CAAUd,GAA7B,EAAkCa,IAAlC,CAAA,CAAA;IACH,KAAA;;IACD,IAAA,OAAO,IAAP,CAAA;IACH,GAAA;;IAEDP,EAAAA,GAAG,CAACR,IAAD,EAAOkB,QAAP,EAAiB;QAChB,MAAMf,CAAC,GAAG,IAAKA,CAAAA,CAAL,KAAW,IAAKA,CAAAA,CAAL,GAAS,EAApB,CAAV,CAAA;;QAEA,IAAI,CAACH,IAAL,EAAW;UACPmB,MAAM,CAACC,IAAP,CAAYjB,CAAZ,EAAekB,OAAf,CAAwBC,GAAD,IAAS;YAC5B,OAAOnB,CAAC,CAACmB,GAAD,CAAR,CAAA;WADJ,CAAA,CAAA;IAGA,MAAA,OAAO,KAAKnB,CAAZ,CAAA;IACA,MAAA,OAAA;IACH,KAAA;;IAED,IAAA,MAAMoB,IAAI,GAAGpB,CAAC,CAACH,IAAD,CAAd,CAAA;QACA,MAAMwB,UAAU,GAAG,EAAnB,CAAA;;QACA,IAAID,IAAI,IAAIL,QAAZ,EAAsB;IAClB,MAAA,KAAK,IAAIF,CAAC,GAAG,CAAR,EAAWS,GAAG,GAAGF,IAAI,CAACN,MAA3B,EAAmCD,CAAC,GAAGS,GAAvC,EAA4CT,CAAC,IAAI,CAAjD,EAAoD;YAChD,IAAIO,IAAI,CAACP,CAAD,CAAJ,CAAQf,EAAR,KAAeiB,QAAf,IAA2BK,IAAI,CAACP,CAAD,CAAJ,CAAQf,EAAR,CAAWU,CAAX,KAAiBO,QAAhD,EAA0DM,UAAU,CAACpB,IAAX,CAAgBmB,IAAI,CAACP,CAAD,CAApB,CAAA,CAAA;IAC7D,OAAA;IACJ,KAAA;;QACD,IAAIQ,UAAU,CAACP,MAAf,EAAuB;IACnBd,MAAAA,CAAC,CAACH,IAAD,CAAD,GAAUwB,UAAV,CAAA;IACH,KAFD,MAEO;UACH,OAAOrB,CAAC,CAACH,IAAD,CAAR,CAAA;IACH,KAAA;;IACD,IAAA,OAAO,IAAP,CAAA;IACH,GAAA;;IAnDwB;;ICA7B;IA+EO,MAAM0B,WAAW,GAAG;IACvBC,EAAAA,KAAK,EAAE,OADgB;IAEvBC,EAAAA,IAAI,EAAE,MAAA;IAFiB,CAApB,CAAA;;IAkDA,MAAMC,qBAAqB,GAAG,EAAK,GAAA,IAAnC;;IAwaA,MAAMC,MAAM,GAAG;IAClBC,EAAAA,UAAU,EAAE,cADM;IAElBC,EAAAA,aAAa,EAAE,eAFG;IAGlBC,EAAAA,iBAAiB,EAAE,mBAHD;IAIlBC,EAAAA,IAAI,EAAE,MAJY;IAKlBC,EAAAA,OAAO,EAAE,SALS;IAMlBC,EAAAA,KAAK,EAAE,OANW;IAOlBC,EAAAA,IAAI,EAAE,MAPY;IAQlBC,EAAAA,IAAI,EAAE,MARY;IASlBC,EAAAA,OAAO,EAAE,SATS;IAUlBC,EAAAA,OAAO,EAAE,SAVS;IAWlBC,EAAAA,SAAS,EAAE,WAXO;IAYlBC,EAAAA,UAAU,EAAE,YAZM;IAalBC,EAAAA,SAAS,EAAE,WAbO;IAclBC,EAAAA,GAAG,EAAE,KAda;IAelBC,EAAAA,KAAK,EAAE,OAfW;IAgBlBC,EAAAA,IAAI,EAAE,MAhBY;IAiBlBC,EAAAA,OAAO,EAAE,SAjBS;IAkBlBC,EAAAA,YAAY,EAAE,cAlBI;IAmBlBC,EAAAA,oBAAoB,EAAE,sBAnBJ;IAoBlBC,EAAAA,cAAc,EAAE,gBApBE;IAqBlBC,EAAAA,sBAAsB,EAAE,wBArBN;IAsBlBC,EAAAA,KAAK,EAAE,OAtBW;IAuBlBC,EAAAA,WAAW,EAAE,aAvBK;IAwBlBC,EAAAA,WAAW,EAAE,aAxBK;IAyBlBC,EAAAA,gBAAgB,EAAE,kBAzBA;IA0BlBC,EAAAA,kBAAkB,EAAE,oBA1BF;IA2BlBC,EAAAA,qBAAqB,EAAE,uBA3BL;IA4BlBC,EAAAA,iBAAiB,EAAE,mBA5BD;IA6BlB;IACAC,EAAAA,MAAM,EAAE,QA9BU;IA+BlBC,EAAAA,SAAS,EAAE,WA/BO;IAgClBC,EAAAA,kBAAkB,EAAE,oBAhCF;IAiClBC,EAAAA,WAAW,EAAE,aAjCK;IAkClBC,EAAAA,SAAS,EAAE,WAlCO;IAmClBC,EAAAA,iBAAiB,EAAE,mBAnCD;IAoClBC,EAAAA,UAAU,EAAE,YApCM;IAsClBC,EAAAA,MAAM,EAAE,QAtCU;IAuClBC,EAAAA,UAAU,EAAE,YAvCM;IAwClBC,EAAAA,QAAQ,EAAE,UAxCQ;IAyClBC,EAAAA,KAAK,EAAE,OAzCW;IA0ClBC,EAAAA,QAAQ,EAAE,UA1CQ;IA2ClBC,EAAAA,MAAM,EAAE,QA3CU;IA4ClBC,EAAAA,YAAY,EAAE,cA5CI;IA6ClBC,EAAAA,OAAO,EAAE,SA7CS;IA8ClBC,EAAAA,aAAa,EAAE,eA9CG;IAgDlB;IACAC,EAAAA,SAAS,EAAE,WAjDO;IAkDlBC,EAAAA,UAAU,EAAE,YAlDM;IAmDlBC,EAAAA,UAAU,EAAE,YAnDM;IAoDlBC,EAAAA,UAAU,EAAE,YApDM;IAqDlBC,EAAAA,SAAS,EAAE,WArDO;IAsDlBC,EAAAA,aAAa,EAAE,eAtDG;IAuDlBC,EAAAA,aAAa,EAAE,eAvDG;IAwDlBC,EAAAA,WAAW,EAAE,aAxDK;IAyDlBC,EAAAA,WAAW,EAAE,aAzDK;IA2DlB;IACAC,EAAAA,aAAa,EAAE,eA5DG;IA6DlBC,EAAAA,cAAc,EAAE,gBA7DE;IA8DlBC,EAAAA,cAAc,EAAE,gBA9DE;IA+DlBC,EAAAA,oBAAoB,EAAE,sBA/DJ;IAgElBC,EAAAA,uBAAuB,EAAE,yBAhEP;IAiElBC,EAAAA,mBAAmB,EAAE,qBAjEH;IAkElBC,EAAAA,mBAAmB,EAAE,qBAlEH;IAmElB;IACAC,EAAAA,YAAY,EAAE,cApEI;IAqElBC,EAAAA,eAAe,EAAE,iBArEC;IAsElBC,EAAAA,cAAc,EAAE,gBAtEE;IAuElB;IACAC,EAAAA,iBAAiB,EAAE,mBAxED;IAyElBC,EAAAA,YAAY,EAAE,cAzEI;IA0ElBC,EAAAA,iBAAiB,EAAE,mBA1ED;IA2ElBC,EAAAA,kBAAkB,EAAE,oBA3EF;IA4ElBC,EAAAA,iBAAiB,EAAE,mBA5ED;IA4EqB;IACvCC,EAAAA,2BAA2B,EAAE,6BA7EX;IA8ElBC,EAAAA,gBAAgB,EAAE,kBA9EA;IA+ElBC,EAAAA,aAAa,EAAE,eA/EG;IAgFlBC,EAAAA,YAAY,EAAE,cAhFI;IAiFlBC,EAAAA,aAAa,EAAE,eAjFG;IAkFlBC,EAAAA,qBAAqB,EAAE,uBAlFL;IAmFlBC,EAAAA,kBAAkB,EAAE,oBAnFF;IAoFlBC,EAAAA,qBAAqB,EAAE,uBApFL;IAsFlBC,EAAAA,GAAG,EAAE,KAtFa;IAuFlBC,EAAAA,mBAAmB,EAAE,qBAvFH;IAwFlBC,EAAAA,gBAAgB,EAAE,kBAxFA;IAyFlBC,EAAAA,MAAM,EAAE,QAzFU;IA0FlBC,EAAAA,KAAK,EAAE,OA1FW;IA2FlBC,EAAAA,mBAAmB,EAAE,qBA3FH;IA4FlBC,EAAAA,sBAAsB,EAAE,wBA5FN;IA6FlBC,EAAAA,gBAAgB,EAAE,kBA7FA;IA8FlBC,EAAAA,0BAA0B,EAAE,4BA9FV;IA+FlB;IACAC,EAAAA,uBAAuB,EAAE,yBAhGP;IAiGlBC,EAAAA,oBAAoB,EAAE,sBAjGJ;IAkGlBC,EAAAA,uBAAuB,EAAE,yBAlGP;IAmGlBC,EAAAA,eAAe,EAAE,iBAnGC;IAoGlBC,EAAAA,cAAc,EAAE,gBApGE;IAqGlBC,EAAAA,eAAe,EAAE,iBArGC;IAsGlBC,EAAAA,eAAe,EAAE,iBAtGC;IAuGlBC,EAAAA,kBAAkB,EAAE,oBAvGF;IAyGlBC,EAAAA,gBAAgB,EAAE,kBAzGA;IA0GlBC,EAAAA,YAAY,EAAE,cA1GI;IA2GlBC,EAAAA,YAAY,EAAE,cA3GI;IA4GlBC,EAAAA,6BAA6B,EAAE,+BA5Gb;IA6GlBC,EAAAA,gCAAgC,EAAE,kCA7GhB;IA8GlB;IACAC,EAAAA,QAAQ,EAAE,UA/GQ;IAiHlB;IACAC,EAAAA,KAAK,EAAE,OAlHW;IAmHlBC,EAAAA,IAAI,EAAE,MAnHY;IAoHlBC,EAAAA,uBAAuB,EAAE,yBApHP;IAsHlB;IACAC,EAAAA,aAAa,EAAE,eAvHG;IAwHlBC,EAAAA,cAAc,EAAE,gBAxHE;IAyHlBC,EAAAA,cAAc,EAAE,gBAzHE;IA0HlBC,EAAAA,gBAAgB,EAAE,kBA1HA;IA4HlB;IACAC,EAAAA,oBAAoB,EAAE,sBA7HJ;IA8HlBC,EAAAA,kBAAkB,EAAE,oBA9HF;IA+HlBC,EAAAA,uBAAuB,EAAE,yBA/HP;IAgIlBC,EAAAA,mBAAmB,EAAE,qBAhIH;IAkIlB;IACAC,EAAAA,mBAAmB,EAAE,qBAnIH;IAqIlB;IACAC,EAAAA,gBAAgB,EAAE,kBAtIA;IAwIlB;IACAC,EAAAA,gBAAgB,EAAE,kBAzIA;IA2IlB;IACAC,EAAAA,WAAW,EAAE,aA5IK;IA8IlB;IACAC,EAAAA,iBAAiB,EAAE,mBA/ID;IAiJlBC,EAAAA,oBAAoB,EAAE,sBAjJJ;IAmJlBC,EAAAA,SAAS,EAAE,WAnJO;IAqJlBC,EAAAA,iBAAiB,EAAE,mBArJD;IAuJlBC,EAAAA,mBAAmB,EAAE,qBAvJH;IAyJlBC,EAAAA,UAAU,EAAE,YAAA;IAzJM,CAAf;IA8OA,MAAMC,WAAW,GAAG;MACvB9B,eAAe,EAAE3F,MAAM,CAAC2F,eADD;MAEvBC,eAAe,EAAE5F,MAAM,CAAC4F,eAFD;MAGvBC,kBAAkB,EAAE7F,MAAM,CAAC6F,kBAHJ;MAIvBL,uBAAuB,EAAExF,MAAM,CAACwF,uBAJT;MAKvB2B,iBAAiB,EAAEnH,MAAM,CAACmH,iBAAAA;IALH,CAApB,CAAA;IAqCA,MAAMO,iBAAiB,GAAG;MAC7B9B,eAAe,EAAE5F,MAAM,CAAC4F,eADK;MAE7BD,eAAe,EAAE3F,MAAM,CAAC2F,eAAAA;IAFK,CAA1B,CAAA;IAKA,MAAMgC,YAAY,GAAG;IACxBC,EAAAA,SAAS,EAAE,2BADa;IAExBC,EAAAA,UAAU,EAAE,YAFY;IAGxBpB,EAAAA,cAAc,EAAE,gBAHQ;IAIxBqB,EAAAA,uBAAuB,EAAE,yBAJD;IAKxBC,EAAAA,oBAAoB,EAAE,sBALE;IAMxBC,EAAAA,sCAAsC,EAAE,wCANhB;IAOxBC,EAAAA,6BAA6B,EAAE,+BAPP;IAQxBC,EAAAA,yBAAyB,EAAE,2BARH;IASxBC,EAAAA,8BAA8B,EAAE,gCATR;IAUxBC,EAAAA,2BAA2B,EAAE,6BAVL;IAWxBC,EAAAA,oCAAoC,EAAE,sCAXd;MAYxBC,eAAe,EAAEtI,MAAM,CAAC4D,mBAZA;MAaxBH,oBAAoB,EAAEzD,MAAM,CAACyD,oBAbL;MAcxBC,uBAAuB,EAAE1D,MAAM,CAAC0D,uBAdR;IAexB6E,EAAAA,4BAA4B,EAAE,8BAfN;IAgBxBC,EAAAA,sBAAsB,EAAE,wBAhBA;IAiBxBC,EAAAA,oCAAoC,EAAE,sCAjBd;IAkBxBC,EAAAA,8BAA8B,EAAE,gCAlBR;IAmBxBC,EAAAA,eAAe,EAAE,iBAnBO;IAoBxBC,EAAAA,uBAAuB,EAAE,yBApBD;IAqBxBC,EAAAA,QAAQ,EAAE,UArBc;IAsBxBC,EAAAA,kBAAkB,EAAE,oBAtBI;IAuBxBC,EAAAA,WAAW,EAAE,aAvBW;MAwBxB/C,YAAY,EAAEhG,MAAM,CAACgG,YAxBG;IAyBxBgD,EAAAA,uBAAuB,EAAE,yBAzBD;IA0BxBC,EAAAA,mBAAmB,EAAE,qBA1BG;IA2BxBC,EAAAA,uBAAuB,EAAE,yBA3BD;IA4BxBC,EAAAA,sBAAsB,EAAE,wBA5BA;IA6BxBC,EAAAA,sBAAsB,EAAE,wBA7BA;IA8BxBC,EAAAA,mBAAmB,EAAE,qBA9BG;IA+BxBC,EAAAA,0BAA0B,EAAE,4BA/BJ;MAgCxBjE,0BAA0B,EAAErF,MAAM,CAACqF,0BAhCX;IAiCxBkE,EAAAA,8BAA8B,EAAE,gCAjCR;IAkCxBC,EAAAA,iBAAiB,EAAE,mBAlCK;IAmCxBC,EAAAA,kCAAkC,EAAE,oCAnCZ;IAoCxBC,EAAAA,eAAe,EAAE,iBApCO;IAqCxBC,EAAAA,qBAAqB,EAAE,uBArCC;IAsCxBC,EAAAA,yBAAyB,EAAE,2BAtCH;IAuCxBC,EAAAA,kCAAkC,EAAE,oCAvCZ;IAwCxBC,EAAAA,sBAAsB,EAAE,wBAxCA;IAyCxBC,EAAAA,cAAc,EAAE,gBAzCQ;IA0CxBC,EAAAA,iBAAiB,EAAE,mBA1CK;MA2CxBnH,SAAS,EAAE7C,MAAM,CAAC6C,SA3CM;MA4CxB3B,YAAY,EAAElB,MAAM,CAACkB,YA5CG;MA6CxBE,cAAc,EAAEpB,MAAM,CAACoB,cA7CC;MA8CxB8D,mBAAmB,EAAElF,MAAM,CAACkF,mBA9CJ;IAgDxB+E,EAAAA,cAAc,EAAE,gBAhDQ;MAkDxB,GAAGvC,iBAAAA;IAlDqB,CAArB,CAAA;IAqDA,MAAMwC,gBAAgB,GAAG;IAC5BC,EAAAA,UAAU,EAAE,YADgB;IAE5BC,EAAAA,IAAI,EAAE,MAFsB;IAG5BnF,EAAAA,KAAK,EAAE,OAHqB;IAI5BlE,EAAAA,KAAK,EAAE,OAAA;IAJqB,CAAzB,CAAA;IAuNA,MAAMsJ,aAAa,GAAG;IACzBC,EAAAA,KAAK,EAAE,OADkB;IAEzBC,EAAAA,KAAK,EAAE,OAFkB;IAGzBC,EAAAA,GAAG,EAAE,KAHoB;IAIzBC,EAAAA,IAAI,EAAE,MAAA;IAJmB,CAAtB,CAAA;IA4EP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IACO,MAAMC,gBAAgB,GAAG;IAC5BC,EAAAA,IAAI,EAAE,CADsB;IAE5BL,EAAAA,KAAK,EAAE,CAFqB;IAG5BM,EAAAA,IAAI,EAAE,CAHsB;IAI5BL,EAAAA,KAAK,EAAE,CAJqB;IAK5BM,EAAAA,IAAI,EAAE,EALsB;IAM5BC,EAAAA,IAAI,EAAE,EANsB;IAO5BC,EAAAA,IAAI,EAAE,EAPsB;IAQ5BN,EAAAA,IAAI,EAAE,EARsB;IAS5BO,EAAAA,GAAG,EAAE,EAAA;IATuB,CAAzB,CAAA;IAaA,MAAMC,gBAAgB,GAAG;IAC5BC,EAAAA,KAAK,EAAE,OADqB;IACZ;IAChBC,EAAAA,GAAG,EAAE,KAAA;IAFuB,CAAzB,CAAA;IAKA,MAAMC,0BAA0B,GAAG;IACtCC,EAAAA,GAAG,EAAE,KADiC;IAEtCC,EAAAA,GAAG,EAAE,KAAA;IAFiC,CAAnC,CAAA;IAYA,MAAMC,gBAAgB,GAAG;IAC5BnB,EAAAA,IAAI,EAAE,MADsB;IAE5BnF,EAAAA,KAAK,EAAE,OAFqB;IAG5BlE,EAAAA,KAAK,EAAE,OAHqB;IAI5ByK,EAAAA,OAAO,EAAE,SAAA;IAJmB,CAAzB,CAAA;IAOA,MAAMC,WAAW,GAAG;IACvBC,EAAAA,OAAO,EAAE,SADc;IAEvBC,EAAAA,MAAM,EAAE,QAAA;IAFe,CAApB;;IAMA,MAAMC,oBAAoB,GAAG;MAChCC,OAAO,EAAExB,aAAa,CAACC,KADS;MAEhCwB,UAAU,EAAEb,gBAAgB,CAACE,GAFG;IAEE;MAClCY,iBAAiB,EAAEX,0BAA0B,CAACC,GAHd;IAGmB;IACnDW,EAAAA,OAAO,EAAE,YAJuB;IAIT;IACvBC,EAAAA,cAAc,EAAE,CALgB;IAKb;IACnBC,EAAAA,UAAU,EAAE,IANoB;IAMd;IAClBC,EAAAA,eAAe,EAAE,EAPe;IAOX;IACrBC,EAAAA,YAAY,EAAE,EARkB;IAQd;IAClBvM,EAAAA,KAAK,EAAE,KATyB;MAUhCwM,UAAU,EAAEzM,WAAW,CAACE,IAVQ;IAUF;IAC9BwM,EAAAA,cAAc,EAAE,KAXgB;IAWT;IACvBC,EAAAA,aAAa,EAAE,KAZiB;IAYV;IACtBC,EAAAA,iBAAiB,EAAE,GAba;IAaR;MACxBC,MAAM,EAAEhB,WAAW,CAACC,OAdY;IAcH;IAC7BgB,EAAAA,wBAAwB,EAAE,KAfM;IAeC;MACjCC,mBAAmB,EAAE,KAAK,IAhBM;IAgBA;IAChCC,EAAAA,gBAAgB,EAAE;IACd;IACAC,IAAAA,OAAO,EAAE,IAFK;IAEA;IACdC,IAAAA,gBAAgB,EAAE,IAHJ;IAGU;IACxBC,IAAAA,eAAe,EAAE,IAJH;IAKdC,IAAAA,gBAAgB,EAAE,IALJ;IAKU;IACxBd,IAAAA,UAAU,EAAE,KANE;IAOde,IAAAA,YAAY,EAAE,CAAA;IAPA,GAAA;IAjBc,CAA7B;;;;;;;IChtCP;IACA;IACA;IACA;IACA;IACA,CAAC,YAAY;AAEb;IACA,CAAC,IAAI,QAAQ,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,WAAW,GAAG,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC;IAC/G,CAAC,IAAI,UAAU,GAAoC,MAAM,CAAC,OAAO,CAAC;AAClE;IACA,CAAC,IAAI,EAAE,GAAG,CAAC,YAAY;IACvB,EAAE,IAAI,GAAG,CAAC;AACV;IACA,EAAE,IAAI,KAAK,GAAG;IACd,GAAG;IACH,IAAI,mBAAmB;IACvB,IAAI,gBAAgB;IACpB,IAAI,mBAAmB;IACvB,IAAI,mBAAmB;IACvB,IAAI,kBAAkB;IACtB,IAAI,iBAAiB;IACrB,IAAI;IACJ;IACA,GAAG;IACH,IAAI,yBAAyB;IAC7B,IAAI,sBAAsB;IAC1B,IAAI,yBAAyB;IAC7B,IAAI,yBAAyB;IAC7B,IAAI,wBAAwB;IAC5B,IAAI,uBAAuB;AAC3B;IACA,IAAI;IACJ;IACA,GAAG;IACH,IAAI,yBAAyB;IAC7B,IAAI,wBAAwB;IAC5B,IAAI,gCAAgC;IACpC,IAAI,wBAAwB;IAC5B,IAAI,wBAAwB;IAC5B,IAAI,uBAAuB;AAC3B;IACA,IAAI;IACJ,GAAG;IACH,IAAI,sBAAsB;IAC1B,IAAI,qBAAqB;IACzB,IAAI,sBAAsB;IAC1B,IAAI,sBAAsB;IAC1B,IAAI,qBAAqB;IACzB,IAAI,oBAAoB;IACxB,IAAI;IACJ,GAAG;IACH,IAAI,qBAAqB;IACzB,IAAI,kBAAkB;IACtB,IAAI,qBAAqB;IACzB,IAAI,qBAAqB;IACzB,IAAI,oBAAoB;IACxB,IAAI,mBAAmB;IACvB,IAAI;IACJ,GAAG,CAAC;AACJ;IACA,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACZ,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;IACvB,EAAE,IAAI,GAAG,GAAG,EAAE,CAAC;AACf;IACA,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;IACrB,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAClB,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,QAAQ,EAAE;IAClC,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACrC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IAC/B,KAAK;IACL,IAAI,OAAO,GAAG,CAAC;IACf,IAAI;IACJ,GAAG;AACH;IACA,EAAE,OAAO,KAAK,CAAC;IACf,EAAE,GAAG,CAAC;AACN;IACA,CAAC,IAAI,YAAY,GAAG;IACpB,EAAE,MAAM,EAAE,EAAE,CAAC,gBAAgB;IAC7B,EAAE,KAAK,EAAE,EAAE,CAAC,eAAe;IAC3B,EAAE,CAAC;AACH;IACA,CAAC,IAAI,UAAU,GAAG;IAClB,EAAE,OAAO,EAAE,UAAU,OAAO,EAAE,OAAO,EAAE;IACvC,GAAG,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;IACjD,IAAI,IAAI,mBAAmB,GAAG,YAAY;IAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;IAC7C,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB;IACA,IAAI,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;AAC3C;IACA,IAAI,OAAO,GAAG,OAAO,IAAI,QAAQ,CAAC,eAAe,CAAC;AAClD;IACA,IAAI,IAAI,aAAa,GAAG,OAAO,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC;AAC/D;IACA,IAAI,IAAI,aAAa,YAAY,OAAO,EAAE;IAC1C,KAAK,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC3D,KAAK;IACL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjB,GAAG;IACH,EAAE,IAAI,EAAE,YAAY;IACpB,GAAG,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;IACjD,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;IAC5B,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,OAAO;IACZ,KAAK;AACL;IACA,IAAI,IAAI,gBAAgB,GAAG,YAAY;IACvC,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;IAC1C,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB;IACA,IAAI,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;AACxC;IACA,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC;AACtD;IACA,IAAI,IAAI,aAAa,YAAY,OAAO,EAAE;IAC1C,KAAK,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACxD,KAAK;IACL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjB,GAAG;IACH,EAAE,MAAM,EAAE,UAAU,OAAO,EAAE,OAAO,EAAE;IACtC,GAAG,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAC3E,GAAG;IACH,EAAE,QAAQ,EAAE,UAAU,QAAQ,EAAE;IAChC,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC/B,GAAG;IACH,EAAE,OAAO,EAAE,UAAU,QAAQ,EAAE;IAC/B,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAC9B,GAAG;IACH,EAAE,EAAE,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE;IACjC,GAAG,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,GAAG,IAAI,SAAS,EAAE;IAClB,IAAI,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC1D,IAAI;IACJ,GAAG;IACH,EAAE,GAAG,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE;IAClC,GAAG,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,GAAG,IAAI,SAAS,EAAE;IAClB,IAAI,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC7D,IAAI;IACJ,GAAG;IACH,EAAE,GAAG,EAAE,EAAE;IACT,EAAE,CAAC;AACH;IACA,CAAC,IAAI,CAAC,EAAE,EAAE;IACV,EAAE,IAAI,UAAU,EAAE;IAClB,GAAG,cAAc,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IACvC,GAAG,MAAM;IACT,GAAG,MAAM,CAAC,UAAU,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IAC1C,GAAG;AACH;IACA,EAAE,OAAO;IACT,EAAE;AACF;IACA,CAAC,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE;IACrC,EAAE,YAAY,EAAE;IAChB,GAAG,GAAG,EAAE,YAAY;IACpB,IAAI,OAAO,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;IACnD,IAAI;IACJ,GAAG;IACH,EAAE,OAAO,EAAE;IACX,GAAG,UAAU,EAAE,IAAI;IACnB,GAAG,GAAG,EAAE,YAAY;IACpB,IAAI,OAAO,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC;IAC1C,IAAI;IACJ,GAAG;IACH,EAAE,SAAS,EAAE;IACb,GAAG,UAAU,EAAE,IAAI;IACnB,GAAG,GAAG,EAAE,YAAY;IACpB;IACA,IAAI,OAAO,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;IACnD,IAAI;IACJ,GAAG;IACH,EAAE,CAAC,CAAC;AACJ;IACA,CAAC,IAAI,UAAU,EAAE;IACjB,EAAE,MAAA,CAAA,OAAc,GAAG,UAAU,CAAC;IAC9B,EAAE,MAAM;IACR,EAAE,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,EAAE;IACF,CAAC,GAAG,CAAA;;;;IC5DG,SAASC,GAAT,GAAe;IAClB,EAAA,OAAO,IAAIC,IAAJ,EAAWC,CAAAA,OAAX,EAAP,CAAA;IACH,CAAA;IAE4B,CAAC,MAAM;MAChC,IAAI;QACA,IAAI,OAAOC,WAAP,KAAuB,QAAvB,IACG,OAAOA,WAAW,CAACC,WAAnB,KAAmC,UAD1C,EACsD;UAClD,MAAMC,MAAM,GAAG,IAAIF,WAAW,CAACG,MAAhB,CAAuBC,UAAU,CAACC,EAAX,CAAc,GAAd,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,EAAuD,IAAvD,CAAvB,CAAf,CAAA;IACA,MAAA,IAAIH,MAAM,YAAYF,WAAW,CAACG,MAAlC,EACI,OAAO,IAAIH,WAAW,CAACM,QAAhB,CAAyBJ,MAAzB,CAA4CF,YAAAA,WAAW,CAACM,QAA/D,CAAA;IACP,KAAA;IACJ,GAPD,CAOE,OAAOtP,CAAP,EAAU,EACX;;IACD,EAAA,OAAO,KAAP,CAAA;IACH,CAX4B,IAAtB;IAaA,SAASuP,KAAT,CAAeC,GAAf,EAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;IAC7B,EAAA,OAAOC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASL,GAAT,EAAcG,IAAI,CAACC,GAAL,CAASH,CAAT,EAAYC,CAAZ,CAAd,CAAT,EAAwCC,IAAI,CAACE,GAAL,CAASJ,CAAT,EAAYC,CAAZ,CAAxC,CAAP,CAAA;IACH,CAAA;IAyhCM,SAASI,UAAT,CAAoBhQ,EAApB,EAAwB;MAC3B,OAAO,OAAOA,EAAP,KAAc,UAArB,CAAA;IACH,CAAA;IA4EM,SAASiQ,qBAAT,GAAiC;MACpC,IAAIC,MAAM,GAAG,KAAb,CAAA;IACA,EAAA,MAAMC,SAAS,GAAGC,MAAM,CAACD,SAAzB,CAAA;;IAEA,EAAA,IAAIA,SAAJ,EAAe;IACXD,IAAAA,MAAM,GAAG,CAAC,EAAEC,SAAS,CAACE,YAAV,IAA0BF,SAAS,CAACE,YAAV,CAAuBC,YAAnD,CAAV,CAAA;;QAEA,IAAI,CAACJ,MAAL,EAAa;IACTA,MAAAA,MAAM,GAAG,CAAC,EAAEC,SAAS,CAACG,YAAV,IAA0BH,SAAS,CAACI,kBAApC,IAA0DJ,SAAS,CAACK,eAApE,IAAuFL,SAAS,CAACM,cAAnG,CAAV,CAAA;IACH,KAAA;IACJ,GAAA;;IAED,EAAA,OAAOP,MAAP,CAAA;IACH,CAAA;IAgDM,SAASQ,sBAAT,CAAgCC,IAAhC,EAAsC;MAEzC,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;QAC3B,OAAOA,GAAG,CAACC,IAAJ,EAAA,CAAWC,KAAX,CAAiB,gDAAjB,CAAmE,CAAA,CAAnE,CAAP,CAAA;IACH,GAAA;;MAED,MAAMC,OAAO,GAAGJ,gBAAgB,CAACD,IAAI,CAACM,QAAL,EAAD,CAAhC,CAAA;MACA,MAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACH,OAAD,CAAT,EAAoB;IAACI,IAAAA,IAAI,EAAE,wBAAA;IAAP,GAApB,CAAb,CAAA;IACA,EAAA,OAAOC,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAP,CAAA;IACH,CAAA;IA0RM,SAASK,KAAT,CAAeC,GAAf,EAAoB;IACvB,EAAA,IAAItB,MAAM,GAAG,EAAb,CADuB;;IAGvB,EAAA,IAAI,OAAOsB,GAAP,KAAe,QAAnB,EAA6B;QACzB,IAAI;IACAtB,MAAAA,MAAM,GAAGuB,IAAI,CAACC,SAAL,CAAeF,GAAf,CAAT,CAAA;IACAtB,MAAAA,MAAM,GAAGuB,IAAI,CAACE,KAAL,CAAWzB,MAAX,CAAT,CAAA;SAFJ,CAGE,OAAOhQ,CAAP,EAAU;IACRgQ,MAAAA,MAAM,GAAGsB,GAAT,CAAA;IACH,KAAA;IACJ,GAPD,MAOO;IACHtB,IAAAA,MAAM,GAAGsB,GAAT,CAAA;IACH,GAAA;;IAED,EAAA,OAAOtB,MAAP,CAAA;IACH,CAAA;IAkBD;IACA;IACA;IACA;;IACO,SAAS0B,qBAAT,GAAiC;MACpC,OAAOL,KAAK,CAAC9D,oBAAD,CAAZ,CAAA;IACH,CAAA;IAgFM,SAASoE,MAAT,CAAgBC,KAAhB,EAAuB;IAC1B,EAAA,OAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,MAAnC,CAAA;IACH;;IC9sDc,MAAMC,SAAN,CAAgB;MAC3BC,WAAW,CAACC,OAAD,EAAU;QACjB,MAAM;UAACC,cAAD;UAAiBC,YAAjB;UAA+BC,QAA/B;IAAyCC,MAAAA,eAAAA;IAAzC,KAAA,GAA4DJ,OAAlE,CAAA;;QAEA,IAAI,CAACC,cAAD,IAAmB,CAACC,YAApB,IAAoC,CAACC,QAAzC,EAAmD;IAC/C,MAAA,MAAM,IAAIE,KAAJ,CAAU,+CAAV,CAAN,CAAA;IACH,KAAA;;QACD,IAAKC,CAAAA,SAAL,GAAiB,IAAjB,CAAA;QACA,IAAKL,CAAAA,cAAL,GAAsBA,cAAtB,CAAA;QACA,IAAKC,CAAAA,YAAL,GAAoBA,YAApB,CAAA;IACA,IAAA,IAAA,CAAKC,QAAL,GAAgBA,QAAQ,IAAI,CAA5B,CAAA;QACA,IAAKC,CAAAA,eAAL,GAAuBA,eAAvB,CAAA;IACA,IAAA,IAAA,CAAKG,UAAL,EAAA,CAAA;IACH,GAAA;;IAEDA,EAAAA,UAAU,GAAG;IACT,IAAA,IAAI,IAAKN,CAAAA,cAAL,IAAuB,IAAA,CAAKC,YAAhC,EAA8C;IAE1C;UACA,IAAKI,CAAAA,SAAL,GAAkBtO,MAAD,IAAY;IACzB,QAAA,OAAOA,MAAP,CAAA;WADJ,CAAA;;UAGA,IAAKwO,CAAAA,WAAL,GAAmB,CAAnB,CAAA;IAEH,KARD,MAQO;IAEH,MAAA,IAAI,IAAKP,CAAAA,cAAL,GAAsB,IAAA,CAAKC,YAA/B,EAA6C;IAEzC;IACA;IACA;IACA,QAAA,IAAA,CAAKO,mBAAL,EAAA,CAAA;YACA,IAAKC,CAAAA,UAAL,GAAkB,CAAlB,CAAA;IAEH,OARD,MAQO;IAEH;IACA;IACA;IACA,QAAA,IAAA,CAAKC,QAAL,EAAA,CAAA;YACA,IAAKC,CAAAA,UAAL,GAAkB,KAAlB,CAAA;YACA,IAAKF,CAAAA,UAAL,GAAkB,CAAlB,CAAA;IACH,OAlBE;;;IAqBH,MAAA,IAAA,CAAKG,iBAAL,EAAA,CAAA;IACA,MAAA,IAAA,CAAKL,WAAL,GAAmB,IAAA,CAAKP,cAAL,GAAsB,KAAKC,YAA9C,CAAA;IACH,KAAA;IACJ,GAAA;;MAEDY,WAAW,CAACC,WAAD,EAAc;IAErB;QACA,IAAI;UACA,OAAO,IAAA,CAAKC,YAAL,CAAkBC,QAAlB,CAA2B,CAA3B,EAA8BF,WAA9B,CAAP,CAAA;SADJ,CAEE,OAAOpQ,KAAP,EAAc;UACZ,IAAI;IACA;IACA,QAAA,IAAA,CAAKqQ,YAAL,CAAkBjS,MAAlB,GAA2BgS,WAA3B,CAAA;IACA,QAAA,OAAO,KAAKC,YAAZ,CAAA;WAHJ,CAIE,OAAOrQ,KAAP,EAAc;IACZ;YACA,OAAO,IAAA,CAAKqQ,YAAL,CAAkBpS,KAAlB,CAAwB,CAAxB,EAA2BmS,WAA3B,CAAP,CAAA;IACH,OAAA;IACJ,KAAA;IACJ,GAAA;;IAEDF,EAAAA,iBAAiB,GAAG;QAChB,IAAKK,CAAAA,gBAAL,GAAyBtD,IAAI,CAACuD,IAAL,CAAU,IAAKf,CAAAA,eAAL,GAAuB,IAAA,CAAKF,YAA5B,GAA2C,KAAKD,cAAhD,GAAiE,IAAKE,CAAAA,QAAtE,GAAiF,uBAA3F,IAAsH,IAAKA,CAAAA,QAA5H,GAAwI,IAAA,CAAKA,QAArK,CAAA;;QACA,IAAI;IACA,MAAA,IAAA,CAAKa,YAAL,GAAoB,IAAII,YAAJ,CAAiB,IAAA,CAAKF,gBAAtB,CAApB,CAAA;IACA,MAAA,IAAA,CAAKG,UAAL,GAAkB,IAAID,YAAJ,CAAiB,IAAA,CAAKjB,QAAtB,CAAlB,CAAA;SAFJ,CAGE,OAAOxP,KAAP,EAAc;UACZ,IAAKqQ,CAAAA,YAAL,GAAoB,EAApB,CAAA;UACA,IAAKK,CAAAA,UAAL,GAAkB,EAAlB,CAAA;IACH,KAAA;IACJ,GAAA;;IAEDZ,EAAAA,mBAAmB,GAAG;QAClB,IAAKH,CAAAA,SAAL,GAAkBtO,MAAD,IAAY;IACzB,MAAA,IAAIsP,YAAY,GAAGtP,MAAM,CAACjD,MAA1B;cACIoR,QAAQ,GAAG,IAAA,CAAKA,QADpB;IAAA,UAEIoB,SAFJ;IAAA,UAGIf,WAHJ;IAAA,UAIIgB,MAJJ;IAAA,UAKIC,WALJ;IAAA,UAMIC,YANJ;IAAA,UAOIC,YAPJ;IAAA,UAQIC,YARJ;IAAA,UASIZ,YATJ;IAAA,UAUIa,OAVJ,CAAA;;IAYA,MAAA,IAAKP,YAAY,GAAGnB,QAAhB,KAA8B,CAAlC,EAAqC;IACjC,QAAA,MAAM,IAAIE,KAAJ,CAAU,wCAAV,CAAN,CAAA;IACH,OAAA;;UACD,IAAIiB,YAAY,IAAI,CAApB,EAAuB;IACnB,QAAA,OAAO,EAAP,CAAA;IACH,OAAA;;UAEDC,SAAS,GAAG,KAAKL,gBAAjB,CAAA;UACAV,WAAW,GAAG,KAAKA,WAAnB,CAAA;UACAgB,MAAM,GAAG,KAAKd,UAAd,CAAA;IACAe,MAAAA,WAAW,GAAG,CAAd,CAAA;IACAC,MAAAA,YAAY,GAAG,CAAf,CAAA;IACAC,MAAAA,YAAY,GAAG,CAAf,CAAA;IACAC,MAAAA,YAAY,GAAG,CAAf,CAAA;UACAZ,YAAY,GAAG,KAAKA,YAApB,CAAA;;IAEA,MAAA,OAAOQ,MAAM,GAAG,CAAhB,EAAmBA,MAAM,IAAIhB,WAA7B,EAA0C;YACtCkB,YAAY,GAAGF,MAAM,GAAG,CAAxB,CAAA;YACAC,WAAW,GAAG,IAAIC,YAAlB,CAAA;IACA,QAAA,IAAA,CAAKhB,UAAL,GAAkBc,MAAM,GAAG,CAA3B,CAAA;;YACA,KAAKK,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG,IAAA,CAAK1B,QAAjC,EAA2C,EAAE0B,OAA7C,EAAsD;IAClDb,UAAAA,YAAY,CAACY,YAAY,EAAb,CAAZ,GAAgC,KAAKP,UAAL,CAAgBQ,OAAhB,CAAA,GAA2BJ,WAA5B,GAA4CzP,MAAM,CAAC6P,OAAD,CAAN,GAAkBH,YAA7F,CAAA;IACH,SAAA;IACJ,OAAA;;IACDF,MAAAA,MAAM,IAAI,CAAV,CAAA;;UACA,KAAKF,YAAY,IAAInB,QAAhB,EAA0BwB,YAAY,GAAG/D,IAAI,CAACkE,KAAL,CAAWN,MAAX,CAAqBrB,GAAAA,QAAnE,EAA6EyB,YAAY,GAAGL,SAAf,IAA4BI,YAAY,GAAGL,YAAxH,GAAuI;YACnII,YAAY,GAAGF,MAAM,GAAG,CAAxB,CAAA;YACAC,WAAW,GAAG,IAAIC,YAAlB,CAAA;;YACA,KAAKG,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG,IAAA,CAAK1B,QAAjC,EAA2C,EAAE0B,OAA7C,EAAsD;IAClDb,UAAAA,YAAY,CAACY,YAAY,EAAb,CAAZ,GAAgC5P,MAAM,CAAC2P,YAAY,IAAKE,OAAO,GAAG,CAAX,GAAiBA,OAAjB,GAA4B,CAAhC,CAAb,CAAN,GAAyDJ,WAA1D,GAA0EzP,MAAM,CAAC2P,YAAY,IAAIxB,QAAQ,GAAG0B,OAAf,CAAb,CAAN,GAA8CH,YAAvJ,CAAA;IACH,SAAA;;IACDF,QAAAA,MAAM,IAAIhB,WAAV,CAAA;IACAmB,QAAAA,YAAY,GAAG/D,IAAI,CAACkE,KAAL,CAAWN,MAAX,IAAqBrB,QAApC,CAAA;IACH,OAAA;;UACD,KAAK0B,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;YAC7C,IAAKR,CAAAA,UAAL,CAAgBQ,OAAhB,CAAA,GAA2B7P,MAAM,CAAC2P,YAAY,EAAb,CAAjC,CAAA;IACH,OAAA;;IACD,MAAA,OAAO,IAAKb,CAAAA,WAAL,CAAiBc,YAAjB,CAAP,CAAA;SAlDJ,CAAA;IAoDH,GAAA;;IAEDjB,EAAAA,QAAQ,GAAG;QACP,IAAKL,CAAAA,SAAL,GAAkBtO,MAAD,IAAY;IACzB,MAAA,IAAIsP,YAAY,GAAGtP,MAAM,CAACjD,MAA1B;IAAA,UACIwS,SADJ;IAAA,UAEIQ,oBAFJ;cAGI5B,QAAQ,GAAG,IAAA,CAAKA,QAHpB;IAAA,UAIIK,WAJJ;IAAA,UAKIgB,MALJ;IAAA,UAMIK,OANJ;IAAA,UAOIG,cAPJ;IAAA,UAQIC,YARJ;IAAA,UASIC,oBATJ;IAAA,UAUIlB,YAVJ;IAAA,UAWIY,YAXJ;IAAA,UAYIO,eAZJ,CAAA;;IAcA,MAAA,IAAKb,YAAY,GAAGnB,QAAhB,KAA8B,CAAlC,EAAqC;IACjC,QAAA,MAAM,IAAIE,KAAJ,CAAU,wCAAV,CAAN,CAAA;IACH,OAAA;;UACD,IAAIiB,YAAY,IAAI,CAApB,EAAuB;IACnB,QAAA,OAAO,EAAP,CAAA;IACH,OAAA;;UAEDC,SAAS,GAAG,KAAKL,gBAAjB,CAAA;IACAa,MAAAA,oBAAoB,GAAG,EAAvB,CAAA;UACAvB,WAAW,GAAG,KAAKA,WAAnB,CAAA;IACAgB,MAAAA,MAAM,GAAG,CAAT,CAAA;IACAQ,MAAAA,cAAc,GAAG,CAAjB,CAAA;IACAC,MAAAA,YAAY,GAAG,CAAf,CAAA;UACAC,oBAAoB,GAAG,CAAC,IAAA,CAAKtB,UAA7B,CAAA;UACA,IAAKA,CAAAA,UAAL,GAAkB,KAAlB,CAAA;UACAI,YAAY,GAAG,KAAKA,YAApB,CAAA;IACAY,MAAAA,YAAY,GAAG,CAAf,CAAA;IACAO,MAAAA,eAAe,GAAG,CAAlB,CAAA;;UAEA,KAAKN,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;IAC7CE,QAAAA,oBAAoB,CAACF,OAAD,CAApB,GAAgC,CAAhC,CAAA;IACH,OAAA;;UAED,GAAG;IACC,QAAA,IAAIK,oBAAJ,EAA0B;IACtBV,UAAAA,MAAM,GAAGhB,WAAT,CAAA;;cACA,KAAKqB,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;IAC7CE,YAAAA,oBAAoB,CAACF,OAAD,CAApB,GAAgC,CAAhC,CAAA;IACH,WAAA;IACJ,SALD,MAKO;cACHL,MAAM,GAAG,KAAKd,UAAd,CAAA;;cACA,KAAKmB,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;gBAC7CE,oBAAoB,CAACF,OAAD,CAApB,GAAgC,KAAKR,UAAL,CAAgBQ,OAAhB,CAAhC,CAAA;IACH,WAAA;;IACDK,UAAAA,oBAAoB,GAAG,IAAvB,CAAA;IACH,SAAA;;IACD,QAAA,OAAOV,MAAM,GAAG,CAAT,IAAcQ,cAAc,GAAGV,YAAtC,EAAoD;IAChDW,UAAAA,YAAY,GAAG,CAAA,GAAID,cAAJ,GAAqBG,eAApC,CAAA;;cACA,IAAIX,MAAM,IAAIS,YAAd,EAA4B;gBACxB,KAAKJ,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;kBAC7CE,oBAAoB,CAACF,OAAD,CAApB,IAAiC7P,MAAM,CAACgQ,cAAc,EAAf,CAAN,GAA2BC,YAA5D,CAAA;IACH,aAAA;;IACDE,YAAAA,eAAe,GAAGH,cAAlB,CAAA;IACAR,YAAAA,MAAM,IAAIS,YAAV,CAAA;IACH,WAND,MAMO;gBACH,KAAKJ,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;IAC7CE,cAAAA,oBAAoB,CAACF,OAAD,CAApB,IAAiC7P,MAAM,CAACgQ,cAAc,IAAKH,OAAO,GAAG,CAAX,GAAgBA,OAAhB,GAA0B,CAA9B,CAAf,CAAN,GAAyDL,MAA1F,CAAA;IACH,aAAA;;IACDW,YAAAA,eAAe,IAAIX,MAAnB,CAAA;IACAA,YAAAA,MAAM,GAAG,CAAT,CAAA;IACA,YAAA,MAAA;IACH,WAAA;IACJ,SAAA;;YAED,IAAIA,MAAM,KAAK,CAAf,EAAkB;cACd,KAAKK,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;gBAC7Cb,YAAY,CAACY,YAAY,EAAb,CAAZ,GAA+BG,oBAAoB,CAACF,OAAD,CAApB,GAAgCrB,WAA/D,CAAA;IACH,WAAA;IACJ,SAJD,MAIO;cACH,IAAKE,CAAAA,UAAL,GAAkBc,MAAlB,CAAA;;cACA,KAAKK,OAAO,GAAG,CAAf,EAAkBA,OAAO,GAAG1B,QAA5B,EAAsC,EAAE0B,OAAxC,EAAiD;IAC7C,YAAA,IAAA,CAAKR,UAAL,CAAgBQ,OAAhB,IAA2BE,oBAAoB,CAACF,OAAD,CAA/C,CAAA;IACH,WAAA;;cACD,IAAKjB,CAAAA,UAAL,GAAkB,IAAlB,CAAA;IACA,UAAA,MAAA;IACH,SAAA;IACJ,OA3CD,QA2CSoB,cAAc,GAAGV,YAAjB,IAAiCM,YAAY,GAAGL,SA3CzD,EAAA;;IA4CA,MAAA,OAAO,IAAKT,CAAAA,WAAL,CAAiBc,YAAjB,CAAP,CAAA;SAlFJ,CAAA;IAoFH,GAAA;;MAEDQ,QAAQ,CAACpQ,MAAD,EAAS;IACb,IAAA,IAAI,IAAKiO,CAAAA,cAAL,IAAuB,IAAA,CAAKC,YAAhC,EAA8C;UAC1C,IAAKM,CAAAA,WAAL,GAAmB,CAAnB,CAAA;IACH,KAFD,MAEO;IACH,MAAA,IAAI,IAAKP,CAAAA,cAAL,GAAsB,IAAA,CAAKC,YAA/B,EAA6C;YACzC,IAAKQ,CAAAA,UAAL,GAAkB,CAAlB,CAAA;IACH,OAFD,MAEO;YACH,IAAKE,CAAAA,UAAL,GAAkB,KAAlB,CAAA;YACA,IAAKF,CAAAA,UAAL,GAAkB,CAAlB,CAAA;IACH,OAAA;;IACD,MAAA,IAAA,CAAKG,iBAAL,EAAA,CAAA;IACA,MAAA,IAAA,CAAKL,WAAL,GAAmB,IAAA,CAAKP,cAAL,GAAsB,KAAKC,YAA9C,CAAA;IACH,KAAA;;IACD,IAAA,OAAO,IAAKI,CAAAA,SAAL,CAAetO,MAAf,CAAP,CAAA;IACH,GAAA;;IA1O0B;;ICA/B;IACA;IACA;IACA;IACA;IACO,SAASqQ,eAAT,CAAyBC,KAAzB,EAAgC;IACnC,EAAA,IAAIxT,CAAC,GAAGwT,KAAK,CAACvT,MAAd,CAAA;IACA,EAAA,IAAIwT,MAAM,GAAG,IAAIC,UAAJ,CAAe1T,CAAf,CAAb,CAAA;;MACA,OAAOA,CAAC,EAAR,EAAY;QACR,IAAI2T,CAAC,GAAG7E,IAAI,CAACC,GAAL,CAAS,CAAC,CAAV,EAAaD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYwE,KAAK,CAACxT,CAAD,CAAjB,CAAb,CAAR,CAAA;IACAyT,IAAAA,MAAM,CAACzT,CAAD,CAAN,GAAa2T,CAAC,GAAG,CAAJ,GAAQA,CAAC,GAAG,MAAZ,GAAqBA,CAAC,GAAG,MAAtC,CAAA;IACH,GAAA;;IACD,EAAA,OAAOF,MAAP,CAAA;IACH,CAAA;IAiBD;IACA;IACA;IACA;IACA;;IACO,SAASG,cAAT,CAAwBJ,KAAxB,EAA+B;IAClC,EAAA,IAAIxT,CAAC,GAAGwT,KAAK,CAACvT,MAAd,CAAA;IACA,EAAA,IAAIwT,MAAM,GAAG,IAAII,SAAJ,CAAc7T,CAAd,CAAb,CAAA;;MACA,OAAOA,CAAC,EAAR,EAAY;QACR,IAAI2T,CAAC,GAAG7E,IAAI,CAACC,GAAL,CAAS,CAAC,CAAV,EAAaD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYwE,KAAK,CAACxT,CAAD,CAAjB,CAAb,CAAR,CAAA;IACA,IAAA,MAAM8T,IAAI,GAAIH,CAAC,GAAG,CAAJ,GAAQA,CAAC,GAAG,MAAZ,GAAqBA,CAAC,GAAG,MAAvC,CAAA;IACAF,IAAAA,MAAM,CAACzT,CAAD,CAAN,GAAY+T,QAAQ,CAAC,GAAA,IAAO,KAAS,IAAA,KAAA,GAAQD,IAAjB,CAAP,CAAD,EAAiC,EAAjC,CAApB,CAAA;IACH,GAAA;;IACD,EAAA,OAAOL,MAAP,CAAA;IACH;;ICzCD,MAAMO,UAAU,GAAG,GAAnB,CAAA;IAEA,MAAMC,SAAS,GAAG,CAAlB,CAAA;IAEA,MAAMC,IAAI,GAAG,IAAb,CAAA;IACA,MAAMC,MAAM,GAAG,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,EAAqB,KAArB,EAA4B,KAA5B,EAAmC,MAAnC,EAA2C,MAA3C,EAAmD,MAAnD,CAAf,CAAA;;IAGA,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6BC,IAA7B,EAAmC;MAC/B,KAAK,IAAIvU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuU,IAApB,EAA0BvU,CAAC,EAA3B,EAA+B;IAC3B,IAAA,IAAIqU,GAAG,IAAIC,KAAK,CAACtU,CAAD,CAAhB,EAAqB;IACjB,MAAA,OAAOA,CAAP,CAAA;IACH,KAAA;IACJ,GAAA;;IACD,EAAA,OAAOuU,IAAP,CAAA;IACH;;;IAGD,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;IAC1B,EAAA,IAAIC,IAAJ,CAAA;IACA,EAAA,IAAIC,GAAJ,CAAA;IACA,EAAA,IAAIC,IAAJ,CAAA;;MACA,IAAIH,MAAM,IAAI,CAAd,EAAiB;IACbC,IAAAA,IAAI,GAAG,IAAP,CAAA;IACH,GAFD,MAEO;QACHA,IAAI,GAAG,IAAP,CADG;;IAIHD,IAAAA,MAAM,GAAI,CAACA,MAAD,GAAU,CAApB,CAAA;;QACA,IAAIA,MAAM,GAAG,CAAb,EAAgB;IACZA,MAAAA,MAAM,GAAG,KAAT,CAAA;IACH,KAAA;IACJ,GAAA;IACD;;;MACAE,GAAG,GAAGP,OAAO,CAACK,MAAD,EAASN,MAAT,EAAiB,CAAjB,CAAb,CAAA;;MAEA,IAAIQ,GAAG,IAAI,CAAX,EAAc;IACV,IAAA,OAAQ,OAAOD,IAAf,CAAA;IACH,GAFD,MAEO;QACHE,IAAI,GAAID,GAAG,IAAIV,SAAf,CAAA;;QAEA,IAAIU,GAAG,GAAG,CAAV,EAAa;IACTC,MAAAA,IAAI,IAAMH,MAAM,IAAI,CAAX,GAAgBT,UAAzB,CAAA;IACH,KAFD,MAEO;IACHY,MAAAA,IAAI,IAAMH,MAAM,IAAKE,GAAG,GAAG,CAAlB,GAAwBX,UAAjC,CAAA;IACH,KAAA;;QACD,OAAQY,IAAI,GAAGF,IAAf,CAAA;IACH,GAAA;IACJ,CAAA;;;IAyBD,SAASG,YAAT,CAAsBJ,MAAtB,EAA8B;MAC1B,IAAIC,IAAI,GAAG,CAAX,CAAA;;MACA,IAAID,MAAM,GAAG,CAAb,EAAgB;QACZA,MAAM,GAAGP,IAAI,GAAGO,MAAhB,CAAA;IACAC,IAAAA,IAAI,GAAG,IAAP,CAAA;IACH,GAHD,MAGO;IACHD,IAAAA,MAAM,IAAIP,IAAV,CAAA;IACAQ,IAAAA,IAAI,GAAG,IAAP,CAAA;IACH,GAAA;;MACD,IAAIC,GAAG,GAAGP,OAAO,CAACK,MAAD,EAASN,MAAT,EAAiB,CAAjB,CAAjB,CAAA;;MACA,IAAIQ,GAAG,IAAI,CAAX,EAAc;IACV,IAAA,OAAQ,OAAOD,IAAf,CAAA;IACH,GAFD,MAEO;IACH,IAAA,IAAII,IAAI,GAAIH,GAAG,IAAI,CAAR,GAAeF,MAAM,IAAKE,GAAG,GAAG,CAAlB,GAAwB,GAAjD,CAAA;QACA,OAAQG,IAAI,GAAGJ,IAAf,CAAA;IACH,GAAA;IACJ,CAAA;;;IAUM,SAASK,YAAT,CAAsBC,UAAtB,EAAkC;MACrC,MAAMC,SAAS,GAAG,EAAlB,CAAA;MACA,MAAMC,SAAS,GAAGC,KAAK,CAACC,SAAN,CAAgBtV,KAAhB,CAAsBuV,IAAtB,CAA2BL,UAA3B,CAAlB,CAAA;IACAE,EAAAA,SAAS,CAAC7U,OAAV,CAAkB,CAACL,CAAD,EAAIsV,KAAJ,KAAc;IAC5BL,IAAAA,SAAS,CAACK,KAAD,CAAT,GAAmBd,YAAY,CAACxU,CAAD,CAA/B,CAAA;OADJ,CAAA,CAAA;IAGA,EAAA,OAAOiV,SAAP,CAAA;IACH;;IAaM,SAASM,YAAT,CAAsBP,UAAtB,EAAkC;MACrC,MAAMC,SAAS,GAAG,EAAlB,CAAA;MACA,MAAMC,SAAS,GAAGC,KAAK,CAACC,SAAN,CAAgBtV,KAAhB,CAAsBuV,IAAtB,CAA2BL,UAA3B,CAAlB,CAAA;IACAE,EAAAA,SAAS,CAAC7U,OAAV,CAAkB,CAACL,CAAD,EAAIsV,KAAJ,KAAc;IAC5BL,IAAAA,SAAS,CAACK,KAAD,CAAT,GAAmBT,YAAY,CAAC7U,CAAD,CAA/B,CAAA;OADJ,CAAA,CAAA;IAGA,EAAA,OAAOiV,SAAP,CAAA;IACH;;IC/Hc,MAAMO,KAAN,CAAY;MACvBvE,WAAW,CAACwE,MAAD,EAAS;IAChB,IAAA,IAAA,CAAK7T,GAAL,GAAW,UAAC5C,IAAD,EAAmB;IAC1B,MAAA,IAAIyW,MAAM,CAACC,IAAP,CAAY/U,KAAZ,IAAqB8U,MAAM,CAACC,IAAP,CAAYvI,UAAZ,IAA0BzM,WAAW,CAACC,KAA/D,EAAsE;IAClE,QAAA,MAAMgV,MAAM,GAAGF,MAAM,CAACC,IAAP,CAAYE,SAAZ,GAAyB,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAP,CAAYE,SAAU,CAAA,CAAA,CAAlD,GAAuD,EAAtE,CAAA;;IADkE,QAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EADrDnW,IACqD,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;cADrDA,IACqD,CAAA,IAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,SAAA;;YAElEoW,OAAO,CAACjU,GAAR,CAAa,CAAO+T,KAAAA,EAAAA,MAAO,wBAAuB3W,IAAK,CAAA,CAAA,CAAvD,EAA2D,GAAGS,IAA9D,CAAA,CAAA;IACH,OAAA;SAJL,CAAA;;IAOA,IAAA,IAAA,CAAKmB,IAAL,GAAY,UAAC5B,IAAD,EAAmB;UAC3B,IAAIyW,MAAM,CAACC,IAAP,CAAY/U,KAAZ,KAAsB8U,MAAM,CAACC,IAAP,CAAYvI,UAAZ,IAA0BzM,WAAW,CAACC,KAAtC,IAA+C8U,MAAM,CAACC,IAAP,CAAYvI,UAAZ,IAA0BzM,WAAW,CAACE,IAA3G,CAAJ,EAAsH;IAClH,QAAA,MAAM+U,MAAM,GAAGF,MAAM,CAACC,IAAP,CAAYE,SAAZ,GAAyB,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAP,CAAYE,SAAU,CAAA,CAAA,CAAlD,GAAuD,EAAtE,CAAA;;IADkH,QAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EADpGnW,IACoG,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;cADpGA,IACoG,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,SAAA;;YAElHoW,OAAO,CAACjU,GAAR,CAAa,CAAO+T,KAAAA,EAAAA,MAAO,wBAAuB3W,IAAK,CAAA,CAAA,CAAvD,EAA2D,GAAGS,IAA9D,CAAA,CAAA;IACH,OAAA;SAJL,CAAA;;IAOA,IAAA,IAAA,CAAKoC,KAAL,GAAa,UAAC7C,IAAD,EAAmB;IAC5B,MAAA,MAAM2W,MAAM,GAAGF,MAAM,CAACC,IAAP,CAAYE,SAAZ,GAAyB,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAP,CAAYE,SAAU,CAAA,CAAA,CAAlD,GAAuD,EAAtE,CAAA;;IAD4B,MAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAATnW,IAAS,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;YAATA,IAAS,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,OAAA;;IAE5BoW,MAAAA,OAAO,CAAChU,KAAR,CAAe,CAAA,KAAA,EAAO8T,MAAO,CAAA,qBAAA,EAAuB3W,IAAK,CAAA,CAAA,CAAzD,EAA6D,GAAGS,IAAhE,CAAA,CAF4B;IAK5B;IACA;SANJ,CAAA;IAQH,GAAA;;IAxBsB;;ICAZ,MAAMqW,MAAN,CAAa;MACxB7E,WAAW,CAACwE,MAAD,EAAS;QAChB,IAAKM,CAAAA,QAAL,GAAgB,EAAhB,CAAA;QACA,IAAKC,CAAAA,KAAL,GAAa,IAAKA,CAAAA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb,CAAA;QACA,IAAKR,CAAAA,MAAL,GAAcA,MAAd,CAAA;IACH,GAAA;;IAEDO,EAAAA,KAAK,CAACE,MAAD,EAASlX,IAAT,EAAekB,QAAf,EAAsC;QAAA,IAAbiW,MAAa,uEAAJ,EAAI,CAAA;;QACvC,IAAI,CAACD,MAAL,EAAa;IACT,MAAA,OAAA;IACH,KAAA;;IACD,IAAA,IAAIf,KAAK,CAACiB,OAAN,CAAcpX,IAAd,CAAJ,EAAyB;IACrB,MAAA,OAAOA,IAAI,CAACqX,GAAL,CAASC,IAAI,IAAI,IAAKN,CAAAA,KAAL,CAAWE,MAAX,EAAmBI,IAAnB,EAAyBpW,QAAzB,EAAmCiW,MAAnC,CAAjB,CAAP,CAAA;IACH,KAAA;;IACDD,IAAAA,MAAM,CAACK,gBAAP,CAAwBvX,IAAxB,EAA8BkB,QAA9B,EAAwCiW,MAAxC,CAAA,CAAA;;QACA,MAAM1S,OAAO,GAAG,MAAM;IAClB,MAAA,IAAIwL,UAAU,CAACiH,MAAM,CAACM,mBAAR,CAAd,EAA4C;IACxCN,QAAAA,MAAM,CAACM,mBAAP,CAA2BxX,IAA3B,EAAiCkB,QAAjC,EAA2CiW,MAA3C,CAAA,CAAA;IACH,OAAA;SAHL,CAAA;;IAKA,IAAA,IAAA,CAAKJ,QAAL,CAAc3W,IAAd,CAAmBqE,OAAnB,CAAA,CAAA;IACA,IAAA,OAAOA,OAAP,CAAA;IACH,GAAA;;IAEDA,EAAAA,OAAO,GAAG;IACN,IAAA,IAAA,CAAKgS,MAAL,CAAY9U,KAAZ,IAAqB,KAAK8U,MAAL,CAAY9U,KAAZ,CAAkBiB,GAAlB,CAAuB,CAAvB,MAAA,CAAA,EAAgC,SAAhC,CAArB,CAAA;IACA,IAAA,IAAA,CAAKmU,QAAL,CAAc1V,OAAd,CAAsBoW,KAAK,IAAIA,KAAK,EAApC,CAAA,CAAA;QACA,IAAKV,CAAAA,QAAL,GAAgB,EAAhB,CAAA;IACH,GAAA;;IA5BuB;;ICyBb,MAAMW,IAAN,SAAmB5X,OAAnB,CAA2B;MACtCmS,WAAW,CAAC0F,MAAD,EAAuB;QAAA,IAAdzF,OAAc,uEAAJ,EAAI,CAAA;IAC9B,IAAA,KAAA,EAAA,CAAA;IACA;;QACA,IAAKwE,CAAAA,IAAL,GAAY,EAAZ,CAAA;;IAEA,IAAA,IAAIiB,MAAJ,EAAY;UACR,IAAKA,CAAAA,MAAL,GAAcA,MAAd,CAAA;IACH,KAAA;;QACD,IAAKC,CAAAA,GAAL,GAAW,MAAX,CAAA;QACA,MAAMC,cAAc,GAAGhG,qBAAqB,EAA5C,CAAA;QAEA,IAAK6E,CAAAA,IAAL,GAAYvV,MAAM,CAAC2W,MAAP,CAAc,EAAd,EAAkBD,cAAlB,EAAkC3F,OAAlC,CAAZ,CAAA;IAEA,IAAA,IAAA,CAAKwE,IAAL,CAAU1I,UAAV,GAAuB+G,QAAQ,CAAC,IAAK2B,CAAAA,IAAL,CAAU1I,UAAX,EAAuB,EAAvB,CAA/B,CAAA;IACA,IAAA,IAAA,CAAK0I,IAAL,CAAUzI,eAAV,GAA4B8G,QAAQ,CAAC,IAAK2B,CAAAA,IAAL,CAAUzI,eAAX,EAA4B,EAA5B,CAApC,CAAA;QACA,IAAK8J,CAAAA,YAAL,GAAoB,IAApB,CAAA;QACA,IAAKC,CAAAA,QAAL,GAAgB,IAAhB,CAAA;QACA,IAAKC,CAAAA,QAAL,GAAgB,IAAhB,CAAA;QACA,IAAKC,CAAAA,eAAL,GAAuB,IAAvB,CAAA;QACA,IAAKC,CAAAA,YAAL,GAAoB,IAApB,CAAA;QACA,IAAKC,CAAAA,eAAL,GAAuB,IAAvB,CAAA;IACA,IAAA,IAAA,CAAKC,sBAAL,GAA8B,IAA9B,CArB8B;;IAuB9B,IAAA,IAAA,CAAKC,UAAL,GAAkB,GAAlB,CAvB8B;;IAwB9B,IAAA,IAAA,CAAK5B,IAAL,CAAUpI,iBAAV,GAA8B,IAAA,CAAKiK,qBAAL,EAA9B,CAAA;IACA,IAAA,IAAA,CAAKC,eAAL,GAAuB,EAAvB,CAzB8B;;QA2B9B,IAAKC,CAAAA,MAAL,GAAc,IAAd,CAAA;IACA,IAAA,IAAA,CAAKC,YAAL,GAAoB1M,gBAAgB,CAACC,UAArC,CA5B8B;;QA+B9B,IAAK0M,CAAAA,iBAAL,GAAyB,IAAzB,CAAA;QACA,IAAKC,CAAAA,aAAL,GAAqB,IAArB,CAAA;QACA,IAAKpK,CAAAA,wBAAL,GAAgC,IAAhC,CAAA;QACA,IAAKqK,CAAAA,KAAL,GAAa,IAAb,CAAA;IACA,IAAA,IAAA,CAAKC,cAAL,GAAsB,CAAtB,CAnC8B;;QAsC9B,IAAKC,CAAAA,UAAL,GAAkB,CAAlB,CAAA;QACA,IAAKC,CAAAA,aAAL,GAAqB,IAArB,CAAA;QACA,IAAKC,CAAAA,iBAAL,GAAyB,EAAzB,CAAA;IACA,IAAA,IAAA,CAAKC,MAAL,GAAc,IAAIpC,MAAJ,CAAW,IAAX,CAAd,CAAA;;QAEA,IAAKqC,CAAAA,SAAL,GA3C8B;;;QA6C9B,IAAI,CAAC,IAAKxB,CAAAA,MAAV,EAAkB;IACd,MAAA,IAAA,CAAKhW,KAAL,GAAa,IAAI6U,KAAJ,CAAU,IAAV,CAAb,CAAA;IACH,KAAA;;IAED,IAAA,IAAI,CAAC,IAAA,CAAKE,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACC,KAApC,IAA6C,IAAKsK,CAAAA,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACE,KAAlF,KACA,EAAE,IAAA,CAAKqK,IAAL,CAAU1I,UAAV,KAAyB,IAAzB,IAAiC,IAAA,CAAK0I,IAAL,CAAUzI,eAAV,KAA8B,EAAjE,CADJ,EAC0E;IACtE,MAAA,IAAA,CAAKrM,IAAL,CAAU,IAAKgW,CAAAA,GAAf,EAAqB,CAAA;AACjC,uBAAA,EAAyB,IAAKlB,CAAAA,IAAL,CAAU/I,OAAQ,CAA0B,wBAAA,EAAA,IAAA,CAAK+I,IAAL,CAAUzI,eAAgB,CAAA,yBAAA,EAA2B,IAAKyI,CAAAA,IAAL,CAAUzI,eAAgB,CAAA;AACpJ,YAAA,EAAc,IAAKyI,CAAAA,IAAL,CAAU/I,OAAQ,CAFpB,oDAAA,CAAA,CAAA,CAAA;IAGH,KAAA;;IAGD,IAAA,IAAA,CAAK/K,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,MAAnB,EAA2BlG,IAAI,CAACC,SAAL,CAAe,IAAA,CAAK+E,IAApB,CAA3B,CAAA,CAAA;IACH,GAAA;;IAEDjS,EAAAA,OAAO,GAAG;QAEN,IAAI,IAAA,CAAK4T,sBAAT,EAAiC;UAC7Be,YAAY,CAAC,IAAKf,CAAAA,sBAAN,CAAZ,CAAA;UACA,IAAKA,CAAAA,sBAAL,GAA8B,IAA9B,CAAA;IACH,KALK;;;QAQN,IAAI,IAAA,CAAKD,eAAT,EAA0B;IACtB,MAAA,IAAA,CAAKA,eAAL,CAAqBiB,SAArB,IAAkC,IAAKjB,CAAAA,eAAL,CAAqBiB,SAArB,EAAiChY,CAAAA,OAAjC,CAA0CiY,KAAD,IAAW;IAClFA,QAAAA,KAAK,CAACC,IAAN,EAAA,CAAA;IACH,OAFiC,CAAlC,CAAA;UAGA,IAAKnB,CAAAA,eAAL,GAAuB,IAAvB,CAAA;IACH,KAAA;;QAED,IAAI,IAAA,CAAKO,iBAAT,EAA4B;UACxB,IAAKA,CAAAA,iBAAL,CAAuBa,UAAvB,EAAA,CAAA;UACA,IAAKb,CAAAA,iBAAL,GAAyB,IAAzB,CAAA;IACH,KAAA;;QACD,IAAI,IAAA,CAAKV,QAAT,EAAmB;UACf,IAAKA,CAAAA,QAAL,CAAcuB,UAAd,EAAA,CAAA;IACA,MAAA,IAAA,CAAKvB,QAAL,CAAcwB,cAAd,GAA+B,IAA/B,CAAA;UACA,IAAKxB,CAAAA,QAAL,GAAgB,IAAhB,CAAA;IACH,KAAA;;QAED,IAAI,IAAA,CAAKE,YAAT,EAAuB;UACnB,IAAKA,CAAAA,YAAL,CAAkBqB,UAAlB,EAAA,CAAA;UACA,IAAKrB,CAAAA,YAAL,GAAoB,IAApB,CAAA;IACH,KAAA;;QAED,IAAI,IAAA,CAAKH,QAAT,EAAmB;UACf,IAAKA,CAAAA,QAAL,CAAcwB,UAAd,EAAA,CAAA;UACA,IAAKxB,CAAAA,QAAL,GAAgB,IAAhB,CAAA;IACH,KAAA;;QAED,IAAI,IAAA,CAAKE,eAAT,EAA0B;UACtB,IAAKA,CAAAA,eAAL,CAAqBsB,UAArB,EAAA,CAAA;UACA,IAAKtB,CAAAA,eAAL,GAAuB,IAAvB,CAAA;IACH,KAAA;;QAED,IAAI,IAAA,CAAKO,MAAT,EAAiB;IACb,MAAA,IAAI,KAAKC,YAAL,KAAsB1M,gBAAgB,CAACE,IAA3C,EAAiD;IAC7C,QAAA,IAAA,CAAKwN,UAAL,EAAA,CAAA;IACH,OAAA;;UACD,IAAKjB,CAAAA,MAAL,CAAY1R,KAAZ,EAAA,CAAA;UACA,IAAK0R,CAAAA,MAAL,GAAc,IAAd,CAAA;IACH,KAAA;;IACD,IAAA,IAAA,CAAKkB,kBAAL,EAAA,CAAA;;IACA,IAAA,IAAA,CAAKC,6BAAL,EAAA,CAAA;;QACA,IAAK7B,CAAAA,YAAL,GAAoB,IAApB,CAAA;QACA,IAAKC,CAAAA,QAAL,GAAgB,IAAhB,CAAA;QACA,IAAKC,CAAAA,QAAL,GAAgB,IAAhB,CAAA;QACA,IAAKO,CAAAA,eAAL,GAAuB,EAAvB,CAAA;QACA,IAAKO,CAAAA,UAAL,GAAkB,CAAlB,CAAA;QACA,IAAKF,CAAAA,KAAL,GAAa,IAAb,CAAA;QACA,IAAKG,CAAAA,aAAL,GAAqB,IAArB,CAAA;QACA,IAAKC,CAAAA,iBAAL,GAAyB,EAAzB,CAAA;QACA,IAAKH,CAAAA,cAAL,GAAsB,CAAtB,CAAA;IAEA,IAAA,IAAA,CAAKlW,GAAL,CAAS,MAAT,EAAiB,SAAjB,CAAA,CAAA;IACH,GAAA;;MAEDiX,cAAc,CAAC5M,GAAD,EAAM;QAChB,MAAMxL,GAAG,GAAGwL,GAAG,CAAChM,MAAJ,GAAa,IAAA,CAAKgY,iBAAL,CAAuBhY,MAAhD,CAAA;IACA,IAAA,MAAMiD,MAAM,GAAG,IAAIqL,UAAJ,CAAe9N,GAAf,CAAf,CAAA;IACAyC,IAAAA,MAAM,CAAC4V,GAAP,CAAW,IAAKb,CAAAA,iBAAhB,EAAmC,CAAnC,CAAA,CAAA;QACA/U,MAAM,CAAC4V,GAAP,CAAW7M,GAAX,EAAgB,IAAKgM,CAAAA,iBAAL,CAAuBhY,MAAvC,CAAA,CAAA;IACA,IAAA,IAAA,CAAKgY,iBAAL,GAAyB/U,MAAzB,CALgB;IAOnB,GAAA;;IAED6V,EAAAA,eAAe,GAAG;QACd,MAAM5I,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAAC,IAAA,CAAK6H,iBAAN,CAAT,CAAb,CAAA;;QACA,IAAI;IACA,MAAA,MAAMe,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX,CAAA;UACAF,EAAE,CAACG,IAAH,GAAU9J,MAAM,CAACiB,GAAP,CAAWC,eAAX,CAA2BJ,IAA3B,CAAV,CAAA;IACA6I,MAAAA,EAAE,CAACI,QAAH,GAAcnL,IAAI,CAACD,GAAL,KAAa,MAA3B,CAAA;IACAgL,MAAAA,EAAE,CAACK,KAAH,EAAA,CAAA;IACAhK,MAAAA,MAAM,CAACiB,GAAP,CAAWgJ,eAAX,CAA2BN,EAAE,CAACG,IAA9B,CAAA,CAAA;SALJ,CAME,OAAOha,CAAP,EAAU;IACR0W,MAAAA,OAAO,CAAChU,KAAR,CAAc,iBAAd,EAAiC1C,CAAjC,CAAA,CAAA;IACH,KAAA;IACJ,GAAA;;IAEDoY,EAAAA,qBAAqB,GAAG;QACpB,MAAM;UAACvK,UAAD;IAAaC,MAAAA,eAAAA;SAAmB,GAAA,IAAA,CAAKyI,IAA3C,CADoB;;QAGpB,OAAS1I,UAAU,GAAG,CAAd,IAAoB,KAAK,IAAzB,CAAD,GAAmC,CAA1C,CAAA;IACH,GAAA;;IAEmB,EAAA,IAAhBuM,gBAAgB,GAAG;IACnB,IAAA,OAAO,IAAK7B,CAAAA,YAAL,KAAsB1M,gBAAgB,CAACE,IAA9C,CAAA;IACH,GAAA;;IAEDtJ,EAAAA,GAAG,GAAU;IAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANnC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;UAANA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,KAAA;;IACT,IAAA,IAAA,CAAK+Z,IAAL,CAAU,KAAV,EAAiB,GAAG/Z,IAApB,CAAA,CAAA;IACH,GAAA;;IAEDmB,EAAAA,IAAI,GAAU;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAANnB,IAAM,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAANA,IAAM,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;;IACV,IAAA,IAAA,CAAK+Z,IAAL,CAAU,MAAV,EAAkB,GAAG/Z,IAArB,CAAA,CAAA;IACH,GAAA;;IAEDoC,EAAAA,KAAK,GAAU;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAANpC,IAAM,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAANA,IAAM,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;;IACX,IAAA,IAAA,CAAK+Z,IAAL,CAAU,OAAV,EAAmB,GAAG/Z,IAAtB,CAAA,CAAA;IACH,GAAA;;MAED+Z,IAAI,CAACnJ,IAAD,EAAgB;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAAN5Q,IAAM,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAANA,IAAM,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;;QAChB,IAAI,IAAA,CAAKkX,MAAT,EAAiB;IACb,MAAA,IAAA,CAAKA,MAAL,CAAYhW,KAAZ,CAAkB0P,IAAlB,CAAA,CAAwB,GAAG5Q,IAA3B,CAAA,CAAA;IAEH,KAHD,MAGO,IAAI,IAAKkB,CAAAA,KAAT,EAAgB;IACnB,MAAA,IAAA,CAAKA,KAAL,CAAW0P,IAAX,CAAA,CAAiB,GAAG5Q,IAApB,CAAA,CAAA;IACH,KAFM,MAEA;IACHoW,MAAAA,OAAO,CAACxF,IAAD,CAAP,CAAc,GAAG5Q,IAAjB,CAAA,CAAA;IACH,KAAA;IACJ,GAAA;;IAEDga,EAAAA,cAAc,GAAG;QACb,OAAO,EAAE,KAAK1B,UAAd,CAAA;IACH,GAAA;;IAED2B,EAAAA,gBAAgB,GAAG;IACf,IAAA,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpC,MAAA,MAAM7D,KAAK,GAAG,IAAKkC,CAAAA,MAAL,CAAYlC,KAA1B,CAAA;IACA,MAAA,IAAA,CAAKyB,MAAL,GAAc,IAAIqC,SAAJ,CAAc,IAAA,CAAKjC,KAAnB,CAAd,CAAA;IACA,MAAA,IAAA,CAAKJ,MAAL,CAAYsC,UAAZ,GAAyB,aAAzB,CAAA;IACA,MAAA,IAAA,CAAKna,IAAL,CAAUkB,MAAM,CAACyF,eAAjB,CAAA,CAAA;UAEAyP,KAAK,CAAC,KAAKyB,MAAN,EAAcpL,gBAAgB,CAACnB,IAA/B,EAAqC,MAAM;IAC5C,QAAA,IAAA,CAAKwM,YAAL,GAAoB1M,gBAAgB,CAACE,IAArC,CAAA;IACA,QAAA,IAAA,CAAKtJ,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,2BAAnB,CAAA,CAAA;IACA,QAAA,IAAA,CAAKhX,IAAL,CAAUkB,MAAM,CAAC0F,cAAjB,CAAA,CAAA;YACAoT,OAAO,EAAA,CAAA;;IACP,QAAA,IAAA,CAAKI,OAAL,EAAA,CAAA;IACH,OANI,CAAL,CAAA;UAQAhE,KAAK,CAAC,KAAKyB,MAAN,EAAcpL,gBAAgB,CAACC,OAA/B,EAAyCmK,KAAD,IAAW;YACpD,IAAK7U,CAAAA,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,mBAAnB,EAAwCH,KAAK,CAAC1W,IAA9C,CAAA,CAAA;IACH,OAFI,CAAL,CAAA;UAIAiW,KAAK,CAAC,KAAKyB,MAAN,EAAcpL,gBAAgB,CAACtG,KAA/B,EAAuC5G,CAAD,IAAO;IAC9C,QAAA,IAAA,CAAKuY,YAAL,GAAoB1M,gBAAgB,CAACjF,KAArC,CAAA;IACA,QAAA,IAAA,CAAKnF,IAAL,CAAU,IAAA,CAAKgW,GAAf,EAAoB,2BAApB,EAAiDzX,CAAjD,CAAA,CAAA;IACA,QAAA,IAAA,CAAKS,IAAL,CAAUkB,MAAM,CAAC2F,eAAjB,CAAA,CAAA;YACAoT,MAAM,CAAC1a,CAAD,CAAN,CAAA;IACH,OALI,CAAL,CAAA;UAMA6W,KAAK,CAAC,KAAKyB,MAAN,EAAcpL,gBAAgB,CAACxK,KAA/B,EAAuCA,KAAD,IAAW;IAClD,QAAA,IAAA,CAAK6V,YAAL,GAAoB1M,gBAAgB,CAACnJ,KAArC,CAAA;IACA,QAAA,IAAA,CAAKA,KAAL,CAAW,IAAA,CAAK+U,GAAhB,EAAqB,2BAArB,EAAkD/U,KAAlD,CAAA,CAAA;IACA,QAAA,IAAA,CAAKjC,IAAL,CAAUkB,MAAM,CAAC4F,eAAjB,EAAkC7E,KAAlC,CAAA,CAAA;YACAgY,MAAM,CAAChY,KAAD,CAAN,CAAA;IACH,OALI,CAAL,CAAA;IAMH,KA9BM,CAAP,CAAA;IA+BH,GAAA;;IAED6W,EAAAA,UAAU,GAAG,EAEZ;;IAGDP,EAAAA,SAAS,GAAG;IAER,IAAA,IAAA,CAAK8B,YAAL,EAAA,CAAA;;QACA,IAAI,IAAA,CAAKvE,IAAL,CAAUnI,MAAV,KAAqBhB,WAAW,CAACC,OAArC,EAA8C;IAC1C,MAAA,IAAA,CAAK0N,YAAL,EAAA,CAAA;SADJ,MAEO,IAAI,IAAA,CAAKxE,IAAL,CAAUnI,MAAV,KAAqBhB,WAAW,CAACE,MAArC,EAA6C;IAChD,MAAA,IAAA,CAAK0N,oBAAL,EAAA,CAAA;IACH,KAAA;;QACD,IAAKvY,CAAAA,GAAL,CAAS,IAAA,CAAKgV,GAAd,EAAmB,yBAAnB,EAA8C,IAAA,CAAKG,YAAL,CAAkB/J,UAAhE,CAAA,CAAA;IACH,GAAA;;IAEDiN,EAAAA,YAAY,GAAG;IACX;QACA,IAAKlD,CAAAA,YAAL,GAAoB,KAAK1H,MAAM,CAAC+K,YAAP,IAAuB/K,MAAM,CAACgL,kBAAnC,EAAuD;IAACrN,MAAAA,UAAU,EAAE,KAAA;IAAb,KAAvD,CAApB,CAAA;QACA,IAAKgK,CAAAA,QAAL,GAAgB,IAAKD,CAAAA,YAAL,CAAkBuD,UAAlB,EAAhB,CAHW;;QAKX,IAAKtD,CAAAA,QAAL,CAAcuD,IAAd,CAAmBxJ,KAAnB,GAA2B,CAA3B,CALW;;IAQX,IAAA,IAAA,CAAKoG,YAAL,GAAoB,IAAA,CAAKJ,YAAL,CAAkByD,kBAAlB,EAApB,CAAA;IACA,IAAA,IAAA,CAAKrD,YAAL,CAAkB9G,IAAlB,GAAyB,SAAzB,CAAA;IACA,IAAA,IAAA,CAAK8G,YAAL,CAAkBsD,SAAlB,CAA4B1J,KAA5B,GAAoC,IAApC,CAAA;IAEA,IAAA,IAAA,CAAKS,SAAL,GAAiB,IAAIR,SAAJ,CAAc;IAC3BG,MAAAA,cAAc,EAAE,IAAA,CAAK4F,YAAL,CAAkB/J,UADP;IAE3BoE,MAAAA,YAAY,EAAE,IAAA,CAAKsE,IAAL,CAAU1I,UAFG;IAG3BqE,MAAAA,QAAQ,EAAE,IAAA,CAAKqE,IAAL,CAAU3I,cAHO;IAI3BuE,MAAAA,eAAe,EAAE,IAAKgG,CAAAA,UAAAA;IAJK,KAAd,CAAjB,CAAA;IAMH,GAAA;;IAED6C,EAAAA,oBAAoB,GAAG;IACnB;QACA,MAAMO,YAAY,GAAG,IAAA,CAAK3D,YAAL,CAAkB4D,qBAAlB,IAA2C,IAAA,CAAK5D,YAAL,CAAkB6D,oBAAlF,CAAA;QACA,IAAK3D,CAAAA,QAAL,GAAgByD,YAAY,CAAChb,KAAb,CAAmB,IAAA,CAAKqX,YAAxB,EAAsC,CAAC,IAAA,CAAKO,UAAN,EAAkB,IAAA,CAAK5B,IAAL,CAAU3I,cAA5B,EAA4C,KAAK2I,IAAL,CAAU3I,cAAtD,CAAtC,CAAhB,CAAA;;QACA,IAAKkK,CAAAA,QAAL,CAAcwB,cAAd,GAAgCtZ,CAAD,IAAO,IAAK0b,CAAAA,eAAL,CAAqB1b,CAArB,CAAtC,CAAA;IACH,GAAA;;IAED+a,EAAAA,YAAY,GAAG;IACX,IAAA,SAASY,cAAT,GAA0B;UACtB,MAAMC,aAAN,SAA4BC,qBAA5B,CAAkD;YAC9C/J,WAAW,CAACC,OAAD,EAAU;IACjB,UAAA,KAAA,EAAA,CAAA;cACA,IAAK+J,CAAAA,OAAL,GAAe,CAAf,CAAA;IACA,UAAA,IAAA,CAAKC,WAAL,GAAmBhK,OAAO,CAACiK,gBAAR,CAAyB7D,UAA5C,CAAA;IACA,UAAA,IAAA,CAAK8D,OAAL,GAAe,IAAI9I,YAAJ,CAAiB,IAAA,CAAK4I,WAAtB,CAAf,CAAA;IACH,SAAA;;IAEDG,QAAAA,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,UAAlB,EAA8B;IACjC,UAAA,IAAI,CAACF,MAAM,CAACrb,MAAR,IAAkB,CAACqb,MAAM,CAAC,CAAD,CAAN,CAAUrb,MAAjC,EAAyC;IACrC,YAAA,OAAO,IAAP,CAAA;IACH,WAAA;;IACD,UAAA,KAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsb,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,CAAarb,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;gBAC1C,IAAKib,CAAAA,OAAL,IAAgB,CAAhB,CAAA;;IACA,YAAA,IAAI,IAAKA,CAAAA,OAAL,KAAiB,IAAA,CAAKC,WAA1B,EAAuC;kBACnC,IAAKD,CAAAA,OAAL,GAAe,CAAf,CAAA;kBACA,IAAKQ,CAAAA,IAAL,CAAUC,WAAV,CAAsB;IAClBC,gBAAAA,SAAS,EAAE,MADO;IAElBzY,gBAAAA,MAAM,EAAE,IAAKkY,CAAAA,OAAAA;mBAFjB,CAAA,CAAA;IAIH,aAAA;;IACD,YAAA,IAAA,CAAKA,OAAL,CAAa,IAAKH,CAAAA,OAAlB,CAA6BK,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,CAAatb,CAAb,CAA7B,CAAA;IACH,WAAA;;IAED,UAAA,OAAO,IAAP,CAAA;IACH,SAAA;;IAzB6C,OAAA;;IA4BlD4b,MAAAA,iBAAiB,CAAC,gBAAD,EAAmBb,aAAnB,CAAjB,CAAA;IACH,KAAA;;IAED,IAAA,MAAMc,UAAU,GAAGlM,sBAAsB,CAACmL,cAAD,CAAzC,CAAA;IACA,IAAA,IAAA,CAAK/D,YAAL,CAAkB+E,YAAlB,IAAkC,KAAK/E,YAAL,CAAkB+E,YAAlB,CAA+BC,SAA/B,CAAyCF,UAAzC,CAAqDG,CAAAA,IAArD,CAA0D,MAAM;UAC9F,MAAMC,WAAW,GAAG,IAAIC,gBAAJ,CAAqB,IAAKnF,CAAAA,YAA1B,EAAwC,gBAAxC,EAA0D;IAC1EoE,QAAAA,gBAAgB,EAAE;IACd7D,UAAAA,UAAU,EAAE,IAAKA,CAAAA,UAAAA;IADH,SAAA;IADwD,OAA1D,CAApB,CAAA;IAKA2E,MAAAA,WAAW,CAACE,OAAZ,CAAoB,IAAA,CAAKnF,QAAzB,CAAA,CAAA;;IACAiF,MAAAA,WAAW,CAACR,IAAZ,CAAiBW,SAAjB,GAA8Bjd,CAAD,IAAO;IAChC,QAAA,IAAIA,CAAC,CAACY,IAAF,CAAO4b,SAAP,KAAqB,MAAzB,EAAiC;IAC7B,UAAA,IAAA,CAAKU,gBAAL,CAAsBld,CAAC,CAACY,IAAF,CAAOmD,MAA7B,CAAA,CAAA;IACH,SAAA;WAHL,CAAA;;UAKA,IAAKgU,CAAAA,eAAL,GAAuB+E,WAAvB,CAAA;IACH,KAbiC,CAAlC,CAAA;IAeA,IAAA,IAAA,CAAK5E,sBAAL,GAA8BiF,UAAU,CAAC,MAAM;UAC3ChM,GAAG,CAACgJ,eAAJ,CAAoBuC,UAApB,CAAA,CAAA;UACA,IAAKxE,CAAAA,sBAAL,GAA8B,IAA9B,CAAA;SAFoC,EAGrCxW,qBAHqC,CAAxC,CAAA;IAIH,GAAA;;MAGDga,eAAe,CAAC1b,CAAD,EAAI;IACf;IACA;QACA,MAAMod,YAAY,GAAGpd,CAAC,CAACqd,WAAF,CAAcC,cAAd,CAA6B,CAA7B,CAArB,CAHe;;IAKf,IAAA,IAAA,CAAKJ,gBAAL,CAAsB,IAAI/J,YAAJ,CAAiBiK,YAAjB,CAAtB,CAAA,CAAA;IACH,GAAA;;MAEDF,gBAAgB,CAACE,YAAD,EAAe;IAC3B;IACA,IAAA,IAAIA,YAAY,CAAC,CAAD,CAAZ,KAAoB,CAApB,IAAyBA,YAAY,CAAC,CAAD,CAAZ,KAAoB,CAAjD,EAAoD;IAChD,MAAA,IAAA,CAAK3a,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,kBAAnB,CAAA,CAAA;IACA,MAAA,OAAA;IACH,KAAA;;QAED,MAAM8F,cAAc,GAAG,IAAA,CAAKlL,SAAL,CAAe8B,QAAf,CAAwBiJ,YAAxB,CAAvB,CAP2B;;QAS3B,IAAII,eAAe,GAAGD,cAAtB,CAAA;;IACA,IAAA,IAAI,KAAKhH,IAAL,CAAUzI,eAAV,KAA8B,EAAlC,EAAsC;IAClC0P,MAAAA,eAAe,GAAGpJ,eAAe,CAACmJ,cAAD,CAAjC,CAAA;SADJ,MAEO,IAAI,IAAKhH,CAAAA,IAAL,CAAUzI,eAAV,KAA8B,CAAlC,EAAqC;IACxC0P,MAAAA,eAAe,GAAG/I,cAAc,CAAC8I,cAAD,CAAhC,CAAA;IACH,KAAA;;IAED,IAAA,IAAIC,eAAe,CAACzZ,MAAhB,KAA2B,IAA/B,EAAqC;UACjC,IAAI8R,UAAU,GAAG,IAAjB,CAAA;;UACA,IAAI,IAAA,CAAKU,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACC,KAAxC,EAA+C;IAC3C4J,QAAAA,UAAU,GAAGD,YAAY,CAAC4H,eAAD,CAAzB,CAAA;WADJ,MAEO,IAAI,IAAA,CAAKjH,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACE,KAAxC,EAA+C;IAClD2J,QAAAA,UAAU,GAAGO,YAAY,CAACoH,eAAD,CAAzB,CAAA;WADG,MAEA,IAAI,IAAA,CAAKjH,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACG,GAAxC,EAA6C;IAChD0J,QAAAA,UAAU,GAAG2H,eAAb,CAAA;IACH,OARgC;;;IAUjC,MAAA,MAAMC,UAAU,GAAG,IAAIrO,UAAJ,CAAeyG,UAAf,CAAnB,CAAA;;IACA,MAAA,KAAK,IAAIhV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4c,UAAU,CAAC3c,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;IACxC,QAAA,IAAIsN,iBAAiB,GAAG,IAAKkK,CAAAA,eAAL,CAAqBvX,MAA7C,CAAA;YACA,IAAKuX,CAAAA,eAAL,CAAqBlK,iBAAiB,EAAtC,IAA4CsP,UAAU,CAAC5c,CAAD,CAAtD,CAAA;;YACA,IAAI,IAAA,CAAKwX,eAAL,CAAqBvX,MAArB,KAAgC,IAAKyV,CAAAA,IAAL,CAAUpI,iBAA9C,EAAiE;IAC7D,UAAA,IAAA,CAAKuP,YAAL,CAAkB,IAAItO,UAAJ,CAAe,IAAA,CAAKiJ,eAApB,CAAlB,CAAA,CAAA;;cACA,IAAKA,CAAAA,eAAL,GAAuB,EAAvB,CAAA;IACH,SAAA;IACJ,OAAA;IACJ,KAAA;IACJ,GAAA;;MAEDsF,cAAc,CAAC9H,UAAD,EAAa;IACvB,IAAA,IAAI+H,UAAU,GAAG,IAAjB,CADuB;;QAGvB,IAAI,IAAA,CAAKrH,IAAL,CAAU9I,UAAV,KAAyBb,gBAAgB,CAACE,GAA1C,KACC,IAAKyJ,CAAAA,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACC,KAApC,IAA6C,IAAA,CAAKsK,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACE,KADlF,CAAJ,EAC8F;IAC1F0R,MAAAA,UAAU,GAAG,IAAA,CAAKC,SAAL,CAAehI,UAAf,CAAb,CAAA;SAFJ,MAGO,IAAI,IAAA,CAAKU,IAAL,CAAU9I,UAAV,KAAyBb,gBAAgB,CAACC,KAA9C,EAAqD;IACxD;IACA+Q,MAAAA,UAAU,GAAG/H,UAAb,CAAA;IACH,KAAA;;IAED,IAAA,OAAO+H,UAAP,CAAA;IACH,GAAA;;MAEDC,SAAS,CAAChI,UAAD,EAAa;IAClB,IAAA,MAAMiI,SAAS,GAAG,EAAlB,CADkB;;IAGlB,IAAA,MAAMC,OAAO,GAAG,CAAhB,CAHkB;;IAKlB,IAAA,MAAMC,OAAO,GAAG,CAAhB,CALkB;;IAOlB,IAAA,MAAMC,SAAS,GAAG,CAAlB,CAPkB;;IASlB,IAAA,MAAMC,SAAS,GAAG,CAAlB,CATkB;;IAWlB,IAAA,MAAMC,MAAM,GAAG,CAAf,CAXkB;;IAalB,IAAA,IAAIC,YAAY,GAAG,CAAnB,CAbkB;;IAelB,IAAA,IAAIC,cAAc,GAAG,CAArB,CAfkB;;IAiBlB,IAAA,IAAIC,SAAS,GAAG,CAAhB,CAjBkB;;IAmBlB,IAAA,MAAMC,IAAI,GAAG,IAAA,CAAKhI,IAAL,CAAU5I,OAAvB,CAnBkB;;IAqBlB,IAAA,MAAM6Q,QAAQ,GAAG3I,UAAU,CAAC/U,MAA5B,CAAA;;QAEA,IAAI,IAAA,CAAKyV,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACC,KAAxC,EAA+C;UAC3CmS,YAAY,GAAG/R,gBAAgB,CAACJ,KAAhC,CAAA;SADJ,MAEO,IAAI,IAAA,CAAKsK,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACE,KAAxC,EAA+C;UAClDkS,YAAY,GAAG/R,gBAAgB,CAACH,KAAhC,CAAA;SADG,MAEA,IAAI,IAAA,CAAKqK,IAAL,CAAU/I,OAAV,KAAsBxB,aAAa,CAACI,IAAxC,EAA8C;UACjDgS,YAAY,GAAG/R,gBAAgB,CAACD,IAAhC,CAAA;IACH,KAAA;;QAED,IAAI,CAAC,IAAKuM,CAAAA,cAAV,EAA0B;UACtB,IAAKA,CAAAA,cAAL,GAAsB9J,GAAG,EAAzB,CAAA;IACH,KAAA;;IACDyP,IAAAA,SAAS,GAAGzP,GAAG,EAAK,GAAA,IAAA,CAAK8J,cAAzB,CAAA;IACA0F,IAAAA,cAAc,GAAG,IAAA,CAAK/D,cAAL,EAAjB,CAnCkB;IAsClB;IACA;IACA;IACA;;QACA,IAAInE,KAAK,GAAG,CAAZ,CAAA;;QAEA,IAAI,IAAA,CAAKI,IAAL,CAAU7I,iBAAV,KAAgCX,0BAA0B,CAACC,GAA/D,EAAoE;IAChE,MAAA,MAAMyR,WAAW,GAAGD,QAAQ,GAAG,EAA/B,CADgE;;UAGhEV,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAqB,OAAQsI,WAAW,IAAI,CAA5C,CAHgE;;UAKhEX,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAqB,IAAQsI,GAAAA,WAAW,IAAI,CAA5C,CAAA;IACH,KAAA;;IAEDX,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAsB,CAAC4H,OAAO,IAAI,CAAZ,KAAkBC,OAAO,IAAI,CAA7B,CAAA,IAAmCC,SAAS,IAAI,CAAhD,IAAqDC,SAA3E,CAAA;QACAJ,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAsB,CAACgI,MAAM,IAAI,CAAX,IAAgBC,YAAtC,CAAA;QACAN,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAsBkI,cAAc,IAAI,IAAO,GAAA,CAAX,CAApC,CAAA;QACAP,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAsBkI,cAAc,IAAI,IAAO,GAAA,CAAX,CAApC,CAAA;IACAP,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBmI,SAAS,IAAI,MAAA,GAAS,CAAb,CAAV,IAA8B,IAAA,GAAO,CAArC,CAAtB,CAAA;IACAR,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBmI,SAAS,IAAI,MAAA,GAAS,CAAb,CAAV,IAA8B,IAAA,GAAO,CAArC,CAAtB,CAAA;IACAR,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBmI,SAAS,IAAI,MAAA,GAAS,CAAb,CAAV,IAA8B,IAAA,GAAO,CAArC,CAAtB,CAAA;IACAR,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBmI,SAAS,IAAI,MAAA,GAAS,CAAb,CAAV,IAA8B,IAAA,GAAO,CAArC,CAAtB,CAAA;IACAR,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBoI,IAAI,IAAI,MAAA,GAAS,CAAb,CAAL,IAAyB,IAAA,GAAO,CAAhC,CAAtB,CAAA;IACAT,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBoI,IAAI,IAAI,MAAA,GAAS,CAAb,CAAL,IAAyB,IAAA,GAAO,CAAhC,CAAtB,CAAA;IACAT,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBoI,IAAI,IAAI,MAAA,GAAS,CAAb,CAAL,IAAyB,IAAA,GAAO,CAAhC,CAAtB,CAAA;IACAT,IAAAA,SAAS,CAAC3H,KAAK,EAAN,CAAT,GAAuBoI,IAAI,IAAI,MAAA,GAAS,CAAb,CAAL,IAAyB,IAAA,GAAO,CAAhC,CAAtB,CAAA;QAEA,IAAIX,UAAU,GAAGE,SAAS,CAACY,MAAV,CAAiB,CAAC,GAAG7I,UAAJ,CAAjB,CAAjB,CAAA;QAEA,IAAI8I,MAAM,GAAG,IAAIvP,UAAJ,CAAewO,UAAU,CAAC9c,MAA1B,CAAb,CAAA;;IACA,IAAA,KAAK,IAAI8d,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGhB,UAAU,CAAC9c,MAAjC,EAAyC8d,EAAE,EAA3C,EAA+C;IAC3CD,MAAAA,MAAM,CAACC,EAAD,CAAN,GAAahB,UAAU,CAACgB,EAAD,CAAvB,CAAA;IACH,KAAA;;IAED,IAAA,OAAOD,MAAP,CAAA;IACH,GAAA;;MAGDE,UAAU,CAAChJ,UAAD,EAAa;IACnB;IAEA,IAAA,OAAOA,UAAP,CAAA;IACH,GAAA;;MAED6H,YAAY,CAAC7H,UAAD,EAAa;IACrB,IAAA,IAAI,IAAKgD,CAAAA,aAAL,KAAuB,IAA3B,EAAiC;UAC7B,IAAKA,CAAAA,aAAL,GAAqBhK,GAAG,EAAxB,CAAA;IACH,KAAA;;QACD,MAAMyP,SAAS,GAAGzP,GAAG,EAArB,CAAA;IACA,IAAA,MAAMiQ,IAAI,GAAGR,SAAS,GAAG,KAAKzF,aAA9B,CAAA;;IACA,IAAA,MAAMkG,WAAW,GAAG,IAAA,CAAKpB,cAAL,CAAoB9H,UAApB,CAApB,CAAA;;IACA,IAAA,IAAA,CAAKpT,GAAL,CAAS,IAAA,CAAKgV,GAAd,EAAoB,CAAA,2BAAA,EAA6BqH,IAAK,CAAqBC,mBAAAA,EAAAA,WAAW,CAACC,UAAW,CAAA,eAAA,EAAiBD,WAAW,CAACje,MAAO,wBAAuB+U,UAAU,CAAC/U,MAAO,CAA/K,CAAA,CAAA,CAAA;;IAEA,IAAA,IAAI6Q,MAAM,CAAC,IAAA,CAAK4E,IAAL,CAAUrI,aAAX,CAAV,EAAqC;UACjC,IAAI,IAAA,CAAKqI,IAAL,CAAU9I,UAAV,KAAyBb,gBAAgB,CAACE,GAA9C,EAAmD;YAC/C,IAAK4M,CAAAA,cAAL,CAAoBqF,WAApB,CAAA,CAAA;IACH,OAAA;IACJ,KAAA;;IAGD,IAAA,IAAIA,WAAJ,EAAiB;UACb,IAAI,IAAA,CAAK3E,gBAAT,EAA2B;IACvB,QAAA,IAAA,CAAK9B,MAAL,CAAY2G,IAAZ,CAAiBF,WAAW,CAAChb,MAA7B,CAAA,CAAA;IACH,OAFD,MAEO;IACH,QAAA,IAAA,CAAKtD,IAAL,CAAU6I,YAAY,CAAC2B,0BAAvB,CAAA,CAAA;IACH,OAAA;IACJ,KAAA;;QACD,IAAK4N,CAAAA,aAAL,GAAqByF,SAArB,CAAA;IACH,GAAA;;IAEDzD,EAAAA,OAAO,GAAG;QACN,IAAKqE,CAAAA,aAAL,GADM;IAGN;;IACH,GAAA;;IAEDA,EAAAA,aAAa,GAAG;IACZ,IAAA,IAAA,CAAKzc,GAAL,CAAS,IAAA,CAAKgV,GAAd,EAAmB,cAAnB,EADY;;IAGZ,IAAA,IAAIvH,MAAM,CAACD,SAAP,CAAiBE,YAAjB,KAAkCgP,SAAtC,EAAiD;IAC7CjP,MAAAA,MAAM,CAACD,SAAP,CAAiBE,YAAjB,GAAgC,EAAhC,CAAA;IACH,KALW;IAQZ;;;QACA,IAAID,MAAM,CAACD,SAAP,CAAiBE,YAAjB,CAA8BC,YAA9B,KAA+C+O,SAAnD,EAA8D;IAC1D,MAAA,IAAA,CAAK1c,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,2EAAnB,CAAA,CAAA;;UACAvH,MAAM,CAACD,SAAP,CAAiBE,YAAjB,CAA8BC,YAA9B,GAA6C,UAAUgP,WAAV,EAAuB;IAChE;IACA,QAAA,IAAIhP,YAAY,GAAGH,SAAS,CAACG,YAAV,IAA0BH,SAAS,CAACI,kBAApC,IAA0DJ,SAAS,CAACK,eAApE,IAAuFL,SAAS,CAACM,cAApH,CAFgE;IAKhE;IACA;IACA;;YACA,IAAI,CAACH,YAAL,EAAmB;cACf,OAAOoK,OAAO,CAACE,MAAR,CAAe,IAAItI,KAAJ,CAAU,iDAAV,CAAf,CAAP,CAAA;IACH,SAV+D;;;IAahE,QAAA,OAAO,IAAIoI,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;cAC1CtK,YAAY,CAAC8F,IAAb,CAAkBjG,SAAlB,EAA6BmP,WAA7B,EAA0C3E,OAA1C,EAAmDC,MAAnD,CAAA,CAAA;IACH,SAFM,CAAP,CAAA;WAbJ,CAAA;IAiBH,KAAA;;IAED,IAAA,IAAI,IAAKnE,CAAAA,IAAL,CAAUlI,wBAAd,EAAwC;IACpC,MAAA,IAAA,CAAKgR,8BAAL,EAAA,CAAA;IACH,KAhCW;IAkCZ;IACA;;;IACAnP,IAAAA,MAAM,CAACD,SAAP,CAAiBE,YAAjB,CAA8BC,YAA9B,CAA2C;IACvCkP,MAAAA,KAAK,EAAE,IAAA,CAAK/I,IAAL,CAAUhI,gBADsB;IAEvCgR,MAAAA,KAAK,EAAE,KAAA;IAFgC,KAA3C,CAGG1C,CAAAA,IAHH,CAGS2C,MAAD,IAAY;IAChB,MAAA,IAAA,CAAK/c,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,sBAAnB,CAAA,CAAA;UACA,IAAKQ,CAAAA,eAAL,GAAuBuH,MAAvB,CAAA;UACA,IAAKhH,CAAAA,iBAAL,GAAyB,IAAKZ,CAAAA,YAAL,CAAkB6H,uBAAlB,CAA0CD,MAA1C,CAAzB,CAAA;IACA,MAAA,IAAA,CAAKhH,iBAAL,CAAuBwE,OAAvB,CAA+B,KAAKhF,YAApC,CAAA,CAAA;;UACA,IAAI,IAAA,CAAKF,QAAT,EAAmB;IACf,QAAA,IAAA,CAAKE,YAAL,CAAkBgF,OAAlB,CAA0B,KAAKlF,QAA/B,CAAA,CAAA;IACA,QAAA,IAAA,CAAKA,QAAL,CAAckF,OAAd,CAAsB,KAAKnF,QAA3B,CAAA,CAAA;IACH,OAHD,MAGO,IAAI,IAAKE,CAAAA,eAAT,EAA0B;IAC7B,QAAA,IAAA,CAAKC,YAAL,CAAkBgF,OAAlB,CAA0B,KAAKjF,eAA/B,CAAA,CAAA;IACA,QAAA,IAAA,CAAKA,eAAL,CAAqBiF,OAArB,CAA6B,KAAKnF,QAAlC,CAAA,CAAA;IACH,OAAA;;IAED,MAAA,IAAA,CAAKA,QAAL,CAAcmF,OAAd,CAAsB,IAAKpF,CAAAA,YAAL,CAAkB8H,WAAxC,CAAA,CAAA;IACA,MAAA,IAAA,CAAKjf,IAAL,CAAUkB,MAAM,CAACsF,uBAAjB,EAdgB;;IAiBhB,MAAA,IAAIuY,MAAM,CAACG,UAAP,KAAsB,IAA1B,EAAgC;IAC5BH,QAAAA,MAAM,CAACG,UAAP,GAAqB3f,CAAD,IAAO;cACvB,IAAK4f,CAAAA,qBAAL,CAA2B5f,CAA3B,CAAA,CAAA;aADJ,CAAA;IAGH,OAAA;IACJ,KAzBD,CAyBG6f,CAAAA,KAzBH,CAyBU7f,CAAD,IAAO;UACZ,IAAK0C,CAAAA,KAAL,CAAW,IAAA,CAAK+U,GAAhB,EAAqB,oBAArB,EAA2CzX,CAAC,CAAC+Q,QAAF,EAA3C,CAAA,CAAA;UACA,IAAKtQ,CAAAA,IAAL,CAAUkB,MAAM,CAACuF,oBAAjB,EAAuClH,CAAC,CAAC+Q,QAAF,EAAvC,CAAA,CAAA;SA3BJ,CAAA,CA4BG+O,OA5BH,CA4BW,MAAM;IACb,MAAA,IAAA,CAAKrd,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,sBAAnB,CAAA,CAAA;;IACA,MAAA,IAAA,CAAKgC,6BAAL,EAAA,CAAA;SA9BJ,CAAA,CAAA;IAgCH,GAAA;;IAGDsG,EAAAA,cAAc,GAAG;IACb,IAAA,IAAA,CAAKtd,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,cAAnB,CAAA,CAAA;QACAxH,SAAS,CAACE,YAAV,GACIF,SAAS,CAACE,YAAV,CAAuBC,YAAvB,CACI;IAACkP,MAAAA,KAAK,EAAE,IAAA;IAAR,KADJ,CACmBzC,CAAAA,IADnB,CAEK2C,MAAD,IAAY;IACR,MAAA,IAAA,CAAK/c,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,uBAAnB,CAAA,CAAA;IACH,KAJL,CADJ,GAOIxH,SAAS,CAACG,YAAV,CACI;IAACkP,MAAAA,KAAK,EAAE,IAAA;IAAR,KADJ,EAEI,IAAK7c,CAAAA,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,uBAAnB,CAFJ,EAGI,IAAA,CAAKhV,GAAL,CAAS,IAAA,CAAKgV,GAAd,EAAmB,oBAAnB,CAHJ,CAPJ,CAAA;IAYH,GAAA;;IAEmB,EAAA,MAAduI,cAAc,GAAG;IACnB,IAAA,IAAA,CAAKvd,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,eAAnB,CAAA,CAAA;;QACA,IAAI;UACA,MAAM+H,MAAM,GAAG,MAAMvP,SAAS,CAACE,YAAV,CAAuBC,YAAvB,CAAoC;IACrDkP,QAAAA,KAAK,EAAE;IACH9Q,UAAAA,OAAO,EAAE,IADN;IAEHC,UAAAA,gBAAgB,EAAE,IAFf;IAGHC,UAAAA,eAAe,EAAE,IAHd;IAIHC,UAAAA,gBAAgB,EAAE,IAJf;IAKHd,UAAAA,UAAU,EAAE,KALT;IAMHe,UAAAA,YAAY,EAAE,CAAA;aAPmC;IASrD2Q,QAAAA,KAAK,EAAE,KAAA;IAT8C,OAApC,CAArB,CAAA;IAWA7I,MAAAA,OAAO,CAACjU,GAAR,CAAY,4BAAZ,EAA0C+c,MAA1C,CAAA,CAAA;IACA,MAAA,IAAA,CAAK/c,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,uBAAnB,CAAA,CAAA;SAbJ,CAcE,OAAOzX,CAAP,EAAU;IACR,MAAA,IAAA,CAAKyC,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,oBAAnB,CAAA,CAAA;IACH,KAAA;IACJ,GAAA;;MAEDmI,qBAAqB,CAAC5f,CAAD,EAAI;QACrB,IAAI,IAAA,CAAKiY,eAAT,EAA0B;IACtB,MAAA,IAAA,CAAKxW,IAAL,CAAU,IAAA,CAAKgW,GAAf,EAAoB,mBAApB,EAAyCzX,CAAzC,CAAA,CAAA;IACA,MAAA,IAAA,CAAKS,IAAL,CAAUkB,MAAM,CAAC6F,kBAAjB,CAAA,CAAA;IACH,KAAA;IACJ,GAAA;;IAED6X,EAAAA,8BAA8B,GAAG;IAC7B,IAAA,IAAA,CAAK5F,6BAAL,EAAA,CAAA;;IACA,IAAA,IAAA,CAAKpL,wBAAL,GAAgC8O,UAAU,CAAC,MAAM;IAC7C,MAAA,IAAA,CAAK1a,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,4BAAnB,CAAA,CAAA;IACA,MAAA,IAAA,CAAKhX,IAAL,CAAUkB,MAAM,CAACwF,uBAAjB,CAAA,CAAA;IACH,KAHyC,EAGvC,IAAA,CAAKoP,IAAL,CAAUjI,mBAH6B,CAA1C,CAAA;IAIH,GAAA;;IAEDmL,EAAAA,6BAA6B,GAAG;QAC5B,IAAI,IAAA,CAAKpL,wBAAT,EAAmC;IAC/B,MAAA,IAAA,CAAK5L,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,+BAAnB,CAAA,CAAA;UACAwB,YAAY,CAAC,IAAK5K,CAAAA,wBAAN,CAAZ,CAAA;UACA,IAAKA,CAAAA,wBAAL,GAAgC,IAAhC,CAAA;IACH,KAAA;IACJ,GAAA;;IAED4R,EAAAA,mBAAmB,GAAG;IAClB;IACA,IAAA,IAAA,CAAKxH,aAAL,GAAqByH,WAAW,CAAC,MAAM;IACnC,MAAA,IAAA,CAAKzd,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,gBAAnB,CAAA,CAAA;IACA,MAAA,IAAI7W,IAAI,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,CAAX,CAAA;IACAA,MAAAA,IAAI,GAAG,IAAIwO,UAAJ,CAAexO,IAAf,CAAP,CAAA;IACA,MAAA,IAAA,CAAK0X,MAAL,CAAY2G,IAAZ,CAAiBre,IAAI,CAACmD,MAAtB,CAAA,CAAA;SAJ4B,EAK7B,EAAK,GAAA,IALwB,CAAhC,CAAA;IAMH,GAAA;;IAEDyV,EAAAA,kBAAkB,GAAG;QACjB,IAAI,IAAA,CAAKf,aAAT,EAAwB;IACpB,MAAA,IAAA,CAAKhW,GAAL,CAAS,IAAKgV,CAAAA,GAAd,EAAmB,qBAAnB,CAAA,CAAA;UACA0I,aAAa,CAAC,IAAK1H,CAAAA,aAAN,CAAb,CAAA;UACA,IAAKA,CAAAA,aAAL,GAAqB,IAArB,CAAA;IACH,KAAA;IACJ,GAAA;;MAGD2H,SAAS,CAAC1H,KAAD,EAAQ;IACb,IAAA,OAAO,IAAI8B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;UACpC,IAAI,CAAC3K,qBAAqB,EAA1B,EAA8B;YAC1B,OAAO2K,MAAM,CAAC,0BAAD,CAAb,CAAA;IACH,OAAA;;UACD,IAAKhC,CAAAA,KAAL,GAAaA,KAAb,CAAA;;IAEA,MAAA,IAAI,IAAKnC,CAAAA,IAAL,CAAUtI,cAAd,EAA8B;IAC1B,QAAA,IAAA,CAAK4M,OAAL,EAAA,CAAA;IACH,OAFD,MAEO;YACH,IAAI,CAAC,IAAKnC,CAAAA,KAAV,EAAiB;cACb,OAAOgC,MAAM,CAAC,eAAD,CAAb,CAAA;IACH,SAAA;;IAED,QAAA,IAAA,CAAKH,gBAAL,EAAA,CAAwBsF,KAAxB,CAA+B7f,CAAD,IAAO;cACjC0a,MAAM,CAAC1a,CAAD,CAAN,CAAA;aADJ,CAAA,CAAA;IAGH,OAhBmC;;;IAkBpC,MAAA,IAAA,CAAKE,IAAL,CAAUyB,MAAM,CAACuF,oBAAjB,EAAuC,MAAM;YACzCwT,MAAM,CAAC,mBAAD,CAAN,CAAA;IACH,OAFD,EAlBoC;;IAsBpC,MAAA,IAAA,CAAKxa,IAAL,CAAUyB,MAAM,CAACsF,uBAAjB,EAA0C,MAAM;YAC5CwT,OAAO,EAAA,CAAA;WADX,CAAA,CAAA;IAGH,KAzBM,CAAP,CAAA;IA2BH,GAAA;;MAED4F,SAAS,CAACC,MAAD,EAAS;QACdA,MAAM,GAAGC,UAAU,CAACD,MAAD,CAAV,CAAmBE,OAAnB,CAA2B,CAA3B,CAAT,CAAA;;IACA,IAAA,IAAIC,KAAK,CAACH,MAAD,CAAT,EAAmB;IACf,MAAA,OAAA;IACH,KAAA;;QACDA,MAAM,GAAG/Q,KAAK,CAAC+Q,MAAD,EAAS,CAAT,EAAY,CAAZ,CAAd,CAAA;IACA,IAAA,IAAA,CAAKzI,QAAL,CAAcuD,IAAd,CAAmBxJ,KAAnB,GAA2B0O,MAA3B,CAAA;IACH,GAAA;;IAEDI,EAAAA,SAAS,GAAG;IACR,IAAA,OAAO,KAAKnK,IAAZ,CAAA;IACH,GAAA;;IAES,EAAA,IAAN+J,MAAM,GAAG;QACT,OAAO,IAAA,CAAKzI,QAAL,GAAgB0I,UAAU,CAAC,IAAK1I,CAAAA,QAAL,CAAcuD,IAAd,CAAmBxJ,KAAnB,GAA2B,GAA5B,CAAV,CAA2C4O,OAA3C,CAAmD,CAAnD,CAAhB,GAAwE,IAA/E,CAAA;IACH,GAAA;;IA5qBqC;;ICpB1C,MAAMG,gBAAN,SAA+BhhB,OAA/B,CAAuC;IAEnCmS,EAAAA,WAAW,GAAe;QAAA,IAAdC,OAAc,uEAAJ,EAAI,CAAA;IACtB,IAAA,KAAA,EAAA,CAAA;QACA,IAAK6O,CAAAA,IAAL,GAAY,IAAZ,CAAA;IACA;;QACA,IAAKrK,CAAAA,IAAL,GAAYxE,OAAZ,CAAA;QACA,IAAK8O,CAAAA,OAAL,GAAe,kBAAf,CAAA;IAEA,IAAA,IAAA,CAAKrf,KAAL,GAAa,IAAI6U,KAAJ,CAAU,IAAV,CAAb,CAAA;IACA,IAAA,IAAA,CAAK7U,KAAL,CAAWiB,GAAX,CAAe,KAAKoe,OAApB,EAA6B,MAA7B,EAAqCtP,IAAI,CAACC,SAAL,CAAeO,OAAf,CAArC,CAAA,CAAA;IACH,GAAA;;IAEDzN,EAAAA,OAAO,GAAG;IACN,IAAA,IAAA,CAAK9C,KAAL,CAAWiB,GAAX,CAAe,IAAKoe,CAAAA,OAApB,EAA6B,WAA7B,CAAA,CAAA;IACA,IAAA,IAAA,CAAKxgB,GAAL,EAAA,CAAA;;QACA,IAAI,IAAA,CAAKugB,IAAT,EAAe;UACX,IAAKA,CAAAA,IAAL,CAAUtc,OAAV,EAAA,CAAA;UACA,IAAKsc,CAAAA,IAAL,GAAY,IAAZ,CAAA;IACH,KAAA;;IACD,IAAA,IAAA,CAAKpf,KAAL,CAAWiB,GAAX,CAAe,IAAKoe,CAAAA,OAApB,EAA6B,SAA7B,CAAA,CAAA;IACH,GAAA;;IAGD7H,EAAAA,SAAS,GAAe;QAAA,IAAdjH,OAAc,uEAAJ,EAAI,CAAA;;QACpB,IAAI,IAAA,CAAK6O,IAAT,EAAe;IACX,MAAA,IAAA,CAAKpf,KAAL,CAAWiB,GAAX,CAAe,IAAKoe,CAAAA,OAApB,EAA6B,6CAA7B,CAAA,CAAA;UACA,IAAKD,CAAAA,IAAL,CAAUtc,OAAV,EAAA,CAAA;UACA,IAAKsc,CAAAA,IAAL,GAAY,IAAZ,CAAA;IACH,KAAA;;IAED,IAAA,MAAME,GAAG,GAAG9f,MAAM,CAAC2W,MAAP,CAAc,EAAd,EAAkBtG,KAAK,CAAC,IAAKkF,CAAAA,IAAN,CAAvB,EAAoCxE,OAApC,CAAZ,CAAA;QACA,IAAK6O,CAAAA,IAAL,GAAY,IAAIrJ,IAAJ,CAAS,IAAT,EAAeuJ,GAAf,CAAZ,CAAA;IACA,IAAA,IAAA,CAAKtf,KAAL,CAAWiB,GAAX,CAAe,IAAKoe,CAAAA,OAApB,EAA6B,WAA7B,EAA0C,IAAA,CAAKD,IAAL,CAAUF,SAAV,EAA1C,CAAA,CAAA;;IACA,IAAA,IAAA,CAAKK,eAAL,EAAA,CAAA;IACH,GAAA;;IAEDA,EAAAA,eAAe,GAAG;IACd;QACA/f,MAAM,CAACC,IAAP,CAAYmI,WAAZ,EAAyBlI,OAAzB,CAAkCC,GAAD,IAAS;UACtC,IAAKyf,CAAAA,IAAL,CAAUhhB,EAAV,CAAawJ,WAAW,CAACjI,GAAD,CAAxB,EAAgCyQ,KAAD,IAAW;IACtC,QAAA,IAAA,CAAKnR,IAAL,CAAUU,GAAV,EAAeyQ,KAAf,CAAA,CAAA;WADJ,CAAA,CAAA;SADJ,CAAA,CAAA;IAKH,GAAA;IAED;IACJ;IACA;IACA;IACA;IACA;;;MACIwO,SAAS,CAAC1H,KAAD,EAAsB;QAAA,IAAd3G,OAAc,uEAAJ,EAAI,CAAA;IAC3B,IAAA,OAAO,IAAIyI,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpC,MAAA,IAAA,CAAKlZ,KAAL,CAAWiB,GAAX,CAAe,IAAA,CAAKoe,OAApB,EAA6B,WAA7B,EAA0CnI,KAA1C,EAAiDnH,IAAI,CAACC,SAAL,CAAeO,OAAf,CAAjD,CAAA,CAAA;;UACA,IAAKiH,CAAAA,SAAL,CAAejH,OAAf,CAAA,CAAA;;UAEA,IAAK6O,CAAAA,IAAL,CAAUR,SAAV,CAAoB1H,KAApB,CAA2BmE,CAAAA,IAA3B,CAAgC,MAAM;YAClCpC,OAAO,EAAA,CAAA;YAEP,IAAKmG,CAAAA,IAAL,CAAU1gB,IAAV,CAAeyB,MAAM,CAAC2F,eAAtB,EAAuC,MAAM;IACzC,UAAA,IAAA,CAAK9F,KAAL,CAAWC,IAAX,CAAgB,IAAKof,CAAAA,OAArB,EAA8B,6BAA9B,CAAA,CAAA;IACA,UAAA,IAAA,CAAKG,QAAL,EAAA,CAAgBnB,KAAhB,CAAuB7f,CAAD,IAAO;gBACzB,IAAKwB,CAAAA,KAAL,CAAWC,IAAX,CAAgB,KAAKof,OAArB,EAA8B,0BAA9B,EAA0D7gB,CAA1D,CAAA,CAAA;eADJ,CAAA,CAEG8f,OAFH,CAEW,MAAM;gBACb,IAAKrf,CAAAA,IAAL,CAAUkB,MAAM,CAACmH,iBAAjB,EAAoCnH,MAAM,CAAC2F,eAA3C,CAAA,CAAA;eAHJ,CAAA,CAAA;aAFJ,CAAA,CAAA;YAQA,IAAKsZ,CAAAA,IAAL,CAAU1gB,IAAV,CAAeyB,MAAM,CAAC4F,eAAtB,EAAwCvH,CAAD,IAAO;IAC1C,UAAA,IAAA,CAAKwB,KAAL,CAAWkB,KAAX,CAAiB,IAAKme,CAAAA,OAAtB,EAA+B,6BAA/B,CAAA,CAAA;IACA,UAAA,IAAA,CAAKG,QAAL,EAAA,CAAgBnB,KAAhB,CAAuB7f,CAAD,IAAO;gBACzB,IAAKwB,CAAAA,KAAL,CAAWC,IAAX,CAAgB,KAAKof,OAArB,EAA8B,0BAA9B,EAA0D7gB,CAA1D,CAAA,CAAA;eADJ,CAAA,CAEG8f,OAFH,CAEW,MAAM;gBACb,IAAKrf,CAAAA,IAAL,CAAUkB,MAAM,CAACmH,iBAAjB,EAAoCnH,MAAM,CAAC4F,eAA3C,CAAA,CAAA;eAHJ,CAAA,CAAA;aAFJ,CAAA,CAAA;YASA,IAAKqZ,CAAAA,IAAL,CAAU1gB,IAAV,CAAeyB,MAAM,CAAC6F,kBAAtB,EAA0C,MAAM;IAC5C,UAAA,IAAA,CAAKhG,KAAL,CAAWC,IAAX,CAAgB,IAAKof,CAAAA,OAArB,EAA8B,gCAA9B,CAAA,CAAA;IACA,UAAA,IAAA,CAAKG,QAAL,EAAA,CAAgBnB,KAAhB,CAAuB7f,CAAD,IAAO;gBACzB,IAAKwB,CAAAA,KAAL,CAAWC,IAAX,CAAgB,KAAKof,OAArB,EAA8B,6BAA9B,EAA6D7gB,CAA7D,CAAA,CAAA;eADJ,CAAA,CAEG8f,OAFH,CAEW,MAAM;gBACb,IAAKrf,CAAAA,IAAL,CAAUkB,MAAM,CAACmH,iBAAjB,EAAoCnH,MAAM,CAAC6F,kBAA3C,CAAA,CAAA;eAHJ,CAAA,CAAA;aAFJ,CAAA,CAAA;YASA,IAAKoZ,CAAAA,IAAL,CAAU1gB,IAAV,CAAeyB,MAAM,CAACwF,uBAAtB,EAA+C,MAAM;IACjD,UAAA,IAAA,CAAK3F,KAAL,CAAWC,IAAX,CAAgB,IAAKof,CAAAA,OAArB,EAA8B,qCAA9B,CAAA,CAAA;IACA,UAAA,IAAA,CAAKG,QAAL,EAAA,CAAgBnB,KAAhB,CAAuB7f,CAAD,IAAO;gBACzB,IAAKwB,CAAAA,KAAL,CAAWC,IAAX,CAAgB,KAAKof,OAArB,EAA8B,kCAA9B,EAAkE7gB,CAAlE,CAAA,CAAA;eADJ,CAAA,CAEG8f,OAFH,CAEW,MAAM;gBACb,IAAKrf,CAAAA,IAAL,CAAUkB,MAAM,CAACmH,iBAAjB,EAAoCnH,MAAM,CAACwF,uBAA3C,CAAA,CAAA;eAHJ,CAAA,CAAA;aAFJ,CAAA,CAAA;IASH,OAtCD,CAsCG0Y,CAAAA,KAtCH,CAsCU7f,CAAD,IAAO;YACZ0a,MAAM,CAAC1a,CAAD,CAAN,CAAA;WAvCJ,CAAA,CAAA;IAyCH,KA7CM,CAAP,CAAA;IA8CH,GAAA;IAGD;IACJ;IACA;IACA;;;IACIghB,EAAAA,QAAQ,GAAG;IACP,IAAA,OAAO,IAAIxG,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpC,MAAA,IAAA,CAAKlZ,KAAL,CAAWiB,GAAX,CAAe,IAAKoe,CAAAA,OAApB,EAA6B,YAA7B,CAAA,CAAA;;UACA,IAAI,CAAC,IAAKD,CAAAA,IAAV,EAAgB;YACZlG,MAAM,CAAC,kBAAD,CAAN,CAAA;IACH,OAAA;;UACD,IAAKkG,CAAAA,IAAL,CAAUtc,OAAV,EAAA,CAAA;UACA,IAAKsc,CAAAA,IAAL,GAAY,IAAZ,CAAA;UACAnG,OAAO,EAAA,CAAA;IACV,KARM,CAAP,CAAA;IASH,GAAA;IAED;IACJ;IACA;IACA;;;IACIwG,EAAAA,aAAa,GAAG;IACZ,IAAA,OAAO,IAAIzG,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;UACpC,IAAI,CAAC,IAAKkG,CAAAA,IAAV,EAAgB;YACZlG,MAAM,CAAC,kBAAD,CAAN,CAAA;IACH,OAAA;;IACD,MAAA,IAAI1K,MAAM,GAAG,IAAK4Q,CAAAA,IAAL,CAAUN,MAAvB,CAAA;UACA7F,OAAO,CAACzK,MAAD,CAAP,CAAA;IACH,KANM,CAAP,CAAA;IAOH,GAAA;IAED;IACJ;IACA;IACA;IACA;;;MACIkR,aAAa,CAACZ,MAAD,EAAS;IAClB,IAAA,OAAO,IAAI9F,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;UACpC,IAAKlZ,CAAAA,KAAL,CAAWiB,GAAX,CAAe,KAAKoe,OAApB,EAA6B,eAA7B,EAA8CP,MAA9C,CAAA,CAAA;;UACA,IAAI,CAAC,IAAKM,CAAAA,IAAV,EAAgB;YACZlG,MAAM,CAAC,kBAAD,CAAN,CAAA;IACH,OAAA;;IACD,MAAA,IAAA,CAAKkG,IAAL,CAAUP,SAAV,CAAoBC,MAAM,GAAG,GAA7B,CAAA,CAAA;UACA7F,OAAO,EAAA,CAAA;IACV,KAPM,CAAP,CAAA;IAQH,GAAA;;IAED0G,EAAAA,mBAAmB,GAAG;IAClB,IAAA,OAAO,IAAI3G,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;UACpC,IAAI,IAAA,CAAKkG,IAAT,EAAe;YACX,IAAKA,CAAAA,IAAL,CAAUhH,eAAV,EAAA,CAAA;YACAa,OAAO,EAAA,CAAA;IACV,OAHD,MAGO;YACHC,MAAM,CAAC,kBAAD,CAAN,CAAA;IACH,OAAA;IACJ,KAPM,CAAP,CAAA;IASH,GAAA;;IA9JkC,CAAA;;IAiKvCiG,gBAAgB,CAAChf,MAAjB,GAA0ByH,WAA1B,CAAA;IAEA8G,MAAM,CAACyQ,gBAAP,GAA0BA,gBAA1B,CAAA;IACAzQ,MAAM,CAACkR,gBAAP,GAA0BT,gBAA1B;;;;;;"}